# C#

## ğŸ¤” C# lÃ  gÃ¬?

C# lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng ráº¥t tÆ°á»ng minh, rÃµ rÃ ng. C# Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ phÃ¡t triá»ƒn nhiá»u loáº¡i á»©ng dá»¥ng (á»¨ng dá»¥ng Windows, Linux, macOS, Web ...) cÃ³ hiá»‡u nÄƒng cao vÃ  báº£o máº­t thi hÃ nh trÃªn ná»n táº£ng .NET

C# Ä‘Æ°á»£c thiáº¿t káº¿ cho **Common Language Infrastructure (CLI)**, mÃ  gá»“m **Executable Code** vÃ  **Runtime Environment**, cho phÃ©p chÃºng ta sá»­ dá»¥ng cÃ¡c ngÃ´n ngá»¯ high-level Ä‘a dáº¡ng trÃªn cÃ¡c ná»n táº£ng vÃ  cáº¥u trÃºc mÃ¡y tÃ­nh khÃ¡c nhau.

Cáº¥u trÃºc C# khÃ¡ gáº§n vá»›i cÃ¡c ngÃ´n ngá»¯ high-level truyá»n thá»‘ng, C vÃ  C++, vÃ  lÃ  má»™t ngÃ´n ngá»¯ láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng. NÃ³ cÃ³ sá»± giá»‘ng nhau máº¡nh máº½ vá»›i Java, nÃ³ cÃ³ nhiá»u Ä‘áº·c Ä‘iá»ƒm láº­p trÃ¬nh máº¡nh máº½ mÃ  lÃ m cho nÃ³ trá»Ÿ nÃªn Æ°a thÃ­ch vá»›i cÃ¡c láº­p trÃ¬nh viÃªn trÃªn toÃ n tháº¿ giá»›i:

- Äiá»u kiá»‡n Boolean
- Tá»± Ä‘á»™ng dá»n rÃ¡c bá»Ÿi Garbage-Collector (GC)
- ThÆ° viá»‡n chuáº©n (Standard Library)
- Assembly
- Property vÃ  sá»± kiá»‡n (Event)
- Delegate Quáº£n lÃ½ sá»± kiá»‡n
- Dá»… dÃ ng Ä‘á»ƒ sá»­ dá»¥ng Generic
- Indexer
- BiÃªn dá»‹ch cÃ³ Ä‘iá»u kiá»‡n (Conditional Compilation)
- Äa luá»“ng dá»… dÃ ng (Multithreading)
- LINQ vÃ  Lambda Expression
- TÃ­ch há»£p vá»›i Windows

## ğŸ¤” .NET lÃ  gÃ¬?

.Net Framework lÃ  má»™t ná»n táº£ng mang tÃ­nh cÃ¡ch máº¡ng giÃºp báº¡n viáº¿t cÃ¡c kiá»ƒu á»©ng dá»¥ng:

- Windows application
- Web application
- Dá»‹ch vá»¥ Web

CÃ¡c á»©ng dá»¥ng .Net Framework lÃ  cÃ¡c á»©ng dá»¥ng Ä‘a ná»n táº£ng.

.Net Framework gá»“m má»™t thÆ° viá»‡n code khá»•ng lá»“ Ä‘Æ°á»£c sá»­ dá»¥ng bá»Ÿi cÃ¡c ngÃ´n ngá»¯ client

Má»™t sá»‘ thÃ nh pháº§n cá»§a .Net Framework:

- Common Language Runtime (CLR)
- .Net Framework Class Library
- Common Language Specification
- Common Type System
- Metadata vÃ  Assembly
- Windows Form
- ASP.Net vÃ  ASP.Net AJAX
- ADO.Net
- Windows Workflow Foundation (WF)
- Windows Presentation Foundation
- Windows Communication Foundation (WCF)
- LINQ

**_Ä‘á»c thÃªm file DOTNET.txt_**

## Nhá»¯ng Ä‘iá»u cáº§n lÆ°u Ã½

â—C# lÃ  phÃ¢n biá»‡t kiá»ƒu chá»¯ (case sensitive).

â—Táº¥t cáº£ lá»‡nh vÃ  biá»ƒu thá»©c pháº£i káº¿t thÃºc vá»›i má»™t dáº¥u cháº¥m pháº£y (;).

â—Sá»± thá»±c thi chÆ°Æ¡ng trÃ¬nh báº¯t Ä‘áº§u táº¡i phÆ°Æ¡ng thá»©c Main.

â—KhÃ´ng giá»‘ng Java, tÃªn file chÆ°Æ¡ng trÃ¬nh cÃ³ thá»ƒ khÃ¡c tÃªn lá»›p.

## Assembly

Trong C#, má»™t **assembly** lÃ  má»™t Ä‘Æ¡n vá»‹ logic cá»§a á»©ng dá»¥ng .NET vÃ  lÃ  khá»‘i xÃ¢y dá»±ng cÆ¡ báº£n cá»§a á»©ng dá»¥ng .NET

**Assembly** bao gá»“m cÃ¡c tá»‡p thá»±c thi (EXE) hoáº·c thÆ° viá»‡n (DLL) vÃ  chá»©a mÃ£, tÃ i nguyÃªn, vÃ  metadata cáº§n thiáº¿t Ä‘á»ƒ cháº¡y chÆ°Æ¡ng trÃ¬nh

CÃ³ 2 loáº¡i

- **Executable Assembly (EXE)**: ÄÃ¢y lÃ  cÃ¡c tá»‡p thá»±c thi Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ cháº¡y cÃ¡c á»©ng dá»¥ng Ä‘á»™c láº­p.

- **Library Assembly (DLL)**: ÄÃ¢y lÃ  cÃ¡c thÆ° viá»‡n chá»©a mÃ£ dÃ¹ng chung mÃ  cÃ¡c á»©ng dá»¥ng khÃ¡c cÃ³ thá»ƒ tham chiáº¿u vÃ  sá»­ dá»¥ng.

ThÃ nh pháº§n

- Metadata: Metadata cung cáº¥p thÃ´ng tin vá» cÃ¡c kiá»ƒu dá»¯ liá»‡u, thÃ nh viÃªn, tham sá»‘, vÃ  cÃ¡c thÃ´ng tin khÃ¡c trong assembly. Metadata cho phÃ©p kiá»ƒm tra kiá»ƒu thá»i gian cháº¡y, Ã¡nh xáº¡, vÃ  nhiá»u tÃ­nh nÄƒng khÃ¡c.

- Intermediate Language (IL): IL lÃ  mÃ£ trung gian mÃ  mÃ£ nguá»“n C# Ä‘Æ°á»£c biÃªn dá»‹ch thÃ nh. Khi chÆ°Æ¡ng trÃ¬nh Ä‘Æ°á»£c thá»±c thi, IL Ä‘Æ°á»£c biÃªn dá»‹ch thÃ nh mÃ£ mÃ¡y cá»¥ thá»ƒ cá»§a ná»n táº£ng.

- Manifest: Manifest lÃ  má»™t pháº§n cá»§a metadata chá»©a thÃ´ng tin vá» assembly, nhÆ° tÃªn, phiÃªn báº£n, vÄƒn hÃ³a (culture), vÃ  danh sÃ¡ch cÃ¡c tá»‡p khÃ¡c (náº¿u cÃ³).

- Resources: CÃ¡c tÃ i nguyÃªn nhÆ° hÃ¬nh áº£nh, chuá»—i vÄƒn báº£n, vÃ  cÃ¡c tá»‡p khÃ¡c cÃ³ thá»ƒ Ä‘Æ°á»£c Ä‘Ã³ng gÃ³i trong assembly

TÃ¡c dá»¥ng

- Isolation and Versioning: Assembly giÃºp cÃ´ láº­p mÃ£ vÃ  tÃ i nguyÃªn, giÃºp quáº£n lÃ½ phiÃªn báº£n dá»… dÃ ng hÆ¡n.

- Deployment: Assembly giÃºp Ä‘Æ¡n giáº£n hÃ³a quÃ¡ trÃ¬nh triá»ƒn khai báº±ng cÃ¡ch Ä‘Ã³ng gÃ³i táº¥t cáº£ cÃ¡c thÃ nh pháº§n cá»§a á»©ng dá»¥ng vÃ o má»™t Ä‘Æ¡n vá»‹ duy nháº¥t.

- Security: Assembly cÃ³ thá»ƒ Ä‘Æ°á»£c kÃ½ sá»‘ Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n vÃ  tÃ­nh xÃ¡c thá»±c cá»§a mÃ£.

- Reusability: CÃ¡c thÆ° viá»‡n trong dáº¡ng assembly (DLL) cÃ³ thá»ƒ Ä‘Æ°á»£c tÃ¡i sá»­ dá»¥ng bá»Ÿi cÃ¡c á»©ng dá»¥ng khÃ¡c, giÃºp giáº£m thiá»ƒu viá»‡c viáº¿t láº¡i mÃ£.

_Giáº£ sá»­ chÃºng ta cÃ³ má»™t thÆ° viá»‡n toÃ¡n há»c Ä‘Æ°á»£c biÃªn dá»‹ch thÃ nh má»™t assembly (MathLibrary.dll)_

```C#
// File: MathLibrary.cs
namespace MathLibrary
{
    public class Calculator
    {
        public int Add(int a, int b)
        {
            return a + b;
        }

        internal int Subtract(int a, int b)
        {
            return a - b;
        }
    }
}
```

_Assembly nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c sá»­ dá»¥ng trong má»™t á»©ng dá»¥ng khÃ¡c_

```C#
// File: Program.cs
using MathLibrary;

class Program
{
    static void Main()
    {
        Calculator calc = new Calculator();
        int sum = calc.Add(3, 4);
        Console.WriteLine("Sum: " + sum);

        // The following line would cause a compile error because Subtract is internal
        // int difference = calc.Subtract(10, 5);
    }
}
```

PhÆ°Æ¡ng thá»©c Add cá»§a lá»›p Calculator cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p tá»« báº¥t ká»³ á»©ng dá»¥ng nÃ o tham chiáº¿u Ä‘áº¿n MathLibrary.dll

PhÆ°Æ¡ng thá»©c Subtract chá»‰ cÃ³ thá»ƒ Ä‘Æ°á»£c truy cáº­p tá»« bÃªn trong cÃ¹ng má»™t assembly (MathLibrary.dll) do nÃ³ Ä‘Æ°á»£c khai bÃ¡o lÃ  internal

_â—Pháº¡m vi truy cáº­p internal sáº½ Ä‘Æ°á»£c nháº¯c Ä‘áº¿n sau_

**_ğŸ’¡PhÃ¢n biá»‡t assembly, namespace, file .cs_**

- Má»™t assembly khÃ´ng tÆ°Æ¡ng á»©ng trá»±c tiáº¿p vá»›i má»™t namespace hay má»™t file .cs duy nháº¥t.
- Má»™t assembly cÃ³ thá»ƒ chá»©a nhiá»u namespaces vÃ  nhiá»u file .cs, vÃ  má»—i namespace cÅ©ng cÃ³ thá»ƒ tráº£i dÃ i qua nhiá»u file .cs vÃ  nhiá»u assembly.
- Assembly lÃ  má»™t Ä‘Æ¡n vá»‹ triá»ƒn khai, trong khi namespace lÃ  má»™t cÃ¡ch tá»• chá»©c mÃ£ nguá»“n logic.

## File .csproj (file cáº¥u hÃ¬nh dá»± Ã¡n)

Tá»‡p .csproj cá»§a má»™t dá»± Ã¡n C# sá»­ dá»¥ng Ä‘á»‹nh dáº¡ng XML Ä‘á»ƒ Ä‘á»‹nh nghÄ©a cáº¥u trÃºc vÃ  thiáº¿t láº­p cá»§a dá»± Ã¡n

```XML
<Project Sdk="Microsoft.NET.Sdk">

  <!-- 1. PropertyGroup: Cáº¥u hÃ¬nh chung -->
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <TargetFramework>net7.0</TargetFramework>
    <RuntimeIdentifier>win-x64</RuntimeIdentifier>
    <RuntimeIdentifiers>win-x64;linux-x64</RuntimeIdentifiers>
    <AssemblyTitle>MyApplication</AssemblyTitle>
    <AssemblyVersion>1.0.0.0</AssemblyVersion>
    <MyCustomProperty>MyValue</MyCustomProperty>
  </PropertyGroup>

  <!-- 2. PropertyGroup: Cáº¥u hÃ¬nh riÃªng cho cháº¿ Ä‘á»™ Debug -->
  <PropertyGroup Condition="'$(Configuration)' == 'Debug'">
    <DefineConstants>DEBUG;TRACE</DefineConstants>
    <OutputPath>bin\Debug\</OutputPath>
  </PropertyGroup>

  <!-- 3. PropertyGroup: Cáº¥u hÃ¬nh riÃªng cho cháº¿ Ä‘á»™ Release -->
  <PropertyGroup Condition="'$(Configuration)' == 'Release'">
    <DefineConstants>RELEASE</DefineConstants>
    <Optimize>true</Optimize>
    <OutputPath>bin\Release\</OutputPath>
  </PropertyGroup>

  <!-- 4. ItemGroup: Tham chiáº¿u Ä‘áº¿n cÃ¡c gÃ³i NuGet -->
  <ItemGroup>
    <PackageReference Include="Newtonsoft.Json" Version="13.0.1" />
  </ItemGroup>

  <!-- 5. ItemGroup: Tham chiáº¿u Ä‘áº¿n dá»± Ã¡n khÃ¡c trong giáº£i phÃ¡p -->
  <ItemGroup>
    <ProjectReference Include="..\OtherProject\OtherProject.csproj" />
  </ItemGroup>

  <!-- 6. ItemGroup: Tham chiáº¿u Ä‘áº¿n thÆ° viá»‡n DLL cá»¥ thá»ƒ -->
  <ItemGroup>
    <Reference Include="System.Data">
    <HintPath>..\libs\System.Data.dll</HintPath>
    </Reference>
  </ItemGroup>

  <!-- 7. ItemGroup: Bao gá»“m tÃ i nguyÃªn -->
  <ItemGroup>
    <EmbeddedResource Include="Resources\Strings.resx" />
  </ItemGroup>

  <!-- 8. ItemGroup: Bao gá»“m cÃ¡c tá»‡p ná»™i dung -->
  <ItemGroup>
    <Content Include="index.html" CopyToOutputDirectory="PreserveNewest" />
  </ItemGroup>

  <!-- 9. ItemGroup: Bao gá»“m cÃ¡c tá»‡p khÃ´ng thuá»™c vá» quÃ¡ trÃ¬nh xÃ¢y dá»±ng -->
  <ItemGroup>
    <None Include="README.md" />
  </ItemGroup>

  <!-- 10. Target: Thá»±c hiá»‡n tÃ¡c vá»¥ tÃ¹y chá»‰nh sau khi xÃ¢y dá»±ng -->
  <Target Name="CustomTask" AfterTargets="Build">
    <Exec Command="echo Building the project..." />
  </Target>

  <!-- 11. Import: Nháº­p tá»‡p targets -->
  <Import Project="..\common.targets" />

  <!-- 12. ItemDefinitionGroup: Äá»‹nh nghÄ©a máº·c Ä‘á»‹nh cho Compile -->
  <ItemDefinitionGroup>
    <Compile>
    <WarningLevel>4</WarningLevel>
    </Compile>
  </ItemDefinitionGroup>

</Project>
```

> chá»‰nh sá»­a sau

- <Project> : ÄÃ¢y lÃ  pháº§n gá»‘c cá»§a tá»‡p, bao quanh táº¥t cáº£ cÃ¡c thÃ nh pháº§n khÃ¡c vÃ  chá»‰ ra SDK Ä‘Æ°á»£c sá»­ dá»¥ng.

- <PropertyGroup> : NhÃ³m nÃ y chá»©a cÃ¡c thuá»™c tÃ­nh cáº¥u hÃ¬nh cá»§a dá»± Ã¡n.

  - <OutputType> : XÃ¡c Ä‘á»‹nh loáº¡i Ä‘áº§u ra cá»§a dá»± Ã¡n, vÃ­ dá»¥ nhÆ° Exe cho á»©ng dá»¥ng console hoáº·c Library cho thÆ° viá»‡n.

  - <TargetFramework> : XÃ¡c Ä‘á»‹nh phiÃªn báº£n .NET mÃ  dá»± Ã¡n sáº½ cháº¡y.

  - <RootNamespace> : XÃ¡c Ä‘á»‹nh namespace gá»‘c cho dá»± Ã¡n.

  - <AssemblyName> : TÃªn cá»§a assembly Ä‘Æ°á»£c táº¡o ra.

  - <LangVersion> : PhiÃªn báº£n ngÃ´n ngá»¯ C# Ä‘Æ°á»£c sá»­ dá»¥ng, latest sá»­ dá»¥ng phiÃªn báº£n má»›i nháº¥t.

- <ItemGroup> : NhÃ³m nÃ y chá»©a cÃ¡c pháº§n tá»­ tham chiáº¿u, nhÆ° cÃ¡c gÃ³i NuGet.

  - <PackageReference> : Tham chiáº¿u Ä‘áº¿n má»™t gÃ³i NuGet.

  - <ProjectReference> : Tham chiáº¿u Ä‘áº¿n má»™t dá»± Ã¡n C# khÃ¡c trong cÃ¹ng solution.

  - <Reference> : ThÃªm má»™t tham chiáº¿u Ä‘áº¿n má»™t tá»‡p DLL cá»¥ thá»ƒ

  - <Compile> : Bao gá»“m cÃ¡c tá»‡p mÃ£ nguá»“n cáº§n biÃªn dá»‹ch, trong vÃ­ dá»¥ trÃªn lÃ  táº¥t cáº£ cÃ¡c tá»‡p .cs trong thÆ° má»¥c Models.

  - <Content> : Bao gá»“m cÃ¡c tá»‡p tÄ©nh (static files), vÃ­ dá»¥ táº¥t cáº£ cÃ¡c tá»‡p trong thÆ° má»¥c wwwroot.

  - <None> : Tham chiáº¿u Ä‘áº¿n cÃ¡c tá»‡p khÃ´ng biÃªn dá»‹ch, nhÆ°ng cÃ³ thá»ƒ cáº§n sao chÃ©p Ä‘áº¿n thÆ° má»¥c Ä‘áº§u ra (output directory), vÃ­ dá»¥ appsettings.json.

  - <DotNetCliToolReference> : Tham chiáº¿u Ä‘áº¿n cÃ¡c cÃ´ng cá»¥ dÃ²ng lá»‡nh .NET CLI

  - <FrameworkReference>: Tham chiáº¿u Ä‘áº¿n cÃ¡c framework assemblies cá»¥ thá»ƒ, vÃ­ dá»¥ Microsoft.AspNetCore.App.

  - <EmbeddedResource>: Bao gá»“m cÃ¡c tÃ i nguyÃªn nhÃºng trong assembly.

  - <AdditionalProbingPath>: XÃ¡c Ä‘á»‹nh cÃ¡c Ä‘Æ°á»ng dáº«n bá»• sung Ä‘á»ƒ tÃ¬m kiáº¿m cÃ¡c gÃ³i NuGet.

- CÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a cÃ¡c cáº¥u hÃ¬nh khÃ¡c nhau (vÃ­ dá»¥: Debug, Release) trong tá»‡p .csproj báº±ng cÃ¡ch sá»­ dá»¥ng cÃ¡c nhÃ³m

  ```XML
  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">

  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
      <DefineConstants>DEBUG;TRACE</DefineConstants>
      <DebugType>full</DebugType>
      <Optimization>false</Optimization>
  </PropertyGroup>

  <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
      <DefineConstants>TRACE</DefineConstants>
      <DebugType>pdbonly</DebugType>
      <Optimization>true</Optimization>
  </PropertyGroup>
  ```

## Namespace

Namespace lÃ  cÃ¡ch tá»• chá»©c nhÃ³m code (cÃ¡c lá»›p, giao diá»‡n, cáº¥u trÃºc ...) thÃ nh nhá»¯ng nhÃ³m, táº¡o ra pháº¡m vi hoáº¡t Ä‘á»™ng cá»§a cÃ¡c thÃ nh pháº§n trong nhÃ³m.

```C#
namespace mynamespace {
  // Äá»‹nh nghÄ©a cÃ¡c lá»›p, cáº¥u trÃºc ...
}
```

_ğŸ’¡Hiá»ƒu Ä‘Æ¡n giáº£n namespace giá»‘ng vá»›i 1 thÆ° viá»‡n tá»± Ä‘á»‹nh nghÄ©a_

Má»¥c Ä‘Ã­ch lÃ  tá»• chá»©c code khoa há»c, dá»… quáº£n lÃ½ vÃ  Ä‘áº·c biá»‡t lÃ  trÃ¡nh xung Ä‘á»™t vá» tÃªn. Ta cÃ³ thá»ƒ khai bÃ¡o hai lá»›p tÃªn giá»‘ng nhau nhÆ°ng náº±m á»Ÿ hai namespace khÃ¡c nhau.

CÃ¡c thÃ nh pháº§n Ä‘Æ°á»£c khai bÃ¡o trong má»™t namespace: namespace con, cÃ¡c lá»›p (class), cÃ¡c giao diá»‡n interface c#, cÃ¡c cáº¥u trÃºc struct C#, cÃ¡c liá»‡t kÃª enum, cÃ¡c deleage C#

### Tá»« khÃ³a `using`

Sá»­ dá»¥ng tá»« khÃ³a using á»Ÿ Ä‘áº§u file code, Ä‘á»ƒ cho biáº¿t sáº½ sá»­ dá»¥ng cÃ¡c lá»›p thuá»™c má»™t namespace nÃ o Ä‘Ã³.

```C#
using System;
```

Chá»‰ thá»‹ using cÅ©ng giÃºp báº¡n Ä‘áº·t tÃªn má»›i (tÃªn táº¯t) cá»§a namespace, tÃªn nÃ y sá»­ dá»¥ng trong pháº¡m vi file code

```C#
using XYZ = System.Text;
```

Sá»­ dá»¥ng using chá»‰ thá»‹ truy cáº­p trá»±c tiáº¿p cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh, mÃ  khÃ´ng cáº§n viáº¿t tÃªn lá»›p cÃº phÃ¡p náº¡p phÆ°Æ¡ng thá»©c tÄ©nh cá»§a lá»›p

```C#
using static System.Console;  // cho biáº¿t sá»­ dá»¥ng trá»±c tiáº¿p cÃ¡c phÆ°Æ¡ng thá»©c tÄ©nh
WriteLine("Xin chÃ o C# NET CORE!");
```

### Namespace lá»“ng nhau, nhiá»u cáº¥p

CÃ¡c namespace cÅ©ng cÃ³ thá»ƒ khai bÃ¡o lá»“ng nhau, nhiá»u cáº¥p sau Ä‘Ã³ dÃ¹ng kÃ½ hiá»‡u . Ä‘á»ƒ truy cáº­p Ä‘áº¿n namepace mong muá»‘n

```C#
namespace A
{
    // Äá»‹nh nghÄ©a cÃ¡c lá»›p, cáº¥u trÃºc ...
    namespace B
    {
        // Äá»‹nh nghÄ©a cÃ¡c lá»›p, cáº¥u trÃºc ...
    }
}

using A.B;
```

Táº¡o ra namespace nhiá»u cáº¥p cÃ²n cÃ³ thá»ƒ khai bÃ¡o má»™t cÃ¡ch riÃªng ráº½ nhÆ°ng pháº£i chá»‰ rÃµ tÃªn Ä‘áº§y Ä‘á»§ cá»§a namespace (tÃªn namespace gá»‘c)

```C#
namespace A
{
    public struct StructInA { };
}
namespace A.B
{
    public struct StructInB { };
}
namespace A.B.C
{
    public struct StructInC { };
}
```

## Ghi chÃº

Ghi chÃº trÃªn 1 dÃ²ng sá»­ dá»¥ng

```C#
// ...
```

Ghi chÃº trÃªn nhiá»u dÃ²ng sá»­ dá»¥ng

```C#
/* ... */
```

C# XML Document : lÃ  má»™t loáº¡i ghi chÃº viáº¿t theo má»™t cáº¥u trÃºc quy Ä‘á»‹nh - sá»­ nhiá»u dÃ²ng ghi chÃº 1 dÃ²ng vá»›i cáº¥u trÃºc quy Ä‘á»‹nh, nháº±m há»— trá»£ phÃ¡t sinh Document (hÆ°á»›ng dáº«n) Ä‘áº¿n cÃ¡c Ä‘á»‘i tÆ°á»£ng sá»­ dá»¥ng (hÃ m, lá»›p, tham sá»‘ ...)

```C#
/// <summary>
/// TÃ­nh tá»•ng hai sá»‘ nguyÃªn
/// </summary>
/// <param name="a">sá»‘ thá»© nháº¥t</param>
/// <param name="b">sá»‘ thá»© hai</param>
/// <returns>giÃ¡ trá»‹ a + b</returns>
```

## Top-level statement

> bá»• sung sau

## Biáº¿n

Quy táº¯t Ä‘áº·t tÃªn:

- TÃªn biáº¿n cÃ³ thá»ƒ chá»©a chá»¯, sá»‘ vÃ  kÃ½ tá»± \_
- KÃ½ tá»± Ä‘áº§u tiÃªn cá»§a tÃªn biáº¿n khÃ´ng Ä‘Æ°á»£c dÃ¹ng sá»‘
- TÃªn biáº¿n trong C# cÃ³ phÃ¢n biá»‡t chá»¯ hoa chá»¯ thÆ°á»ng
- KhÃ´ng Ä‘áº·t tÃªn biáº¿n trÃ¹ng vá»›i nhá»¯ng tá»« khÃ³a dÃ nh riÃªng cho cÃ¢u lá»‡nh C#
- HÃ£y Ä‘áº·t tÃªn biáº¿n sao cho nÃ³ ngáº¯n gá»n nhÆ°ng gá»i nhá»› Ä‘áº¿n thÃ´ng tin dá»¯ liá»‡u biáº¿n Ä‘Ã³ lÆ°u trá»¯.

Kiá»ƒu dá»¯ liá»‡u C# Ä‘á»‹nh nghÄ©a sáºµn

| Kiá»ƒu dá»¯ liá»‡u | Ã nghÄ©a           | Miá»n giÃ¡ trá»‹                                                                                             |
| ------------ | ----------------- | -------------------------------------------------------------------------------------------------------- |
| int          | kiá»ƒu sá»‘ nguyÃªn    | cÃ³ dáº¥u, dÃ¹ng 32 bit biá»ƒu diá»…n, tá»« -2,147,483,648 Ä‘áº¿n 2,147,483,647                                       |
| sbyte        | kiá»ƒu sá»‘ nguyÃªn    | cÃ³ dáº¥u, dÃ¹ng 8 bit biá»ƒu diá»…n, tá»« -128 Ä‘áº¿n 127                                                            |
| byte         | kiá»ƒu sá»‘ nguyÃªn    | khÃ´ng dáº¥u, dÃ¹ng 8 bit biá»ƒu diá»…n, tá»« 0 Ä‘áº¿n 255                                                            |
| short        | kiá»ƒu sá»‘ nguyÃªn    | cÃ³ dáº¥u, dÃ¹ng 16 bit biá»ƒu diá»…n, tá»« -32,768 Ä‘áº¿n 32,767                                                     |
| ushort       | kiá»ƒu sá»‘ nguyÃªn    | khÃ´ng dáº¥u, dÃ¹ng 16 bit biá»ƒu diá»…n, tá»« 0 Ä‘áº¿n 65,535                                                        |
| long         | kiá»ƒu sá»‘ nguyÃªn    | cÃ³ dáº¥u, dÃ¹ng 64 bit biá»ƒu diá»…n, tá»« -9,223,372,036,854,775,808 Ä‘áº¿n 9,223,372,036,854,775,807               |
| ulong        | kiá»ƒu sá»‘ nguyÃªn    | khÃ´ng dáº¥u, dÃ¹ng 64 bit biá»ƒu diá»…n, tá»« 0 Ä‘áº¿n 18,446,744,073,709,551,615                                    |
| float        | sá»‘ thá»±c cháº¥m Ä‘á»™ng | dÃ¹ng 32 bit biá»ƒu diá»…n phÃ¹ há»£p sá»‘ cÃ³ báº£y chá»¯ sá»‘, Ä‘á»™ chÃ­nh xÃ¡c sá»‘ dáº¥u cháº¥m Ä‘á»™ng 1.5 Ã— 10âˆ’45 Ä‘áº¿n 3.4 Ã— 1038 |
| double       | sá»‘ thá»±c cháº¥m Ä‘á»™ng | dÃ¹ng 64 bit biá»ƒu diá»…n                                                                                    |
| decimal      | sá»‘ thá»±c cháº¥m Ä‘á»™ng | dÃ¹ng 128 bit biá»ƒu diá»…n                                                                                   |
| char         | má»™t kÃ½ tá»±         | dÃ¹ng 16 bit biá»ƒu diá»…n kÃ½ tá»± Unicode                                                                      |
| bool         | kiá»ƒu logic        | chá»‰ nháº­n giÃ¡ trá»‹ false hoáº·c true                                                                         |
| string       | chuá»—i             | (xÃ¢u) kÃ½ tá»± (táº­p há»£p cÃ¡c kÃ½ tá»± theo thá»© tá»± - má»™t vÄƒn báº£n text)                                           |
| object       | Ä‘á»‘i tÆ°á»£ng         | biá»ƒu diá»…n cÃ¡c Ä‘á»‘i tÆ°á»£ng C#, nÃ³ lÃ  kiá»ƒu cÆ¡ sá»Ÿ - má»i Ä‘á»‘i tÆ°á»£ng C# Ä‘á»u káº¿ thá»«a tá»« kiá»ƒu nÃ y.                 |

_â—kÃ­ tá»± thÃ¬ Ä‘á»ƒ trong ' ', chuá»—i kÃ­ tá»± thÃ¬ Ä‘á»ƒ trong " "_

## Xuáº¥t dá»¯ liá»‡u

CÃ³ thá»ƒ sá»­ dá»¥ng 1 sá»‘ phÆ°Æ¡ng thá»©c cÃ³ sáºµn trong lá»›p Console trong namespace System

- `Console.writeline(value);` : in value ra mÃ n hÃ¬nh (cÃ³ xuá»‘ng dÃ²ng)
- `Console.write(value);` : in value mÃ n hÃ¬nh (khÃ´ng xuá»‘ng dÃ²ng)
- `onsole.ForegroundColor = [mÃ u]` : thuá»™c tÃ­nh Ä‘á»ƒ gÃ¡n mÃ u chá»¯ xuáº¥t ra, nÃ³ cÃ³ thá»ƒ gÃ¡n cÃ¡c mÃ u nhÆ° ConsoleColor.Red, ConsoleColor.Green, ConsoleColor.White ...
- `Console.ResetColor();` : Ä‘áº·t láº¡i mÃ u

_â—value cÃ³ thá»ƒ lÃ  sá»‘ cÃ³ thá»ƒ lÃ  chuá»—i_

CÃ³ thá»ƒ dÃ¹ng format string Ä‘á»ƒ táº¡o ra chuá»—i in ra nháº±m giáº£m thiá»ƒu dÃ²ng code

```C#
string.Format("Xin chao {0}", ten) // String

// Ãp dá»¥ng
Console.writeline("Bien A = {0}, bien B = {1}, tong A + B = {2}", a, b, a + b);
```

DÃ¹ng `$` á»Ÿ Ä‘áº§u Ä‘á»ƒ chÃ¨n biá»ƒu thá»©c vÃ o chuá»—i in ra (coi thÃªm á»Ÿ má»¥c chuá»—i kÃ½ tá»±)

```C#
Console.writeline($"Bien A = {a}, bien B = {b}, tong A + B = {a + b}");
```

## Nháº­p dá»¯ liá»‡u

CÃ³ thá»ƒ sá»­ dá»¥ng 1 sá»‘ phÆ°Æ¡ng thá»©c cÃ³ sáºµn trong lá»›p Console trong namespace System

- `Console.ReadLine()` : cho phÃ©p nháº­p dá»¯ liá»‡u cho Ä‘áº¿n khi nháº¥n Enter, hÃ m nÃ y tráº£ vá» chuá»—i mÃ  ngÆ°á»i dÃ¹ng nháº­p vÃ o
- `Console.ReadKey()` : tráº£ vá» ngay thÃ´ng tin phÃ­m báº¥m khi ngÆ°á»i dÃ¹ng báº¥m
- `Console.ReadKey().KeyChar` : láº¥y chá»¯ mÃ£ ngÆ°á»i dÃ¹ng báº¥m thÃ¬ viáº¿t

Máº·c Ä‘á»‹nh hÃ m `Console.ReadLine()` tráº£ vá» string náº¿u muá»‘n chuá»—i Ä‘Ã³ nháº­p xong chuyá»ƒn thÃ nh cÃ¡c kiá»ƒu dá»¯ liá»‡u khÃ¡c nhÆ° int, float ... thÃ¬ cáº§n cÃ¡c hÃ m chuyá»ƒn kiá»ƒu:

- `Convert.ToInt32(value)` : chuyá»ƒn value thÃ nh kiá»ƒu int
- `Convert.ToDouble(value)` : chuyá»ƒn value thÃ nh kiá»ƒu double
- `Convert.ToBoolean(value)` : chuyá»ƒn value thÃ nh kiá»ƒu bool

## Háº±ng sá»‘ (const), Kiá»ƒu ngáº§m Ä‘á»‹nh (var)

Háº±ng sá»‘ lÆ°u trá»¯ cÃ¡c giÃ¡ trá»‹ mÃ  khÃ´ng thay Ä‘á»•i Ä‘Æ°á»£c ná»¯a, dÃ¹ng tá»« khÃ³a const Ä‘á»ƒ khai bÃ¡o háº±ng sá»‘

```C#
const string MON = "THá»¨ HAI";
```

Biáº¿n var khÃ´ng cáº§n chá»‰ rÃµ ngay kiá»ƒu dá»¯ liá»‡u cá»§a biáº¿n mÃ  kiá»ƒu cá»§a biáº¿n Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh theo kiá»ƒu biá»ƒu thá»©c gÃ¡n vÃ o biáº¿n ngay sau Ä‘Ã³.

_â—Biáº¿n var pháº£i Ä‘Æ°á»£c khá»Ÿi táº¡o ngay khi khai bÃ¡o_

```C#
var a; // lá»—i
var a = 123; // khÃ´ng lá»—i
```

## ToÃ¡n tá»­

ToÃ¡n tá»­ sá»‘ há»c
|KÃ­ tá»±|Ã nghÄ©a|
|---|---|
| `+` | PhÃ©p cá»™ng |
| `-` | PhÃ©p trá»« |
| `*` | PhÃ©p nhÃ¢n |
| `/` | PhÃ©p chia |
| `%` | PhÃ©p chia láº¥y dÆ° (modules) |

_â—Äá»™ Æ°u tiÃªn giá»‘ng vá»›i trong toÃ¡n há»c_

ToÃ¡n tá»­ gÃ¡n
|KÃ­ tá»±|Ã nghÄ©a|
|---|---|
| `=` | ToÃ¡n tá»­ gÃ¡n: GÃ¡n biá»ƒu thá»©c bÃªn pháº£i cá»§a = vÃ o biáº¿n bÃªn trÃ¡i |
| `+=` | ToÃ¡n tá»­ cÃ´ng thÃªm: a += b tÆ°Æ¡ng Ä‘Æ°Æ¡ng a = a + b |
| `-=` | ToÃ¡n tá»­ trá»« bá»›t: a -= b tÆ°Æ¡ng Ä‘Æ°Æ¡ng a = a - b |
| `*=` | ToÃ¡n tá»­ nhÃ¢n vá»›i: a _= b tÆ°Æ¡ng Ä‘Æ°Æ¡ng a = a _ b |
| `/=` | ToÃ¡n tá»­ chia cho: a /= b tÆ°Æ¡ng Ä‘Æ°Æ¡ng a = a / b |
| `%=` | ToÃ¡n tá»­ gÃ¡n module: a %=b tÆ°Æ¡ng Ä‘Æ°Æ¡ng a = a % b |

ToÃ¡n tá»­ tÄƒng giáº£m

- `++` thÃªm vÃ o biáº¿n 1 Ä‘Æ¡n vá»‹
- `--` bá»›t Ä‘i má»™t Ä‘Æ¡n vá»‹

_â—Náº¿u viáº¿t trÆ°á»›c `++x` thÃ¬ toÃ¡n tá»­ `++` thi hÃ nh trÆ°á»›c rá»“i má»›i Ã¡p dá»¥ng vÃ o biá»ƒu thá»©c, náº¿u viáº¿t sau dáº¡ng `x++` thÃ¬ biá»ƒu thá»©c thi hÃ nh xong má»›i Ä‘áº¿n `++` (tÆ°Æ¡ng tá»± vá»›i `--`)_

ToÃ¡n tá»­ so sÃ¡nh
|KÃ­ tá»±|Ã nghÄ©a|
|---|---|
| `==` | So sÃ¡nh báº±ng |
| `>` | So sÃ¡nh lá»›n hÆ¡n |
| `>=` | So sÃ¡nh lá»›n hÆ¡n hoáº·c báº±ng |
| `<` | So sÃ¡nh nhá» hÆ¡n |
| `<=` | So sÃ¡nh nhá» hÆ¡n hoáº·c báº±ng |
| `!=` | So sÃ¡nh khÃ¡c |

ToÃ¡n tá»­ logic
|KÃ­ tá»±|Ã nghÄ©a|
|---|---|
| `&&` | PhÃ©p toÃ¡n VÃ€ - tráº£ vá» true náº¿u cáº£ hai sá»‘ háº¡ng Ä‘á»u true, cÃ²n láº¡i tráº£ vá» false |
| `\|\|` | PhÃ©p toÃ¡n HOáº¶C - tráº£ vá» true náº¿u 1 trong hai sá»‘ háº¡ng lÃ  true, cÃ²n láº¡i tráº£ vá» false |
| `!` | Viáº¿t trÆ°á»›c sá»‘ háº¡ng, giÃ¡ trá»‹ tráº£ vá» true náº¿u sá»‘ háº¡ng lÃ  false vÃ  ngÆ°á»£c láº¡i. |

ToÃ¡n tá»­ Ä‘iá»u kiá»‡n (toÃ¡n tá»­ 3 ngÃ´i) `(Ä‘iá»u khiá»‡n) ? biá»ƒu thá»©c 1 : biá»ƒu thá»©c 2 ;` náº¿u Ä‘iá»u kiá»‡n Ä‘Ãºng thÃ¬ tráº£ vá» biá»ƒu thá»©c 1, ngÆ°á»£c láº¡i tráº£ vá» biá»ƒu thá»©c 2

## Cáº¥u trÃºc ráº» nhÃ¡nh (if else - switch case)

### if else

```C#
if (Ä‘iá»ƒu kiá»‡n) {
    // cÃ¡c cÃ¢u lá»‡nh
}
else if (Ä‘iá»u kiá»‡n) {
    // cÃ¡c cÃ¢u lá»‡nh
}
else {
    // cÃ¡c cÃ¢u lá»‡nh
}
```

_â—Ä‘iá»u kiá»‡n pháº£i lÃ  giÃ¡ trá»‹ boolean_

_â—náº¿u chá»‰ cÃ³ 1 cÃ¢u lá»‡nh thÃ¬ khÃ´ng cáº§n ngoáº·c_

### switch case

```C#
switch (expr)
{
    case expr1:
        //CÃ¡ch lá»‡nh thi hÃ nh náº¿u expr == expr1
        break;

    case expr2:
        //CÃ¡ch lá»‡nh thi hÃ nh náº¿u expr == expr2
        break;

    // ...

    default:
        //..
        break;
}
```

_â—Sá»­ dá»¥ng switch rÃµ rÃ ng, dá»… Ä‘á»c hÆ¡n khi sá»‘ lÆ°á»£ng else if nhiá»u_

## VÃ²ng láº·p (for - foreach - while - do while)

### for

- B1 : khá»Ÿi táº¡o biáº¿n kiá»ƒm tra
- B2 : kiá»ƒm tra Ä‘iá»u kiá»‡n, náº¿u true thÃ¬ thá»±c hiá»‡n khá»‘i lá»‡nh, náº¿u false thÃ¬ thoÃ¡t khá»i vÃ²ng láº·p
- B3 : cáº­p nháº­t láº¡i biáº¿n kiá»ƒm tra vÃ¨ quay láº¡i B2

```C#
for (khá»Ÿi_táº¡o; Ä‘iá»u_kiá»‡n; cáº­p_nháº­t)
{
    //CÃ¡c cÃ¢u lá»‡nh trong khá»‘i
}
```

CÃ³ thá»ƒ viáº¿t thiáº¿u thÃ nh pháº§n váº«n Ä‘Æ°á»£c

```C#
for (; ; ) { }
// Hoáº·c
for (; ; );
```

_â—Thiáº¿u Ä‘iá»u kiá»‡n cÃ³ thá»ƒ dáº«n Ä‘áº¿n vÃ²ng láº·p vÃ´ táº­n_

### foreach

foreach duyá»‡t tuáº§n tá»± qua cÃ¡c pháº§n tá»­ tá»« Ä‘áº§u cho Ä‘áº¿n háº¿t, cung cáº¥p cÃ¡ch thá»©c gá»n hÆ¡n Ä‘á»ƒ duyá»‡t qua cÃ¡c pháº§n tá»­ máº£ng

```C#
foreach (var e in vararry)
{
    // ...
}
```

### while

CÃ¡ch hoáº¡t Ä‘á»™ng: kiá»ƒm tra Ä‘iá»u kiá»‡n, náº¿u true thÃ¬ thá»±c hiá»‡n khá»‘i lá»‡nh, náº¿u false thÃ¬ thoÃ¡t vÃ²ng láº·p

Biáº¿n kiá»ƒm tra Ä‘Æ°á»£c khá»Ÿi táº¡o trÆ°á»›c Ä‘Ã³ vÃ  cáº­p nháº­t trong khá»‘i lá»‡nh cá»§a vÃ²ng láº·p

```C#
while (Ä‘iá»u_kiá»‡n)
{
    //Láº·p náº¿u Ä‘iá»u_kiá»‡n báº±ng true
}
```

### do while

CÃ¡ch hoáº¡t Ä‘á»™ng: thá»±c hiá»‡n khá»‘i lá»‡nh 1 láº§n rá»“i má»›i báº¯t Ä‘áº§u kiá»ƒm tra nhÆ° cá»§a vÃ²ng láº·p while

```C#
do
{
    //Khá»‘i lá»‡nh
}
while (Ä‘iá»u_kiá»‡n);
```

_â—VÃ²ng láº·p do ... while khá»‘i lá»‡nh láº·p bao giá» cÅ©ng Ä‘Æ°á»£c thá»±c hiá»‡n Ã­t nháº¥t má»™t láº§n._

### break

Trong vÃ²ng láº·p, náº¿u gáº·p `break` vÃ²ng láº·p sáº½ thoÃ¡t ngay láº­p tá»©c vÃ  chuyá»ƒn Ä‘áº¿n cÃ¡c cÃ¢u lá»‡nh sau vÃ²ng láº·p.

### continue

Trong vÃ²ng láº·p, náº¿u gáº·p `continue` thÃ¬ tÆ°Æ¡ng Ä‘Æ°Æ¡ng viá»‡c Ä‘áº¿n cuá»‘i khá»‘i lá»‡nh cá»§a láº§n láº·p Ä‘Ã³ (báº¯t Ä‘áº§u thá»±c hiá»‡n láº§n láº·p má»›i ngay).

## Máº£ng (Array)

### Khai bÃ¡o

```C#
// kiá»ƒu dá»¯ liá»‡u[] tÃªn biáº¿n;
int[] a;
```

### Khá»Ÿi táº¡o

```C#
// tÃªn biáº¿n = new kiá»ƒu dá»¯ liá»‡u[sá»‘ lÆ°á»£ng pháº§n tá»­];
a = new int[5];

// tÃªn biáº¿n = new kiá»ƒu dá»¯ liá»‡u[sá»‘ lÆ°á»£ng pháº§n tá»­] {danh sÃ¡ch cÃ¡c dá»¯ liá»‡u};
double[] productPrices = new double[3] {100, 200.5, 10.1};

// hoáº·c khÃ´ng cáº§n chá»‰ rÃµ sá»‘ lÆ°á»£ng pháº§n tá»­ khi khá»Ÿi táº¡o vá»›i danh sÃ¡ch dá»¯ liá»‡u
double[] productPrices = new double[] {100, 200.5, 10.1};

// tháº­m chÃ­ cÃ³ thá»ƒ bá» bá»›t chá»‰ cáº§n danh sÃ¡ch dá»¯ liá»‡u lÃ  Ä‘Æ°á»£c
double[] productPrices = {100, 200.5, 10.1};
```

### Truy cáº­p pháº§n tá»­ trong máº£ng

tÃªn biáº¿n[chá»‰ sá»‘ cá»§a pháº§n tá»­ muá»‘n truy cáº­p] `a[0]` hoáº·c `a[1]`, ....

_â—chá»‰ sá»‘ pháº§n tá»­ máº£ng báº¯t Ä‘áº§u tá»« 0_

### Thuá»™c tÃ­nh vÃ  phÆ°Æ¡ng thá»©c

Trong thÆ° viá»‡n System.Array

| Thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c | Ã nghÄ©a                                         |
| ----------------------- | ----------------------------------------------- |
| Length                  | Thuá»™c tÃ­nh cho biáº¿t sá»‘ lÆ°á»£ng pháº§n tá»­ trong máº£ng |
| Rank                    | Thuá»™c tÃ­nh cho biáº¿t sá»‘ chiá»u máº£ng               |
| Clone()                 | Copy (nhÃ¢n báº£n) Ä‘á»‘i tÆ°á»£ng máº£ng                  |
| GetValue(index)         | Láº¥y giÃ¡ trá»‹ pháº§n tá»­ trong máº£ng                  |
| Min()                   | Tráº£ vá» giÃ¡ trá»‹ nhá» nháº¥t trong máº£ng              |
| Max()                   | Tráº£ vá» giÃ¡ trá»‹ lá»›n nháº¥t trong máº£ng              |
| Sum()                   | Tráº£ vá» giÃ¡ trá»‹ tá»•ng cá»™ng cÃ¡c pháº§n tá»­            |

Trong thÆ° viá»‡n System.Linq

| PhÆ°Æ¡ng thá»©c                                   | Ã nghÄ©a                                                                 |
| --------------------------------------------- | ----------------------------------------------------------------------- |
| Array.BinarySearch(array, value)              | TÃ¬m kiáº¿m pháº§n tá»­ trong máº£ng Ä‘Ã£ Ä‘Æ°á»£c sáº¯p xáº¿p, tráº£ vá» chá»‰ sá»‘ náº¿u tÃ¬m tháº¥y |
| CopyTo(array, indexStart)                     | Sao chÃ©p pháº§n tá»­ máº£ng nÃ y sang máº£ng khÃ¡c                                |
| Array.Clear(array, index, length)             | Thiáº¿t láº­p pháº§n tá»­ máº£ng nháº­n giÃ¡ trá»‹ máº·c Ä‘á»‹nh                            |
| bool Exists<T> (array, Predicate<T> match);   | Kiá»ƒm tra cÃ³ pháº§n tá»­ trong máº£ng thá»a mÃ£n match                           |
| Fill<T> (array, value);                       | GÃ¡n cÃ¡c pháº§n tá»­ cá»§a máº£ng báº±ng value                                     |
| T Find<T> (array, Predicate<T> match);        | TÃ¬m pháº§n tá»­ máº£ng                                                        |
| int FindIndex<T> (array, Predicate<T> match); | TÃ¬m pháº§n tá»­ máº£ng, tráº£ vá» chá»‰ sá»‘ náº¿u tháº¥y                                |
| T[] FindAll<T> (array, Predicate<T> match);   | TÃ¬m táº¥t cáº£ pháº§n tá»­ máº£ng                                                 |
| int IndexOf(array, value)                     | TÃ¬m chá»‰ sá»‘ cá»§a pháº§n tá»­                                                  |
| ForEach(array, Action<T> action)              | Thi hÃ nh action trÃªn má»—i pháº§n tá»­                                        |
| Sort(array)                                   | Sáº¯p xáº¿p                                                                 |

### Máº£ng nhiá»u chiá»u

khai bÃ¡o

```C#
// type[, , â€¦ ,] varname = new type[size1, size2, â€¦, sizeN];
int[,] myvar = new int[3, 4];
```

truy cáº­p

```C#
myvar[0, 0] = 1;    // hÃ ng 1, cá»™t 1
myvar[2, 3] = 3;    // hÃ ng 3, cá»™t 4
```

### Máº£ng trong máº£ng

khai bÃ¡o dÃ¹ng thÃªm [] Ä‘á»ƒ cho biáº¿t cÃ¡c pháº§n tá»­ trong máº£ng lÃ  nhá»¯ng máº£ng khÃ¡c

```C#
int[][] myArray = new int[][] {
new int[] {1,2},
new int[] {2,5,6},
new int[] {2,3},
new int[] {2,3,4,5,5}
};
```

## Chuá»—i kÃ½ tá»± (string)

Chuá»—i lÃ  má»™t táº­p há»£p cÃ¡c kÃ½ tá»± sáº¯p xáº¿p cÃ³ vá»‹ trÃ­, nÃ³ chá»‰nh lÃ  má»™t máº£ng cÃ¡c kÃ½ tá»±, kiá»ƒu dá»¯ liá»‡u chuá»—i Ä‘Ã³ lÃ  `string`, lá»›p biá»ƒu diá»…n cÃ¡c chuá»—i lÃ  `System.String`

### khai bÃ¡o, truy cáº­p

```C#
string sExample = "Xin chÃ o"; // Khai bÃ¡o vÃ  khá»Ÿi táº¡o chuá»—i
sExample += " cÃ¡c báº¡n"; // Ná»‘i chuá»—i +=, tráº£ vá» "Xin chÃ o cÃ¡c báº¡n"
sExample = sExample + "!"; // Ná»‘i chuá»—i +, tráº£ vá» "Xin chÃ o cÃ¡c báº¡n!"
```

Chuá»—i nhÆ° lÃ  máº£ng mÃ  pháº§n tá»­ máº£ng lÃ  cÃ¡c kÃ½ tá»±, nÃªn cÃ³ thá»ƒ truy cáº­p pháº§n tá»­ máº£ng báº±ng indexer Ä‘á»ƒ Ä‘á»c kÃ½ tá»±:

```C#
char c = sExample[1]; // c= 'i'
```

### Chuá»—i nguyÃªn báº£n (kÃ½ hiá»‡u `@`)

Khi viáº¿t chuá»—i trong cáº·p dáº¥u nhÃ¡y kÃ©p `""`, thÃ¬ cÃ¡c kÃ½ tá»± Ä‘áº·t biá»‡t Ä‘Æ°á»£c xá»­ lÃ½ vá»›i kÃ½ hiá»‡u `\`

```C#
string s = "C:\\Abc\\xyz";
// Náº¿u viáº¿t string s = "C:\Abc\xyz"; sáº½ lá»—i
```

Náº¿u muá»‘n viáº¿t chuá»—i cá»‘ Ä‘á»‹nh, ná»™i dung nguyÃªn báº£n - cho biáº¿t sáº½ khÃ´ng dÃ¹ng `\` Ä‘á»ƒ xá»­ lÃ½ kÃ½ tá»± Ä‘áº·c biá»‡t, thÃ¬ thÃªm `@` vÃ o Ä‘áº§u chuá»—i

```C#
string s = @"KÃ½ tá»± \ Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ chÃ¨n kÃ½ tá»± Ä‘áº·c biá»‡t nhÆ° \n, \r";
```

CÃ³ thá»ƒ viáº¿t chuá»—i trÃªn nhiá»u dÃ²ng vá»›i kÃ½ hiá»‡u `@`

```C#
string s = @"Xin chÃ o cÃ¡c báº¡n
TÃ´i Ä‘ang há»c C#";
```

_â—ngoáº¡i trá»« hai kÃ½ tá»± `""` chuyá»ƒn thÃ nh má»™t kÃ½ tá»± `""`_

```C#
string s = "Anh áº¥y nÃ³i, ""ÄÃ¢y lÃ  C#"""; //~ Anh áº¥y nÃ³i "ÄÃ¢y lÃ  C#"
```

### ChÃ¨n thÃªm biá»ƒu thá»©c vÃ o chuá»—i (kÃ½ hiá»‡u `$`)

Khi viáº¿t chuá»—i cÃ³ kÃ½ tá»± $ phÃ­a trÆ°á»›c, thÃ¬ trong chuá»—i Ä‘Ã³ cÃ³ thá»ƒ chÃ¨n cÃ¡c biá»ƒu thá»©c vÃ o chá»— cÃ³ cáº·p {} : {biá»ƒu-thá»©c}

```C#
int a = 10;
int b = 2;
string s = $"Káº¿t quáº£ {a}/{b} lÃ  {a / b}"; // "Káº¿t quáº£ 10/2 lÃ  5"
```

NgoÃ i ra cÃ³ thá»ƒ cÄƒn lá», Ä‘á»‹nh dáº¡ng sá»‘, ngÃ y thÃ¡ng ... tÆ°Æ¡ng tá»± nhÆ° chuá»—i Ä‘á»‹nh dáº¡ng

```C#
Console.WriteLine($"{"VÃ²ngLáº·p",10} {"Cháºµn/Láº»",-5}");
for (int i = 8; i < 15; i++)
{
    string chanle = (i % 2 == 0) ? "Cháºµn" : "Láº»";
    Console.WriteLine($"{i,10} {chanle,-5}");
}
```

_â—sá»‘ dÆ°Æ¡ng lÃ  cÄƒn lá» pháº£i, sá»‘ Ã¢m lÃ  cÄƒn lá» trÃ¡i_

### CÃ¡c phÆ°Æ¡ng thá»©c cho chuá»—i

| PhÆ°Æ¡ng thá»©c | Ã nghÄ©a                                                                                                                                                       |
| ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Concat      | PhÆ°Æ¡ng thá»©c tÄ©nh, ná»‘i cÃ¡c chuá»—i liá»‡t kÃª á»Ÿ tham sá»‘ láº¡i vá»›i nhau                                                                                                |
| Format      | Convert cÃ¡c Ä‘á»‘i tÆ°á»£ng thÃ nh chuá»—i vÃ  chÃ¨n chÃºng vÃ o chuá»—i Ä‘á»‹nh dáº¡ng Ä‘Æ°á»£c chá»‰ ra, cÃº phÃ¡p cÆ¡ báº£n String.Format(stringFormat, arg0, arg1 ...)                   |
|             | Trong Ä‘Ã³ stringFormat lÃ  chuá»—i Ä‘á»‹nh dáº¡ng, chá»©a máº«u vÃ  vÃ  vá»‹ trÃ­ mÃ  arg0, arg1 ... sáº½ chÃ¨n vÃ o.                                                                |
|             | string s = String.Format("ChÃ o {0}, {0} Æ¡i, hÃ´m nay ngÃ y {1} rá»“i!", "Nam", DateTime.Now.Day);                                                                 |
| IndexOf     | TÃ¬m vá»‹ trÃ­ (Ä‘áº§u tiÃªn) cá»§a kÃ½ tá»± hoáº·c chuá»—i kÃ½ tá»± trong chuá»—i                                                                                                  |
| LastIndexOf | TÃ¬m vá»‹ trÃ­ (cuá»‘i) cá»§a kÃ½ tá»± hoáº·c chuá»—i kÃ½ tá»± trong chuá»—i                                                                                                      |
| Insert      | Táº¡o chuá»—i báº±ng cÃ¡ch chÃ¨n chuá»—i nÃ y vÃ o trong chuá»—i khÃ¡c, vá»‹ trÃ­ chÃ¨n cáº§n chá»‰ ra                                                                               |
| PadLeft     | Táº¡o chuá»—i má»›i tá»« chuá»—i cÅ©, Ä‘á»™ dÃ i chuá»—i má»›i chá»‰ ra - náº¿u Ä‘á»™ dÃ i chuá»—i má»›i lá»›n hÆ¡n chuá»—i cÅ© thÃ¬ cÃ¡c kÃ½ tá»± phÃ­a Ä‘áº§u Ä‘Æ°á»£c chÃ¨n khoáº£ng tráº¯ng hoáº·c kÃ½ tá»± chá»‰ Ä‘á»‹nh. |
| PadRight    | TÆ°Æ¡ng tá»± PadLeft nhÆ°ng chÃ¨n khoáº£ng tráº¯ng bÃªn pháº£i                                                                                                             |
| Replace     | TÃ¬m vÃ  thay tháº¿ trong chuá»—i                                                                                                                                   |
| Split       | Tráº£ vá» máº£ng cÃ¡c chuá»—i con Ä‘Æ°á»£c chia tá»« chuá»—i gá»‘c bá»Ÿi kÃ½ tá»± chia chá»‰ Ä‘á»‹nh, chuá»—i chia chá»‰ Ä‘á»‹nh                                                                 |
| ToLower     | Sinh chuá»—i má»›i báº±ng cÃ¡ch chuyá»ƒn cÃ¡c kÃ½ tá»± thÃ nh chá»¯ thÆ°á»ng                                                                                                    |
| ToUpper     | Sinh chuá»—i má»›i báº±ng cÃ¡ch chuyá»ƒn cÃ¡c kÃ½ tá»± thÃ nh chá»¯ in                                                                                                        |
| Trim        | Sinh chuá»—i má»›i báº±ng cÃ¡ch loáº¡i bá» khoáº£ng tráº¯ng (hoáº·c chá»‰ Ä‘á»‹nh) á»Ÿ Ä‘áº§u vÃ  cuá»‘i                                                                                   |
| Substring   | Láº¥y ra chuá»—i con tá»« chuá»—i chÃ­nh - chuá»—i con láº¥y tá»« vá»‹ trÃ­ chá»‰ ra Ä‘áº¿n cuá»‘i hoáº·c theo Ä‘á»™ dÃ i                                                                    |

### StringBuilder

Äá»ƒ thi hÃ nh tá»‘i Æ°u hÆ¡n vá» tá»‘c Ä‘á»™, vá» sá»­ dá»¥ng bá»™ nhá»› cÃ³ thá»ƒ dÃ¹ng tá»›i Ä‘á»‘i tÆ°á»£ng `StringBuilder` á»Ÿ namespace `System.Text`

Äá»‘i vá»›i `string` má»—i khi thá»±c hiá»‡n 1 thao tÃ¡c chÆ°Æ¡ng trÃ¬nh sáº½ thá»±c hiá»‡n cáº¥p phÃ¡t bá»™ nhá»› vÃ  táº¡o ra 1 Ä‘á»‘i tÆ°á»£ng má»›i

PhÆ°Æ¡ng thá»©c cho `StringBuilder`

| PhÆ°Æ¡ng thá»©c  | Ã nghÄ©a                                                |
| ------------ | ------------------------------------------------------ |
| Append       | Ná»‘i má»™t Ä‘á»‘i tÆ°á»£ng (chuá»—i, sá»‘ ...) vÃ o StringBuilder    |
| AppendFormat | Ná»‘i vÃ o má»™t chuá»—i sinh ra theo StringFormat            |
| Insert       | ChÃ¨n vÃ o StringBuilder má»™t chuá»—i á»Ÿ vá»‹ trÃ­ chá»‰ ra       |
| Remove       | Loáº¡i bá» má»™t lÆ°á»£ng kÃ½ tá»±, báº¯t Ä‘áº§u tá»« vá»‹ trÃ­ do chá»‰ Ä‘á»‹nh |
| Replace      | TÃ¬m vÃ  thay tháº¿                                        |
| ToString     | Tráº£ vá» chuá»—i (String)                                  |

## Type casting (Ã©p kiá»ƒu)

### Explicit Casting (Ã©p kiá»ƒu tÆ°á»ng minh)

ÄÆ°á»£c sá»­ dá»¥ng khi báº¡n biáº¿t ráº±ng kiá»ƒu báº¡n Ä‘ang Ã©p kiá»ƒu lÃ  tÆ°Æ¡ng thÃ­ch. Náº¿u Ã©p kiá»ƒu khÃ´ng thÃ nh cÃ´ng, má»™t ngoáº¡i lá»‡ sáº½ Ä‘Æ°á»£c nÃ©m ra.

```C#
double d = 123.45;
int i = (int)d; // i = 123
```

### Implicit Casting (Ã©p kiá»ƒu ngáº§m Ä‘á»‹nh)

ÄÆ°á»£c sá»­ dá»¥ng khi khÃ´ng cÃ³ nguy cÆ¡ máº¥t dá»¯ liá»‡u. Chá»‰ cÃ³ thá»ƒ sá»­ dá»¥ng vá»›i cÃ¡c kiá»ƒu tÆ°Æ¡ng thÃ­ch.

```C#
int i = 123;
double d = i; // d = 123.0
```

### as

Sá»­ dá»¥ng Ä‘á»ƒ Ã©p kiá»ƒu Ä‘á»‘i tÆ°á»£ng sang má»™t kiá»ƒu tham chiáº¿u hoáº·c kiá»ƒu nullable. Náº¿u Ã©p kiá»ƒu khÃ´ng thÃ nh cÃ´ng, biáº¿n sáº½ nháº­n giÃ¡ trá»‹ null thay vÃ¬ nÃ©m ra ngoáº¡i lá»‡.

```C#
object obj = "This is a string";
string str = obj as string;
```

### is

Kiá»ƒm tra xem Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ Ä‘Æ°á»£c Ã©p kiá»ƒu sang kiá»ƒu Ä‘Ã­ch hay khÃ´ng. Tá»« C# 7.0 trá»Ÿ lÃªn, báº¡n cÃ³ thá»ƒ Ã©p kiá»ƒu vÃ  khai bÃ¡o biáº¿n cÃ¹ng lÃºc

```C#
object obj = "This is a string";
if (obj is string str)
{
    Console.WriteLine("The string is: " + str);
}
else
{
    Console.WriteLine("The object is not a string.");
}
```

### convert

DÃ¹ng cÃ¡c phÆ°Æ¡ng thá»©c trong lá»›p Convert Ä‘á»ƒ chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c kiá»ƒu cÆ¡ báº£n

```C#
string str = "123";
int i = Convert.ToInt32(str); // i = 123

string strDouble = "123.45";
double d = Convert.ToDouble(strDouble); // d = 123.45
```

### Custom Casting (Ã©p kiá»ƒu tÃ¹y chá»‰nh)

CÃ³ thá»ƒ táº¡o cÃ¡c phÆ°Æ¡ng thá»©c Ã©p kiá»ƒu tÃ¹y chá»‰nh trong cÃ¡c lá»›p cá»§a mÃ¬nh báº±ng cÃ¡ch sá»­ dá»¥ng cÃ¡c toÃ¡n tá»­ `implicit` vÃ  `explicit`.

```C#
public class Fahrenheit
{
    public double Degrees { get; set; }

    public static explicit operator Celsius(Fahrenheit f)
    {
        return new Celsius { Degrees = (f.Degrees - 32) * 5 / 9 };
    }

}

public class Celsius
{
    public double Degrees { get; set; }

    public static implicit operator Fahrenheit(Celsius c)
    {
        return new Fahrenheit { Degrees = (c.Degrees * 9 / 5) + 32 };
    }

}
```

Sá»­ dá»¥ng cÃ¡c phÆ°Æ¡ng thá»©c Ã©p kiá»ƒu tÃ¹y chá»‰nh

```C#
Fahrenheit f = new Fahrenheit { Degrees = 98.6 };
Celsius c = (Celsius)f; // Explicit cast
Fahrenheit f2 = c; // Implicit cast
```

### Parse - TryParse

CÃ¡c phÆ°Æ¡ng thá»©c Parse vÃ  TryParse Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ chuyá»ƒn Ä‘á»•i chuá»—i sang cÃ¡c kiá»ƒu sá»‘ vÃ  kiá»ƒu khÃ¡c

```C#
string str = "123";
int i = int.Parse(str); // i = 123

string strDouble = "123.45";
if (double.TryParse(strDouble, out double d))
{
    Console.WriteLine("The double is: " + d); // d = 123.45
}
else
{
    Console.WriteLine("The string could not be parsed.");
}
```

## PhÆ°Æ¡ng thá»©c (funtion)

### Cáº¥u trÃºc

```C#
<Access Modifiers> <return type> <name_method> (<parameters>) {
    // CÃ¡c cÃ¢u lá»‡nh trong phÆ°Æ¡ng thá»©c
}
```

### Access Modifiers

- Cho biáº¿t cáº¥p Ä‘á»™ Ä‘Æ°á»£c phÃ©p truy cáº­p Ä‘áº¿n hÃ m nÃ y
- CÃ³ cÃ¡c má»©c Ä‘á»™ nhÆ° public, private, protect, internal ...
- Máº·c Ä‘á»‹nh lÃ  internal náº¿u khÃ´ng chá»‰ rÃµ pháº¡m vi

### return type

- kiá»ƒu tráº£ vá» cá»§a hÃ m : int, double, string, ...
- náº¿u hÃ m chá»‰ thá»±c hiá»‡n mÃ  khÃ´ng tráº£ vá» 1 giÃ¡ trá»‹ thÃ¬ Ä‘á»ƒ void

### name_method

tÃªn cá»§a phÆ°Æ¡ng thá»©c do báº¡n Ä‘áº·t.

> Quy táº¯c Ä‘áº·t tÃªn

### parameters (tham sá»‘)

`parameters` lÃ  cÃ¡c tham sá»‘ cá»§a hÃ m náº¿u cÃ³, cÃ¡c tham sá»‘ khai bÃ¡o theo máº«u kiá»ƒu tÃªn nhÆ° int thamso1, nhiá»u tham sá»‘ thÃ¬ cÃ¡ch nhau bá»Ÿi dáº¥u `,`

CÃ³ thá»ƒ Ä‘áº·t giÃ¡ trá»‹ máº·c Ä‘á»‹nh ban Ä‘áº§u cho tham sá»‘ báº±ng toÃ¡n tá»­ gÃ¡n, lÃºc khá»Ÿi táº¡o hÃ m. LÃºc gá»i hÃ m nhá»¯ng tham sá»‘ khÃ´ng Ä‘Æ°á»£c truyá»n vÃ o thÃ¬ sáº½ sá»­ dá»¥ng giÃ¡ trá»‹ máº·c Ä‘á»‹nh

CÃ³ thá»ƒ chá»‰ Ä‘á»‹nh rÃµ thÃ m sá»‘ muá»‘n truyá»n lÃ  gÃ¬ mÃ  khÃ´ng cáº§n theo thá»© tá»± báº±ng cÃ¡ch tÃªn tham sá»‘: giÃ¡ trá»‹ muá»‘n truyá»n vÃ o

loáº¡i tham sá»‘

- **Tham trá»‹** lÃ  cÃ¡ch thá»©c máº·c Ä‘á»‹nh, ta Ä‘Ã£ sá»­ dá»¥ng á»Ÿ pháº§n trÃªn. CÃ³ nghÄ©a lÃ  gÃ¡n tham sá»‘ báº±ng má»™t biáº¿n, thÃ¬ giÃ¡ trá»‹ cá»§a biáº¿n Ä‘Æ°á»£c copy vÃ  sá»­ dá»¥ng trong phÆ°Æ¡ng thá»©c nhÆ° biáº¿n cá»¥c bá»™, cÃ²n báº£n thÃ¢n biáº¿n bÃªn ngoÃ i khÃ´ng há» áº£nh hÆ°á»Ÿng. Nhá»¯ng kiá»ƒu dá»¯ liá»‡u lÃ  tham trá»‹:

  - CÃ¡c kiá»ƒu sá»‘ nguyÃªn nhÆ° int, byte, long ...
  - CÃ¡c kiá»ƒu sá»‘ thá»±c nhÆ° float, double, decimal
  - Kiá»ƒu bool, kiá»ƒu char
  - Kiá»ƒu cáº¥u trÃºc struct
  - Kiá»ƒu liá»‡t kÃª enum
  - Kiá»ƒu Tuple

- **Tham chiáº¿u** thÃ¬ báº£n thÃ¢n biáº¿n á»Ÿ tham sá»‘ sáº½ Ä‘Æ°á»£c hÃ m sá»­ dá»¥ng trá»±c tiáº¿p (tham chiáº¿u) chá»© khÃ´ng táº¡o ra má»™t biáº¿n cá»¥c bá»™ trong hÃ m, nÃªn nÃ³ cÃ³ tÃ¡c Ä‘á»™ng trá»±c tiáº¿p Ä‘áº¿n biáº¿n nÃ y bÃªn ngoÃ i. Äá»ƒ sá»­ dá»¥ng Ä‘Æ°á»£c tham chiáº¿u thÃ¬ khai bÃ¡o tham sá»‘ á»Ÿ phÆ°Æ¡ng thá»©c, cÅ©ng nhÆ° khi gá»i cáº§n cho thÃªm tá»« khÃ³a `ref`. Nhá»¯ng kiá»ƒu dá»¯ liá»‡u lÃ  tham chiáº¿u:
  - Biáº¿n kiá»ƒu lá»›p (class), cÃ¡c lá»›p thÆ° viá»‡n hoáº·c lá»›p do báº¡n Ä‘á»‹nh nghÄ©a
  - Biáº¿n kiá»ƒu delegate
  - Biáº¿n kiá»ƒu interface, cÃ¡c giao diá»‡n tá»« thÆ° viá»‡n hoáº·c tá»± Ä‘á»‹nh nghÄ©a
  - Biáº¿n kiá»ƒu dynamic
  - Biáº¿n kiá»ƒu object
  - Biáº¿n kiá»ƒu string

_â—Tham sá»‘ lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng lá»›p, máº·c Ä‘á»‹nh lÃ  tham chiáº¿u._

_â—Khai bÃ¡o `ref` á»Ÿ tham sá»‘ phÆ°Æ¡ng thá»©c, báº¯t buá»™c khi gá»i pháº£i sá»­ dá»¥ng biáº¿n lÃ m tham sá»‘ chá»© khÃ´ng Ä‘Æ°á»£c dÃ¹ng giÃ¡ trá»‹._

- **Tham chiáº¿u `out`**, thay vÃ¬ dÃ¹ng `ref` Ä‘á»ƒ táº¡o tham chiáº¿u ta cÅ©ng cÃ³ thá»ƒ dÃ¹ng `out`. Ä‘iá»ƒm khÃ¡c biá»‡t lÃ  tham chiáº¿u `out` khÃ´ng cáº§n khá»Ÿi táº¡o trÆ°á»›c (khÃ´ng cÃ³ giÃ¡ trá»‹ lÃºc truyá»n vÃ o)

```C#
public static void OutExample(out int x)
{
    x = 100;
}
public static void Main(string[] agv)
{
    int a; // biáº¿n a chÆ°a khá»Ÿi táº¡o
    OutExample(out a); // Giá» a = 100;
}
```

### Luá»“ng cháº¡y

ChÆ°Æ¡ng trÃ¬nh sáº½ cháº¡y Ä‘oáº¡n code trong hÃ m Ä‘Æ°á»£c gá»i tÃªn tá»« Ä‘áº§u Ä‘áº¿n cuá»‘i hoáº·c dá»«ng láº¡i vÃ  thoÃ¡t ra khi gáº·p lá»‡nh `return`

â—khi gá»i Ä‘áº¿n hÃ m Ä‘á»ƒ sá»­ dá»¥ng cáº§n chá»‰ rÃµ `namespace.class.method`, náº¿u sá»­ dá»¥ng using namespace Ä‘Ã³ thÃ¬ cÃ³ thá»ƒ bá» namespace, náº¿u náº±m trong cÃ¹ng class thÃ¬ cÃ³ thá»ƒ bá» class vÃ  chá»‰ cáº§n ghi tÃªn phÆ°Æ¡ng thá»©c vÃ  tham sá»‘ cáº§n cÃ³

â—Khi biá»ƒu thá»©c chá»‰ thá»±c hiá»‡n 1 cÃ¢u lá»‡nh hay tráº£ vá» 1 biá»ƒu thá»©c thÃ¬ cÃ³ thá»ƒ rÃºt gá»n báº±ng kÃ½ hiá»‡u `=>`

```C#
public void Print() => Console.writeline("xin chao");
public int Tong(int a, int b) => a + b;
```

## Lá»›p (class)

lá»›p (class) lÃ  má»™t kiá»ƒu dá»¯ liá»‡u tham chiáº¿u nÃ³ Ä‘á»‹nh nghÄ©a má»™t táº­p há»£p cÃ¡c biáº¿n (trÆ°á»ng dá»¯ liá»‡u, thuá»™c tÃ­nh) vÃ  phÆ°Æ¡ng thá»©c (gá»i chÃºng lÃ  cÃ¡c member - thÃ nh viÃªn lá»›p).

Tá»« lá»›p Ä‘Ã³ sinh ra cÃ¡c Ä‘á»‘i tÆ°á»£ng (object), cÃ¡c Ä‘á»‘i tÆ°á»£ng nÃ y cÃ²n gá»i lÃ  báº£n triá»ƒn khai cá»§a lá»›p (instance of a class)

### cÃº phÃ¡p

```C#
<Access Modifiers> class Class_Name {
    // khai bÃ¡o cÃ¡c thÃ nh viÃªn dá»¯ liá»‡u (thuá»™c tÃ­nh, biáº¿n trÆ°á»ng dá»¯ liá»‡u)
    // khai bÃ¡o cÃ¡c thÃ nh viÃªn hÃ m (phÆ°Æ¡ng thá»©c)
}
```

### Access modifiers

Ã¡p dá»¥ng khai bÃ¡o cho lá»›p:

- public (khÃ´ng giá»›i háº¡n truy cáº­p)
- internal (giá»›i háº¡n truy cáº­p trong cÃ¹ng assembly - chÆ°Æ¡ng trÃ¬nh)
- private (chá»‰ truy cáº­p Ä‘Æ°á»£c tá»« lá»›p chá»©a nÃ³) Náº¿u lá»›p con khai bÃ¡o lá»“ng trong má»™t lá»›p khÃ¡c

_â—máº·c Ä‘á»‹nh lÃ  internal náº¿u khÃ´ng khai bÃ¡o_

Ã¡p dá»¥ng khai bÃ¡o vÃ  khá»Ÿi táº¡o thÃ nh viÃªn dá»¯ liá»‡u (biáº¿n, trÆ°á»ng dá»¯ liáº¿u):

- public : khÃ´ng giá»›i háº¡n pháº¡m vi truy cáº­p
- protected : chá»‰ truy cáº­p trong ná»™i bá»™ lá»›p hay cÃ¡c lá»›p káº¿ thá»«a
- private : (máº·c Ä‘á»‹nh) chá»‰ truy cáº­p Ä‘Æ°á»£c tá»« cÃ¡c thÃ nh viÃªn cá»§a lá»›p chá»©a nÃ³
- internal : chá»‰ truy cáº­p Ä‘Æ°á»£c trong cÃ¹ng assembly (dll, exe)
- protected internal: truy cáº­p Ä‘Æ°á»£c khi cÃ¹ng assembly hoáº·c lá»›p káº¿ thá»«a
- private protected: truy cáº­p tá»« lá»›p chá»©a nÃ³, lá»›p káº¿ thá»«a nhÆ°ng pháº£i cÃ¹ng assembly

**_Äá»c thÃªm má»¥c assembly_**

### Khai bÃ¡o vÃ  khá»Ÿi táº¡o

```C#
var ob1 = new ClassName();
// hoáº·c
ClassName ob2;
ob2 = new ClassName();
```

### toÃ¡n tá»­ `.`

cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c táº¡o tá»« lá»›p cÃ³ thá»ƒ truy cáº­p cÃ¡c thÃ nh pháº§n trong class thÃ´ng qua toÃ¡n tá»­ .

### con trá» this

Tá»« khÃ³a this dÃ¹ng trong cÃ¡c phÆ°Æ¡ng thá»©c cá»§a lá»›p, nÃ³ tham chiáº¿u Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng hiá»‡n táº¡i sinh ra tá»« lá»›p.

Sá»­ dá»¥ng this Ä‘á»ƒ tÆ°á»ng minh, trÃ¡nh sá»± khÃ´ng rÃµ rÃ ng khi truy cáº­p thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c hoáº·c Ä‘á»ƒ láº¥y Ä‘á»‘i tÆ°á»£ng lá»›p lÃ m tham sá»‘ cho cÃ¡c thÃ nh pháº§n khÃ¡c ...

### ThÃ nh viÃªn tÄ©nh (static)

CÃ¡c thÃ nh viÃªn trong lá»›p (phÆ°Æ¡ng thá»©c, biáº¿n, thuá»™c tÄ©nh) khi khai bÃ¡o cÃ³ tá»« khÃ³a static á»Ÿ Ä‘áº§u thÃ¬ nÃ³ lÃ  thÃ nh viÃªn tÄ©nh.

ThÃ nh viÃªn tÄ©nh thÃ¬ nÃ³ khÃ´ng thuá»™c vá» Ä‘á»‘i tÆ°á»£ng cá»¥ thá»ƒ nÃ o, cÃ³ thá»ƒ sá»­ dÃ¹ng mÃ  khÃ´ng cáº§n táº¡o Ä‘á»‘i tÆ°á»£ng. Truy cáº­p Ä‘áº¿n thÃ nh viá»…n tÄ©nh thÃ´ng qua TÃŠN-Lá»šP.tÃªn-thÃ nh-viÃªn-tÄ©nh.

_â—Do khÃ´ng thuá»™c vá» Ä‘á»‘i tÆ°á»£ng nÃªn khÃ´ng thá»ƒ dÃ¹ng con trá» this Ä‘á»ƒ gá»i nÃ³_

Äá»‘i vá»›i biáº¿n tÄ©nh thÃ¬ dÃ¹ng cho cho má»i Ä‘á»‘i tÆ°á»£ng thuá»™c lá»›p, Ä‘Æ°á»£c khá»Ÿi táº¡o má»™t láº§n duy nháº¥t. Náº¿u muá»‘n khá»Ÿi táº¡o thÃ nh viÃªn tÄ©nh cá»§a lá»›p khi láº§n Ä‘áº§u truy cáº­p cÃ³ thá»ƒ dÃ¹ng phÆ°Æ¡ng
thá»©c khá»Ÿi táº¡o tÄ©nh

### ThÃ nh viÃªn chá»‰ Ä‘á»c (readonly)

Biáº¿n readonly cÃ³ nghÄ©a lÃ  chá»‰ Ä‘á»c, khÃ´ng sá»­a Ä‘á»•i Ä‘Æ°á»£c ná»¯a. Tuy nhiÃªn so vá»›i háº±ng sá»‘ const thÃ¬ cÃ³ máº¥y Ä‘iá»ƒm khÃ¡c:

- Háº±ng sá»‘ thÃ¬ pháº£i khá»Ÿi táº¡o ngay giÃ¡ trá»‹ cho nÃ³ khi khá»Ÿi táº¡o, biáº¿n readonly thÃ¬ khÃ´ng khá»Ÿi táº¡o ngay cÅ©ng Ä‘Æ°á»£c
- Biáº¿n readonly cÃ³ thá»ƒ gÃ¡n giÃ¡ trá»‹ cho nÃ³ trong hÃ m khá»Ÿi táº¡o (vÃ  giÃ¡ trá»‹ gÃ¡n theo káº¿t quáº£ cá»§a má»™t biá»ƒu thá»©c nÃ o Ä‘Ã³)

```C#
class Student
{
    // khai bÃ¡o biáº¿n readonly
    public readonly string name;
    public Student(string name)
    {
        // khá»Ÿi táº¡o biáº¿n readonly á»Ÿ hÃ m táº¡o (báº¯t buá»™c náº¿u biáº¿n khai bÃ¡o mÃ  chÆ°a khá»Ÿi táº¡o)
        this.name = name;
    }
}
```

### phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o (constructor)

PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o lÃ  phÆ°Æ¡ng thá»©c cá»§a lá»›p, nÃ³ Ä‘Æ°á»£c thi hÃ nh ngay khi Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c táº¡o (bá»Ÿi toÃ¡n tá»­ new)

PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cÃ³ tÃªn trÃ¹ng vá»›i tÃªn cá»§a lá»›p, khÃ´ng cÃ³ kiá»ƒu tráº£ vá», nÃªn Ä‘á»ƒ pháº¡m vi public

CÃ³ thá»ƒ táº¡o nhiá»u phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o - cÃ¡c phÆ°Æ¡ng thá»©c nÃ y Ä‘á»u cÃ¹ng tÃªn vá»›i tÃªn lá»›p nhÆ°ng tham sá»‘ khÃ¡c nhau

Khi muá»‘n sá»­ dá»¥ng constructor cÃ³ tham sá»‘ cá»§a lá»›p cha thÃ¬ á»Ÿ lá»›p con dÃ¹ng tá»« khÃ³a base Ä‘á»ƒ gá»i phÆ°Æ¡ng thá»©c cá»§a lá»›p cha

```C#
public CategoryMobile(string nameofCategory, string mota) : base(nameofCategory)
{
    description = mota;
}
```

_â—Constructor Ä‘Æ°á»£c gá»i tá»« lá»›p cha trÆ°á»›c rá»“i tá»›i lá»›p con_

Constructor tÄ©nh : cÃ³ thá»ƒ xÃ¢y dá»±ng má»™t phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o khÃ´ng tham sá»‘ cÃ³ chá»‰ thá»‹ truy cáº­p lÃ  static, phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o nÃ y dÃ¹ng Ä‘á»ƒ khá»Ÿi táº¡o cÃ¡c thÃ nh viÃªn dá»¯ liá»‡u tÄ©nh,
nÃ³ tá»± Ä‘á»™ng gá»i khi truy cáº­p má»™t thÃ nh viÃªn dá»¯ liá»‡u tÄ©nh láº§n Ä‘áº§u.

### phÆ°Æ¡ng thá»©c há»§y (destructor)

DÃ¹ng phÆ°Æ¡ng thá»©c há»§y khi cÃ³ nhu cáº§u dá»n dáº¹p, giáº£i phÃ³ng tÃ i nguyÃªn chiáº¿m giá»¯

Má»™t lá»›p chá»‰ Ä‘Æ°á»£c khai bÃ¡o má»™t phÆ°Æ¡ng thá»©c há»§y (trong khi cÃ³ thá»ƒ cÃ³ nhiá»u phÆ°Æ¡ng thá»©c táº¡o)

KhÃ´ng thá»ƒ gá»i phÆ°Æ¡ng thá»©c há»§y má»™t cÃ¡ch chá»§ Ä‘á»™ng Ä‘Æ°á»£c (do há»‡ thá»‘ng quáº£n lÃ½ NET CORE tá»± quyáº¿t Ä‘á»‹nh thi hÃ nh nÃ³ khi nÃ o)

Khai bÃ¡o phÆ°Æ¡ng thá»©c há»§y: tÃªn trÃ¹ng tÃªn lá»›p, phÃ­a trÆ°á»›c code kÃ½ hiá»‡u ~, phÆ°Æ¡ng thá»©c khÃ´ng Ä‘Æ°á»£c cÃ³ tham sá»‘.

```C#
class MyClass
{
    ~MyClass()
    {
        // ThÃ¢n phÆ°Æ¡ng thá»©c há»§y
    }
}
```

Bá»™ nhá»› trÃªn HEAP lÃ  nÆ¡i lÆ°u cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c táº¡o ra tá»« lá»›p (toÃ¡n tá»­ new), khi Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ khÃ´ng cÃ²n biáº¿n nÃ o tham chiáº¿u (trá») Ä‘áº¿n thÃ¬ nÃ³ sáº½ Ä‘Æ°á»£c Ä‘Ã¡nh dáº¥u thu há»“i - vÃ  khi GC thu há»“i - phÆ°Æ¡ng thá»©c há»§y sáº½ Ä‘Æ°á»£c thi hÃ nh.

### Lá»›p tÄ©nh (static class)

Khi lá»›p cÃ³ pháº¡m vi truy cáº­p lÃ  static thÃ¬ cÃ¡c thÃ nh viÃªn khai bÃ¡o trong lá»›p Ä‘á»u pháº£i khai bÃ¡o lÃ  thÃ nh viÃªn tÄ©nh.

ThÆ°á»ng dÃ¹ng lá»›p tÄ©nh Ä‘á» gom cÃ¡c hÃ m tiá»‡n Ã­ch láº¡i vá»›i nhau. VÃ­ dá»¥ trong C# cÃ³ lá»›p Math lÃ  lá»›p tÄ©nh chá»©a cÃ¡c phÆ°Æ¡ng thá»©c toÃ¡n há»c dÃ¹ng ngay

### QuÃ¡ táº£i (Overloading)

Ká»¹ thuáº­t quÃ¡ táº£i phÆ°Æ¡ng thá»©c (Method Overloading) lÃ  cÃ¡ch thá»©c triá»ƒn khai khÃ¡i niá»‡m tÃ­nh Ä‘a hÃ¬nh cá»§a láº­p trÃ¬nh hÆ°á»›ng Ä‘á»‘i tÆ°á»£ng.

QuÃ¡ táº£i phÆ°Æ¡ng thá»©c lÃ  cÃ¡c phÆ°Æ¡ng thá»©c cÃ³ cÃ¹ng tÃªn nhÆ°ng tham sá»‘ khÃ¡c nhau (hÃ m cÃ³ thá»ƒ tráº£ vá» kiá»ƒu dá»¯ liá»‡u khÃ¡c nhau)

```C#
public class OverloadingExample
{
    public static int Sum(int a, int b)
    {
        return a + b;
    }

    public static double Sum(double a, double b)
    {
        return a + b;
    }
}
```

_â—TÃ­nh Ä‘a hÃ¬nh (polymorphism) lÃ  cÃ¡ch á»©ng xá»­ cá»§a Ä‘á»‘i tÆ°á»£ng - á»©ng xá»­ nÃ y lÃ  khÃ¡c nhau tÃ¹y thuá»™c vÃ o tÃ¬nh huá»‘ng cá»¥ thá»ƒ._

_â—Khai bÃ¡o hai hÃ m cÃ¹ng tÃªn, giá»‘ng nhau hoÃ n toÃ n vá» tham sá»‘ chá»‰ khÃ¡c kiá»ƒu tráº£ vá» sáº½ gÃ¢y lá»—i._

QuÃ¡ táº£i toÃ¡n tá»­ (Operator Overloading), giÃºp báº¡n Ä‘á»‹nh nghÄ©a má»›i (hoáº·c Ä‘á»‹nh nghÄ©a láº¡i) hoáº¡t Ä‘á»™ng cá»§a cÃ¡c toÃ¡n tá»­ trÃªn nhá»¯ng Ä‘á»‘i tÆ°á»£ng lá»›p do báº¡n Ä‘á»‹nh nghÄ©a.

```C#
public static MyVector operator +(MyVector a, MyVector b)
{
    double sx = a.x + b.x;
    double sy = a.x + b.y;
    MyVector v = new MyVector(sx, sy);
    return v;
}
```

### TÃ­nh Ä‘Ã³ng gÃ³i

TÃ­nh Ä‘Ã³ng gÃ³i má»¥c Ä‘Ã­ch háº¡n cháº¿ tá»‘i Ä‘a viá»‡c can thiá»‡p trá»±c tiáº¿p vÃ o dá»¯ liá»‡u, hoáº·c thi hÃ nh cÃ¡c tÃ¡c vá»¥ ná»™i bá»• cá»§a Ä‘á»‘i tÆ°á»£ng.

ÄÆ°á»£c thá»±c hiá»‡n thÃ´ng qua pháº¡m vi truy cáº­p access modifiers

_â—Khi láº­p trÃ¬nh cá»‘ gáº¯ng tá»‘i Ä‘a áº©n thÃ´ng tin ra bÃªn ngoÃ i lá»›p cÃ ng nhiá»u cÃ ng tá»‘t Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh Ä‘Ã³ng gÃ³i cá»§a ká»¹ thuáº­t láº­p trÃ¬nh OOP, nÃ³ giÃºp cho code dá»… báº£o trÃ¬ vÃ  giÃ¡m sÃ¡t lá»—i._

### Thuá»™c tÃ­nh

trÆ°á»ng dá»¯ liá»‡u cá»§a lá»›p: lÃ  biáº¿n trong lá»›p, nÃªn Ä‘á»ƒ pháº¡m vi private Ä‘á»ƒ Ä‘áº£m báº£o an toÃ n vÃ  tÃ­nh Ä‘Ã³ng gÃ³i

thuá»™c tÃ­nh, bá»™ truy cáº­p accessor setter/getter

- thuá»™c tÃ­nh Ä‘Æ°á»£c khai bÃ¡o tÆ°Æ¡ng tá»± nhÆ° trÆ°á»ng dá»¯ liá»‡u nhÆ°ng cÃ³ thÃªm bá»™ accessor vÃ  cÃ³ pháº¡m vi public
- má»¥c Ä‘Ã­nh lÃ  Ä‘á»ƒ táº¡o ra cÃ¡c thao tÃ¡c trao Ä‘á»•i vá»›i trÆ°á»ng dá»¯ liá»‡u cá»§a class, Ä‘áº£m báº£o sá»± an toÃ n dá»¯ liá»‡u

```C#
class Student
{
    private string name; // ÄÃ¢y lÃ  trÆ°á»ng dá»¯ liá»‡u

    public string Name       // ÄÃ¢y lÃ  thuá»™c tÃ­nh
    {
        // set thi hÃ nh khi gÃ¡n, write
        // dá»¯ liá»‡u gÃ¡n lÃ  value
        set
        {
            Console.WriteLine("Ghi dá»¯ liá»‡u <--" + value);
            name = value;
        }

        //get thi hÃ nh ghi Ä‘á»c dá»¯ liá»‡u
        get
        {
            return "TÃªn lÃ : " + name;
        }
    }
}
```

_â—Thuá»™c tÃ­nh accessor cÃ³ thá»ƒ khai bÃ¡o thiáº¿u set hoáº·c get, náº¿u thiáº¿u set nÃ³ trá»Ÿ thÃ nh loáº¡i chá»‰ Ä‘á»c (readonly). Sá»­ dá»¥ng set ráº¥t tiá»‡n lá»£i cho thao tÃ¡c kiá»ƒm tra tÃ­nh há»£p lá»‡ cá»§a dá»¯ liá»‡u khi gÃ¡n, hoáº·c tá»± Ä‘á»™ng thá»±c hiá»‡n má»™t sá»‘ tÃ¡c vá»¥ má»—i khi dá»¯ liá»‡u Ä‘Æ°á»£c gÃ¡n._

cÃ³ thá»ƒ khai bÃ¡o 1 cÃ¡ch tá»± Ä‘á»™ng set/get

```C#
public string Name { set; get; }
```

### Bá»™ Ä‘Ã¡nh chá»‰ má»¥c (indexer)

Indexer lÃ  kháº£ nÄƒng cho cho phÃ©p truy cáº­p Ä‘áº¿n cÃ¡c thÃ nh viÃªn cá»§a lá»›p, thá»±c hiá»‡n má»™t sá»‘ tÃ¡c vá»¥ thÃ´ng qua kÃ½ hiá»‡u chá»‰ má»¥c `[chá»‰-má»¥c]` (kÃ½ hiá»‡u chá»‰ má»¥c Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ truy cáº­p cÃ¡c pháº§n tá»­ máº£ng)

Äá»ƒ khai bÃ¡o má»™t bá»™ chá»‰ má»¥c, khai bÃ¡o gáº§n giá»‘ng nhÆ° cÃº phÃ¡p khai bÃ¡o thuá»™c tÃ­nh lá»›p, setter/getter , cÃº phÃ¡p cÆ¡ báº£n

```C#
public kiá»ƒu_tráº£_vá» this[kiá»ƒu_index index]
{
    get
    {
        // thá»±c hiá»‡n cÃ¡c tÃ¡c vá»¥ vÃ  tráº£ vá» dá»¯ liá»‡u cÃ³ kiá»ƒu_tráº£_vá»
    }
    set
    {
        // giÃ¡ trá»‹ Ä‘Æ°á»£c truyá»n trong biáº¿n value, cÃ³ thá»ƒ lÆ°u nÃ³ vÃ o nÆ¡i thÃ­ch há»£p
    }
}
```

VÃ­ dá»¥

```C#
class IndexerExam
{
    string ho = "Nguyá»…n";
    string ten = "Nam";

    // Bá»™ chá»‰ má»¥c sá»‘ nguyÃªn, chá»‰ má»¥c lÃ  0 hoáº·c 1 náº¿u khÃ¡c sáº½ phÃ¡t sinh Exception
    public string this[int index]
    {
        // Äá»c dá»¯ liá»‡u theo chá»‰ má»¥c
        get
        {
            if (index == 0) return ho;
            else if (index == 1) return ten;
            else throw new Exception("Chá»‰ sá»‘ khÃ´ng tá»“n táº¡i");
        }

        // GÃ¡n dá»¯ liá»‡u theo chá»‰ má»¥c
        set
        {
            if (index == 0) ho = value;
            else if (index == 1) ten = value;
            else throw new Exception("Chá»‰ sá»‘ khÃ´ng tá»“n táº¡i");
        }
    }
}
```

## Kiá»ƒu cáº¥u trÃºc (Struct)

struct kiá»ƒu dá»¯ liá»‡u cáº¥u trÃºc (cÃ²n gá»i lÃ  structure) táº¡o thÃ nh khi muá»‘n gá»™p cÃ¡c dá»¯ liá»‡u cÃ³ liÃªn quan thÃ nh má»™t nhÃ³m (Ä‘Ã³ng gÃ³i dá»¯ liá»‡u)

Trong struct cÃ³ thá»ƒ chá»©a: trÆ°á»ng dá»¯ liá»‡u, thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o, háº±ng sá»‘, cÃ¡c phÆ°Æ¡ng thá»©c, toÃ¡n tá»­, sá»± kiá»‡n.

_â—Struct lÃ  kiá»ƒu dá»¯ liá»‡u tham trá»‹ khÃ´ng pháº£i tham chiáº¿u nhÆ° class_

_â—PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o báº¯t buá»™c pháº£i khá»Ÿi táº¡o toÃ n bá»™ thÃ nh viÃªn dá»¯ liá»‡u (trÆ°á»ng, thuá»™c tÃ­nh) cÃ³ trong struct._

```C#
public struct Product
{
    public Product(string _name)
    {
        name = _name; // Ä‘á»“ng nghÄ©a khá»Ÿi táº¡o thuá»™c tÃ­nh Name
        price = 100;
        Description = "MÃ´ táº£ vá» sáº£n pháº©m {name}";
    }

    public string name;   // trÆ°á»ng tÃªn sáº£n pháº©m
    public decimal price; // trÆ°á»ng giÃ¡ sáº£n pháº©m

    // PhÆ°Æ¡ng thá»©c sinh ra chuá»—i thÃ´ng tin
    public override string ToString() => $"{name} : {price}$";

    // Thuá»™c tÃ­nh Name
    public string Name { set => name = value; get => name; }
    // Thuá»™c tÃ­nh Description
    public string Description { set; get; }

}
```

## Kiá»ƒu liá»‡t kÃª (Enum)

Kiá»ƒu liá»‡t kÃª (enum) khai bÃ¡o má»™t táº­p há»£p cÃ¡c háº±ng sá»‘ cÃ³ tÃªn, máº·c Ä‘á»‹nh giÃ¡ trá»‹ cÃ¡c háº±ng sá»‘ nÃ y lÃ  kiá»ƒu int vÃ  báº¯t Ä‘áº§u tá»« 0 trá»Ÿ Ä‘i trong khai bÃ¡o kiá»ƒu liá»‡t kÃª.

_â—Enum lÃ  kiá»ƒu dá»¯ liá»‡u tham trá»‹_

CÃ³ thá»ƒ gÃ¡n má»™t tÃªn nÃ o Ä‘Ã³ á»©ng vá»›i giÃ¡ trá»‹ cá»¥ thá»ƒ

```C#
enum HocLuc {Kem, TrungBinh = 5, Kha, Gioi};
// Do TrungBinh báº±ng 5, nÃªn tÃªn tiáº¿p theo Kha sáº½ nháº­n 6, Giá»i lÃ  7
```

`Enum` ráº¥t phÃ¹ há»£p khi giÃ¡ trá»‹ cá»§a biáº¿n nháº­n má»™t giÃ¡ trá»‹ háº±ng sá»‘ trong táº­p háº±ng sá»‘ há»¯u háº¡n nÃ o Ä‘Ã³

Äáº·c biá»‡t hay dÃ¹ng `Enum` vá»›i cÃ¢u lá»‡nh `switch`

## Káº¿ thá»«a

Káº¿ thá»«a cho phÃ©p Ä‘á»‹nh nghÄ©a ra má»™t lá»›p má»›i dá»±a trÃªn má»™t lá»›p khÃ¡c cÃ³ sáºµn, káº¿ thá»«a giÃºp cho viá»‡c má»Ÿ rá»™ng code báº£o trÃ¬ trá»Ÿ nÃªn dá»… hÆ¡n.

Lá»›p cÆ¡ sá»Ÿ lÃ  lá»›p mÃ  Ä‘Æ°á»£c lá»›p khÃ¡c káº¿ thá»«a.

Lá»›p káº¿ thá»«a lÃ  lá»›p káº¿ thá»«a láº¡i cÃ¡c thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c tá»« lá»›p cÆ¡ sá»Ÿ.

NhÆ°ng lá»›p má»›i káº¿ thá»«a láº¡i cÃ¡c thÃ´ng tin cá»§a lá»›p cÆ¡ sá»Ÿ vÃ  thÃªm vÃ o nhá»¯ng Ä‘áº·c tÃ­nh riÃªng cá»§a nÃ³.

!!! C# khÃ´ng há»— trá»£ Ä‘a káº¿ thá»«a (má»—i lá»›p káº¿ thá»«a chá»‰ cÃ³ má»™t lá»›p cÆ¡ sá»Ÿ)

Lá»›p niÃªm phong (sealed)

- Trong ká»¹ thuáº­t láº­p trÃ¬nh, báº¡n cÃ³ thá»ƒ Ä‘Ã¡nh dáº¥u má»™t lá»›p nÃ o Ä‘Ã³ khÃ´ng bao giá» trá»Ÿ thÃ nh lá»›p cÆ¡ sá»Ÿ Ä‘á»ƒ phÃ¡i sinh ra lá»›p khÃ¡c- lá»›p Ä‘Ã³ gá»i lÃ  bá»‹ niÃªm phong.

```C#
sealed class A
{
    // ....
}

class B : A
{ // Chá»— nÃ y lá»—i vÃ¬ káº¿ thá»«a lá»›p bá»‹ niÃªm phong
  // ....
}
```

- DÃ¹ng ká»¹ thuáº­t niÃªm phong lá»›p (sealed) Ä‘á»ƒ Ä‘áº£m báº£o khÃ´ng phÃ¡i sinh cÃ¡c lá»›p káº¿ thá»«a má»™t cÃ¡ch thoáº£i mÃ¡i, máº¥t kiá»ƒm soÃ¡t, nháº¥t lÃ  khi sá»‘ dá»± Ã¡n lá»›n, nhiá»u ngÆ°á»i tham gia.

PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o vÃ  há»§y

- HÃ m khá»Ÿi táº¡o cá»§a lá»›p cÆ¡ sá»Ÿ cháº¡y trÆ°á»›c, xong Ä‘áº¿n hÃ m khá»Ÿi táº¡o cá»§a lá»›p káº¿ thá»«a.

- Äá»‘i vá»›i cÃ¡c phÆ°Æ¡ng thá»©c há»§y, khi Ä‘á»‘i tÆ°á»£ng há»§y nÃ³ sáº½ thi hÃ nh phÆ°Æ¡ng thá»©c há»§y cá»§a lá»›p káº¿ thá»«a trÆ°á»›c, rá»“i má»›i Ä‘áº¿n phÆ°Æ¡ng thá»©c há»§y cá»§a lá»›p cÆ¡ sá»Ÿ (ngÆ°á»£c vá»›i khá»Ÿi táº¡o).

- Khi phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o lá»›p cÆ¡ sá»Ÿ cÃ³ tham sá»‘, hoáº·c áº¥n Ä‘á»‹nh má»™t phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o cá»§a lá»›p cÆ¡ sá»Ÿ (náº¿u lá»›p cÆ¡ sá»Ÿ cÃ³ quÃ¡ táº£i nhiá»u phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o), thÃ¬ hÃ m táº¡o cá»§a lá»›p káº¿ thá»«a pháº£i chá»‰ Ä‘á»‹nh sáº½ khá»Ÿi cháº¡y phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o (vÃ  truyá»n tham sá»‘) nÃ o cá»§a lá»›p cÆ¡ sá»Ÿ.

```C#
class A
{
    public A(string mgs)
    {
        Console.WriteLine("A Init" + mgs);
    }
}

class B : A
{
    public B(string abc) : base(abc)
    {
        Console.WriteLine("B Init");
    }
}
```

Chuyá»ƒn kiá»ƒu

- cÃ³ thá»ƒ chuyá»ƒn kiá»ƒu má»™t cÃ¡ch tÆ°á»ng minh (viáº¿t tÃªn kiá»ƒu muá»‘n chuyá»ƒn trong () trÆ°á»›c Ä‘á»‘i tÆ°á»£ng), hay ngáº§m Ä‘á»‹nh.
- khÃ´ng thá»ƒ chuyá»ƒn kiá»ƒu thuáº­n cÃ¢y káº¿ thá»«a - Lá»›p cha khÃ´ng chuyá»ƒn thÃ nh con Ä‘Æ°á»£c

## Partial type vÃ  Nested type

### Partial

Partial lÃ  ká»¹ thuáº­t phÃ¢n chia code lÆ°u á»Ÿ nhiá»u file mÃ£ nguá»“n khÃ¡c nhau, khi biÃªn dá»‹ch thÃ¬ nÃ³ tá»•ng há»£p láº¡i thÃ nh má»™t.

Äá»ƒ phÃ¢n chia lá»›p, khai bÃ¡o vÃ  Ä‘á»‹nh nghÄ©a cÃ¡c thÃ nh pháº§n cá»§a lá»›p á»Ÿ nhiá»u nÆ¡i khÃ¡c nhau, vá»›i yÃªu cáº§u trong khai bÃ¡o lá»›p cho thÃªm tá»« khÃ³a partial

```C#
// Product1.cs
using System;

namespace CS007B_PARTIAL
{
    public partial class Product
    {
        public string Name { set; get; }

        public bool Order(int number = 0)
        {
            return true;
        }

    }
}
```

```C#
// Product2.cs
using System;

namespace CS007B_PARTIAL
{
    public partial class Product
    {

        public int numberBrought()
        {
            return 100;
        }

    }
}
```

_â—Trong Ä‘á»‹nh nghÄ©a á»Ÿ táº¥t cáº£ cÃ¡c pháº§n pháº£i cÃ³ tá»« khÃ³a partial. Tá»« khÃ³a partial cÃ³ thá»ƒ Ä‘áº·t ngay trÆ°á»›c tá»« khÃ³a class_

CÃ³ thá»ƒ dÃ¹ng tá»« khÃ³a partial trong khai bÃ¡o cÃ¡c phÆ°Æ¡ng thá»©c, tuy nhiÃªn má»¥c Ä‘Ã­ch chá»‰ lÃ  chia lÃ m hai nÆ¡i, má»™t nÆ¡i nhÆ° lÃ  khai bÃ¡o má»™t nÆ¡i lÃ  triá»ƒn khai code, vÃ  phÆ°Æ¡ng thá»©c pháº£i tráº£ vá» kiá»ƒu void.

```C#
// file1.cs
partial void myMethod();
```

```C#
// file2.cs
partial void myMethod()
{
    // code triá»ƒn khai
}
```

Partial Method thÆ°á»ng sinh ra bá»Ÿi viá»‡c sinh mÃ£ nguá»“n tá»± Ä‘á»™ng khi dÃ¹ng cÃ´ng cá»¥ IDE

### Nested (Lá»›p lá»“ng nhau)

kiá»ƒu lá»“ng nhau (Nested Type) cho phÃ©p báº¡n khai bÃ¡o má»™t lá»›p (class), giao diá»‡n (interface), cáº¥u trÃºc (struct) trong thÃ¢n má»™t lá»›p khÃ¡c

```C#
class MobileProduct
{
    public Manufactory manufactory { set; get; }

    // Lá»›p Manufactory náº±m trong MobileProduct
    public class Manufactory
    {
        string address;
        public Manufactory(string address)
        {
            this.address = address;
        }
        public void ShowAddress()
        {
            Console.WriteLine(address);
        }
    }

    public void ProductInfo()
    {
        manufactory.ShowAddress();
    }
}
```

```C#
// Sá»­ dá»¥ng
MobileProduct product = new MobileProduct();
product.manufactory = new MobileProduct.Manufactory("Abc ...");
product.ProductInfo();
```

## Generic

Generic lÃ  kiá»ƒu Ä‘áº¡i diá»‡n, nÃ³ cho phÃ©p táº¡o mÃ£ nguá»“n code khÃ´ng phá»¥ thuá»™c vÃ o kiá»ƒu dá»¯ liá»‡u cá»¥ thá»ƒ, chá»‰ khi code thá»±c thi thÃ¬ kiá»ƒu cá»¥ thá»ƒ má»›i xÃ¡c Ä‘á»‹nh.

Nhá»¯ng giáº£i thuáº­t giá»‘ng nhau trÃªn nhá»¯ng kiá»ƒu dá»¯ liá»‡u khÃ¡c nhau, Ä‘á»ƒ trÃ¡nh viá»‡c viáº¿t nhiá»u láº§n code láº·p láº¡i thÃ¬ lÃºc nÃ y Ã¡p dá»¥ng Generic - kiá»ƒu Ä‘áº¡i diá»‡n Ä‘á»ƒ xÃ¢y dá»±ng phÆ°Æ¡ng thá»©c hoáº·c lá»›p.

PhÆ°Æ¡ng thá»©c generic

- Chá»— nÃ o lÃ  kiá»ƒu dá»¯ liá»‡u cá»¥ thá»ƒ thÃ¬ thay nÃ³ báº±ng tÃªn kiá»ƒu Generic, tÃªn nÃ y lÃ  tá»± Ä‘áº·t má»™t cÃ¡ch thá»‘ng nháº¥t tÃ¹y chá»n nhÆ° A, B, T, .... Trong Ä‘Ã³ sau pháº§n tÃªn hÃ m pháº£i liá»‡t kÃª ra
  tÃªn nhá»¯ng kiá»ƒu Generic mÃ  báº¡n sáº½ sá»­ dá»¥ng cho hÃ m.

```C#
X MyFunction<X, Y>(X x, Y y)
{
    return x;
}
```

Lá»›p generic

- TÆ°Æ¡ng tá»± nhÆ° phÆ°Æ¡ng thá»©c, cÅ©ng cÃ³ thá»ƒ khai bÃ¡o lá»›p vá»›i Generic - báº±ng liá»‡t tÃªn cÃ¡c kiá»ƒu Ä‘áº¡i diá»‡n nÃ y sau khai bÃ¡o tÃªn lá»›p

```C#
class MyClass<X, Y>
{
    // ...
}
```

- XÃ¢y dá»±ng lá»›p vá»›i kiá»ƒu Generic phá»• biáº¿n Ä‘á»ƒ triá»ƒn khai nhiá»u loáº¡i giáº£i thuáº­t

## Anonymous Type (Kiá»ƒu vÃ´ danh)

Kiá»ƒu vÃ´ danh lÃ  kiá»ƒu khÃ´ng cÃ³ tÃªn

```C#
var obj = new
{
    thuoctinh1 = giatri1,
    thuoctinh2 = giatri2
}
```

Báº±ng cÃº phÃ¡p nhÆ° váº­y, táº¡o ra Ä‘Æ°á»£c Ä‘á»‘i tÆ°á»£ng chá»©a cÃ¡c thuá»™c tÃ­nh, táº¡o ra Ä‘á»‘i tÆ°á»£ng mÃ  khÃ´ng cáº§n pháº£i khai bÃ¡o lá»›p

_â—cÃ¡c thuá»™c tÃ­nh Ä‘Æ°á»£c khai bÃ¡o lÃ  thuá»™c tÃ­nh chá»‰ Ä‘á»c_

Kiá»ƒu vÃ´ danh Anonymous Type - Ä‘Æ°á»£c dÃ¹ng phá»• biáº¿n trong LINQ

Náº¿u truyá»n nhÆ° tham sá»‘ cho cÃ¡c phÆ°Æ¡ng thá»©c - coi nÃ³ nhÆ° cÃ¡c object cÃ³ thá»ƒ gÃ¢y lá»—i khi buil á»©ng dá»¥ng - trÃ¬nh biÃªn dá»‹ch kiá»ƒm tra vÃ  bÃ¡o lá»—i. Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y cÃ³ thá»ƒ dÃ¹ng Ä‘áº¿n khai bÃ¡o kiá»ƒu dynamic

## Dynamic Type (kiá»ƒu Ä‘á»™ng)

Biáº¿n kiá»ƒu Ä‘á»™ng - ngáº§m Ä‘á»‹nh kiá»ƒu thá»±c sá»± cá»§a biáº¿n Ä‘Ã³ Ä‘Æ°á»£c xÃ¡c Ä‘á»‹nh báº±ng Ä‘á»‘i tÆ°á»£ng gÃ¡n vÃ o á»Ÿ thá»i Ä‘iá»ƒm cháº¡y

```C#
dynamic myvar;
// hoáº·c
static void TestFunc(dynamic dvar)
{
    Console.WriteLine(dvar.age); // á»Ÿ thá»i Ä‘iá»ƒm biÃªn dá»‹ch - khÃ´ng biáº¿t dvar cÃ³ thuá»™c tÃ­nh age hay khÃ´ng, nhÆ°ng nÃ³ váº«n biÃªn dá»‹ch
}
```

Vá»›i phÆ°Æ¡ng thá»©c trÃªn, á»Ÿ thá»i Ä‘iá»ƒm cháº¡y mÃ  Ä‘á»‘i tÆ°á»£ng á»Ÿ tham sá»‘ cÃ³ thuá»™c tÃ­nh age thÃ¬ sáº½ khÃ´ng lá»—i, cÃ²n náº¿u khÃ´ng cÃ³ thuá»™c tÃ­nh age sáº½ sinh ngoáº¡i lá»‡.

_â—khÃ¡c vá»›i kiá»ƒu ngáº§m Ä‘á»‹nh var kiá»ƒu xÃ¡c Ä‘á»‹nh ngay thá»i Ä‘iá»ƒm biÃªn dá»‹ch (khÃ´ng cáº§n khá»Ÿi táº¡o giÃ¡ trá»‹ tá»« trÆ°á»›c)_

## Null - Nullable

null lÃ  má»™t giÃ¡ trá»‹ cá»‘ Ä‘á»‹nh nÃ³ biá»ƒu thá»‹ khÃ´ng cÃ³ Ä‘á»‘i tÆ°á»£ng nÃ o cáº£, cÃ³ nghÄ©a lÃ  biáº¿n cÃ³ giÃ¡ trá»‹ null khÃ´ng cÃ³ tham chiáº¿u (trá») Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng nÃ o (khÃ´ng cÃ³ gÃ¬).

null chá»‰ cÃ³ thá»ƒ gÃ¡n Ä‘Æ°á»£c cho cÃ¡c biáº¿n kiá»ƒu tham chiáº¿u (biáº¿n cÃ³ kiá»ƒu dá»¯ liá»‡u lÃ  cÃ¡c lá»›p), khÃ´ng thá»ƒ gÃ¡n null cho nhá»¯ng biáº¿n cÃ³ kiá»ƒu dá»¯ liá»‡u dáº¡ng tham trá»‹

Náº¿u muá»‘n sá»­ dá»¥ng cÃ¡c kiá»ƒu dá»¯ liá»‡u nguyÃªn tá»‘ (kiá»ƒu tham trá»‹) nhÆ° lÃ  má»™t kiá»ƒu dá»¯ liá»‡u dáº¡ng tham chiáº¿u, cÃ³ thá»ƒ gÃ¡n giÃ¡ trá»‹ null cho nÃ³, cÃ³ thá»ƒ sá»­ dá»¥ng nhÆ° Ä‘á»‘i tÆ°á»£ng thÃ¬ khai bÃ¡o nÃ³ cÃ³ kháº£ nÄƒng nullable

khi biáº¿n nullable cÃ³ giÃ¡ trá»‹ thÃ¬ Ä‘á»c giÃ¡ trá»‹ báº±ng truy cáº­p thÃ nh viÃªn .Value

```C#
int? bienkieuint; // Hoáº·c Nullable<int> bienkieuint;

bienkieuint = null; // cÃ³ thá»ƒ gÃ¡n null cho biáº¿n
bienkieuint = 10; // cÃ³ thá»ƒ gÃ¡n giÃ¡ trá»‹ cho biáº¿n

if (bienkieuint != null)
{
    int val = bienkieuint.Value; // Ä‘á»c giÃ¡ trá»‹ trong biáº¿n nullable
}
```

_â—dáº¡ng khai bÃ¡o Ä‘áº§y Ä‘á»§ cá»§a int? lÃ  Nullable<int>_

Nullable ráº¥t tiá»‡n dá»¥ng khi láº­p trÃ¬nh cÃ¡c truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u, láº­p trÃ¬nh web ...

_â—1 sá»‘ tÃ¡c dá»¥ng cá»§a toÃ¡n tá»­ ? vÃ  ?? + sá»­ dá»¥ng nhÆ° má»™t pháº§n cá»§a toÃ¡n tá»­ Ä‘iá»u kiá»‡n null (null-conditional operator), giÃºp trÃ¡nh lá»—i NullReferenceException khi truy cáº­p vÃ o thÃ nh viÃªn cá»§a má»™t Ä‘á»‘i tÆ°á»£ng cÃ³ thá»ƒ null_

```C#
Person person = null;
int? age = person?.Age; // age sáº½ lÃ  null náº¿u person lÃ  null
```

ToÃ¡n tá»­ ?? lÃ  toÃ¡n tá»­ gá»™p null (null-coalescing operator), cho phÃ©p báº¡n cung cáº¥p má»™t giÃ¡ trá»‹ thay tháº¿ náº¿u giÃ¡ trá»‹ hiá»‡n táº¡i lÃ  null

```C#
string name = nullableString ?? "Default Name";
// sáº½ nháº­n giÃ¡ trá»‹ cá»§a nullableString náº¿u nÃ³ khÃ´ng pháº£i lÃ  null, ngÆ°á»£c láº¡i sáº½ nháº­n giÃ¡ trá»‹ "Default Name"
```

## Äa hÃ¬nh

TÃ­nh Ä‘a hÃ¬nh cá»§a nghÄ©a lÃ  cÃ³ nhiá»u dáº¡ng, tÃ­nh Ä‘a hÃ¬nh sáº½ thá»ƒ hiá»‡n rÃµ khi xÃ¢y dá»±ng cÃ¡c lá»›p káº¿ thá»«a. Má»™t phÆ°Æ¡ng thá»©c Ä‘Æ°á»£c gá»i, nÃ³ sáº½ lÃ  phÆ°Æ¡ng thá»©c cá»¥ thá»ƒ nÃ o tÃ¹y thuá»™c vÃ o Ä‘á»‘i tÆ°á»£ng lÃºc nÃ³ thá»±c thi.

### PhÆ°Æ¡ng thá»©c áº£o (virtual funtion)

Má»™t phÆ°Æ¡ng thá»©c áº£o trong lá»›p - lÃ  phÆ°Æ¡ng thá»©c cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a láº¡i (bá»‹ náº¡p chá»“ng - bá»‹ Ä‘Ã¨) bá»Ÿi lá»›p káº¿ thá»«a

```C#
class Product
{
    protected double price = 0;

    // PhÆ°Æ¡ng thá»©c áº£o ProductInfo
    public virtual void ProductInfo()
    {
        Console.WriteLine($"GiÃ¡ sáº£n pháº©m {price}");
    }

    public void TestProduct()
    {
        this.ProductInfo();
    }
}
```

HÃ m áº£o cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a láº¡i - ká»¹ thuáº­t nÃ y gá»i lÃ  náº¡p chá»“ng (override)

### Náº¡p chá»“ng phÆ°Æ¡ng thá»©c (Override)

á» lá»›p káº¿ thá»«a, cÃ³ thá»ƒ Ä‘á»‹nh nghÄ©a láº¡i phÆ°Æ¡ng thá»©c áº£o cá»§a lá»›p cÆ¡ sá»Ÿ, viá»‡c nÃ y lÃ  thá»±c hiá»‡n náº¡p chá»“ng, Ä‘á»ƒ náº¡p chá»“ng chá»‰ viá»‡c khai bÃ¡o láº¡i phÆ°Æ¡ng thá»©c thÃªm vÃ o tá»« khÃ³a override

```C#
class Iphone : Product
{
    public Iphone()
    {
        price = 500;
    }
    public override void ProductInfo()
    {
        Console.WriteLine($"Äiá»‡n thoáº¡i Iphone");
        base.ProductInfo();
    }
}
```

Äá»ƒ sá»­ dá»¥ng láº¡i hÃ m cá»§a lá»›p cÆ¡ sá»Ÿ dÃ¹ng tá»« khÃ³a base Ä‘á»ƒ gá»i Ä‘áº¿n lá»›p cÆ¡ sá»Ÿ

Äá»‘i tÆ°á»£ng Ä‘Æ°á»£c khá»Ÿi táº¡o thuá»™c kiá»ƒu nÃ o thÃ¬ sáº½ gá»i Ä‘áº¿n hÃ m vÃ  thuá»™c tÃ­nh cá»§a kiá»ƒu Ä‘Ã³

### Lá»›p / phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng (abstract)

Lá»›p trá»«u tÆ°á»£ng thÃ¬ khÃ´ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng trá»±c tiáº¿p mÃ  chá»‰ lÃ m lá»›p cÆ¡ sá»Ÿ káº¿ thá»«a bá»Ÿi lá»›p khÃ¡c.

Trong lá»›p trá»«u tÆ°á»£ng, cÃ²n cÃ³ thá»ƒ khai bÃ¡o phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng vá»›i tá»« khÃ³a abstract, phÆ°Æ¡ng thá»©c nÃ y khÃ´ng cÃ³ thÃ¢n (chá»‰ cÃ³ tÃªn - tham sá»‘), nÃ³ yÃªu cáº§u lá»›p káº¿ thá»«a báº¯t buá»™c pháº£i náº¡p chá»“ng (override)

```C#
abstract class Product
{
    protected double price = 0;
    public abstract void ProductInfo();
    public void TestProduct()
    {
        this.ProductInfo();
    }
}
```

### Giao diá»‡n (interface)

Giao diá»‡n (interface) nÃ³ cÃ³ Ã½ nghÄ©a gáº§n giá»‘ng vá»›i lá»›p abstract

Táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»u khai bÃ¡o khÃ´ng cÃ³ thÃ¢n (chá»‰ cÃ³ tÃªn - nghÄ©a lÃ  phÆ°Æ¡ng thá»©c abstract)

Lá»›p triá»ƒn khai giao diá»‡n (lá»›p káº¿ thá»«a) báº¯t buá»™c pháº£i Ä‘á»‹nh nghÄ©a láº¡i (khÃ´ng cáº§n tá»« khÃ³a overrid) táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c nÃ y, cÅ©ng cÃ³ má»™t Ä‘iá»u khÃ¡c lÃ  lá»›p káº¿ thá»«a cÃ³ thá»ƒ káº¿ thá»«a nhiá»u giao diá»‡n.

```C#
interface IProduct
{
    public void ShowPrice();
}

interface IOrder
{
    public void OrderAction(int numberProduct);
}

class Product : IProduct, IOrder
{
    double price;
    public Product(double price)
    {
        this.price = price;
    }
    public void ShowPrice()
    {
        Console.WriteLine($"Price: {price}");
    }

    public void OrderAction(int numberProduct)
    {
        Console.WriteLine($"Order: {numberProduct}");
    }
}
```

Giao diá»‡n, giá»‘ng nhÆ° nhá»¯ng máº«u - mÃ  lá»›p triá»ƒn khai báº¯t buá»™c pháº£i cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c giá»‘ng nÃ³.

## Delegate

Delegate (hÃ m á»§y quyá»n) lÃ  má»™t kiá»ƒu dá»¯ liá»‡u, nÃ³ dÃ¹ng Ä‘á»ƒ tham chiáº¿u (trá» Ä‘áº¿n) Ä‘áº¿n cÃ¡c hÃ m (phÆ°Æ¡ng thá»©c) cÃ³ tham sá»‘ vÃ  kiá»ƒu tráº£ vá» phÃ¹ há»£p vá»›i khai bÃ¡o kiá»ƒu.

Delegate cÃ³ thá»ƒ gÃ¡n vÃ o nÃ³ má»™t, nhiá»u hÃ m (phÆ°Æ¡ng thá»©c) cÃ³ sá»± tÆ°Æ¡ng thÃ­ch vá» tham sá»‘, kiá»ƒu tráº£ vá», sau Ä‘Ã³ dÃ¹ng nÃ³ Ä‘á»ƒ gá»i hÃ m (giá»‘ng con trá» trong C++)

Delegate Ä‘Æ°á»£c dÃ¹ng phá»• biáº¿n khi gÃ¡n cÃ¡c biá»ƒu thá»©c lambda

Delegate thÆ°á»ng Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c hÃ m callback, Ä‘áº·c biá»‡t lÃ  cÃ¡c Event

VÃ­ dá»¥ cÃ¡ch sá»­ dá»¥ng

- Khai bÃ¡o má»™t delegate giá»‘ng nhÆ° cÃ¡ch khai bÃ¡o phÆ°Æ¡ng thá»©c nhÆ°ng cÃ³ thÃªm tá»« khÃ³a delegate vÃ  khÃ´ng cÃ³ thÃ¢n phÆ°Æ¡ng thá»©c.

```C#
public delegate void ShowLog(string message);
```

- Khi Ä‘Ã£ cÃ³ ShowLog, nÃ³ dÃ¹ng nhÆ° má»™t kiá»ƒu dá»¯ liá»‡u Ä‘á»ƒ khai bÃ¡o cÃ¡c biáº¿n, cÃ¡c biáº¿n nÃ y cÃ³ thá»ƒ gÃ¡n vÃ o nÃ³ cÃ¡c hÃ m cÃ³ sá»± tÆ°Æ¡ng Ä‘á»“ng vá» tham sá»‘ vÃ  kiá»ƒu tráº£ vá» vá»›i khai bÃ¡o delegate

```C#
ShowLog showLog;
```

_â—Sau khi biáº¿n delegate Ä‘Æ°á»£c gÃ¡n hÃ m vÃ o, cÃ³ thá»ƒ dÃ¹ng biáº¿n delegate Ä‘á»ƒ thi hÃ nh báº±ng cÃ¡ch gá»i: varDelegate.Invoke(cÃ¡c-tham-sá»‘) hoáº·c varDelegate(cÃ¡c-tham-sá»‘)_

- Táº¡o hai phÆ°Æ¡ng thá»©c Info vÃ  Warning cÃ³ tham sá»‘ giá»‘ng vá»›i ShowLog, nghÄ©a lÃ  cÃ³ má»™t tham sá»‘ kiá»ƒu string, tráº£ vá» void:

```C#
static public void Info(string s)
{
    // ...
}

static public void Warning(string s)
{
    // ...
}
```

- Do Info, Warning cÃ³ tÆ°Æ¡ng Ä‘á»“ng vá» tham sá»‘ vá»›i delegate trÃªn, nÃªn hai hÃ m nÃ y cÃ³ thá»ƒ dÃ¹ng Ä‘á»ƒ gÃ¡n vÃ o biáº¿n kiá»ƒu ShowLog

```C#
ShowLog showLog;

showLog = Info; // showLog gÃ¡n báº±ng phÆ°Æ¡ng thá»©c Info
showLog("ThÃ´ng bÃ¡o"); // Thi hÃ nh delegate chÃ­nh lÃ  thi hÃ nh Info

showLog = Warning; // showLog gÃ¡n báº±ng phÆ°Æ¡ng thá»©c Warning
showLog("ThÃ´ng bÃ¡o"); // Thi hÃ nh delegate chÃ­nh lÃ  thi hÃ nh Info
```

- Khi cháº¡y thÃ¬ showLog sáº½ thá»±c hiá»‡n ná»™i dung cÃ¡c hÃ m mÃ  nÃ³ Ä‘Æ°á»£c gÃ¡n (cáº§n Ä‘áº£m báº£o biáº¿n delegate Ä‘Ã³ Ä‘Ã£ Ä‘Æ°á»£c gÃ¡n phÆ°Æ¡ng thá»©c - biáº¿n khÃ¡c null)
  if (showLog != null) showLog("Mgs") hoáº·c gáº¯n gá»n hÆ¡n showLog?.Invoke("Mgs");

- Má»™t delegate cÃ³ thá»ƒ Ä‘Æ°a vÃ o nÃ³ nhiá»u phÆ°Æ¡ng thá»©c Ä‘á»ƒ má»™t láº§n gá»i thi hÃ nh táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c nÃ³ chá»©a

  - ToÃ¡n tá»­ += : Ná»‘i thÃªm má»™t phÆ°Æ¡ng thá»©c vÃ o delegate
    delegatevar += method1
  - ToÃ¡n tá»­ -= : Loáº¡i bá» 1 phÆ°Æ¡ng á»Ÿ cuá»‘i (náº¿u phÆ°Æ¡ng thá»©c Ä‘Ã³ cÃ³ trong delegate, tÃ­nh tá»« cuá»‘i)
    delegatevar -= method1

- NgoÃ i cÃ¡ch gÃ¡n cho delegate má»™t hÃ m cÃ³ tÃªn cá»¥ thá»ƒ, cÅ©ng cÃ³ thá»ƒ gÃ¡n má»™t phÆ°Æ¡ng thá»©c Anonymou

```C#
showLog += (x) => Console.WriteLine(string.Format("===>{0}<===", x));
```

- CÃ¡c delegate cÃ¹ng kiá»ƒu cÃ³ thá»ƒ káº¿t há»£p láº¡i vá»›i nhau báº±ng toÃ¡n tá»­ +

```C#
ShowLog showLog1 = (x) => { Console.WriteLine($"-----{x}-----"); };
ShowLog showLog2 = Warning;
ShowLog showLog3 = Info;

var all = showLog1 + showLog2 + showLog3 + showLog1;
```

_â—Hiá»ƒu Ä‘Æ¡n giáº£n cÃ³ thá»ƒ hÃ¬nh dung delegate nhÆ° 1 máº£ng chá»©a cÃ¡c con trá» hÃ m. Khi Khi gá»i Ä‘áº¿n 1 dekegate thÃ¬ nÃ³ sáº½ thá»±c hiá»‡n cÃ¡c hÃ m mÃ  nÃ³ chá»©a theo thá»© tá»± tá»« Ä‘áº§u tá»›i cuá»‘i (thá»© tá»± Ä‘Æ°á»£c thÃªm vÃ o)_

_â—CÃ¡c hÃ m trong 1 delegate pháº£i cÃ³ cÃ¹ng kiá»ƒu tráº£ vá», cÃ¹ng sá»‘ lÆ°á»£ng vÃ  kiá»ƒu cÃ¡c tham sá»‘ truyá»n vÃ o hÃ m_

CÃ³ thá»ƒ sá»­ dá»¥ng delegate lÃ m tham sá»‘ cá»§a phÆ°Æ¡ng thá»©c, nÃ³ cÃ³ vai trÃ² nhÆ° nhá»¯ng hÃ m callback linh hoáº¡t.

```C#
// Sá»­ dá»¥ng Delegate lÃ m tham sá»‘ phÆ°Æ¡ng thá»©c, truyá»n callback
static void TinhTong(int a, int b, Action callback)
{
    int c = a + b;
    // Gá»i callback
    callback(c.ToString());
}

public static void TestTinhTong()
{
    TinhTong(5, 6, (x) => Console.WriteLine($"Tá»•ng hai sá»‘ lÃ : {x}"));
    TinhTong(1, 3, Logs.Info);
}
```

Func vÃ  Action

- Func vÃ  Action lÃ  hai máº«u delegate Ä‘á»‹nh nghÄ©a sáºµn, giÃºp nhanh chÃ³ng táº¡o ra biáº¿n kiá»ƒu delegate mÃ  khÃ´ng máº¥t cÃ´ng khai bÃ¡o

- Func lÃ  máº«u delegate cÃ³ kiá»ƒu tráº£ vá»

```C#
Func<kiá»ƒu_tham_sá»‘_1, kiá»ƒu_tham_sá»‘_2, ..., kiá»ƒu_tráº£_vá»> var_delegate;

// Khai bÃ¡o kiá»ƒu Func
Func<int, string, bool> bien1;
// biáº¿n delegate tÃªn bien1 tÆ°Æ¡ng Ä‘Æ°Æ¡ng vá»›i hÃ m cÃ³ 2 tham sá»‘, tham sá»‘ 1 kiá»ƒu int, tham sá»‘ 2 kiá»ƒu string, vÃ  hÃ m tráº£ vá» kiá»ƒu bool

// Khai bÃ¡o delegate bÃ¬nh thÆ°á»ng
delegate bool DelegateName(int a, string b);
DelegateName bien1;
```

_â—Kiá»ƒu cuá»‘i cÃ¹ng trong khai bÃ¡o Func lÃ  kiá»ƒu tráº£ vá» cá»§a hÃ m, cÃ³ thá»ƒ thiáº¿u tham sá»‘ nhÆ°ng khÃ´ng Ä‘Æ°á»£c thiáº¿u kiá»ƒu tráº£ vá»_

- Action lÃ  máº«u delegate khÃ´ng cÃ³ kiá»ƒu tráº£ vá» hay biáº¿n kiá»ƒu Action cÃ³ thá»ƒ gÃ¡n báº±ng cÃ¡c hÃ m cÃ³ kiá»ƒu tráº£ vá» void

```C#
Action<kiá»ƒu_tham_sá»‘_1, kiá»ƒu_tham_sá»‘_2, ...> var_delegate;
```

## Biá»ƒu thá»©c lambda (Anonymous)

Biá»ƒu thá»©c lambda cÃ²n gá»i lÃ  biá»ƒu thá»©c hÃ m náº·c danh (Anonymous), má»™t biá»ƒu thá»©c khai bÃ¡o giá»‘ng phÆ°Æ¡ng thá»©c (hÃ m) nhÆ°ng thiáº¿u tÃªn

```C#
(cÃ¡c_tham_sá»‘) => biá»ƒu_thá»©c;
// Hoáº·c
(cÃ¡c_tham_sá»‘) =>
{
    // cÃ¡c cÃ¢u lá»‡nh
    // Sá»­ dá»¥ng return náº¿u cÃ³ giÃ¡ trá»‹ tráº£ vá»
}
```

CÃ¡c biá»ƒu thá»©c lambda Ä‘á»u cÃ³ thá»ƒ chuyá»ƒn Ä‘á»•i thÃ nh delegate, do váº­y nÃ³ cÃ³ thá»ƒ gÃ¡n cho cÃ¡c delegate phÃ¹ há»£p

```C#
public delegate int TinhToan(int a, int b);

static void Main(string[] args)
{
    // GÃ¡n biá»ƒu thá»©c lambda cho delegate
    TinhToan tinhtong = (int x, int y) =>
    {
        return x + y;
    };

    int kq = tinhtong(5, 1); // kq = 6;
    Console.WriteLine(kq);
}
```

_â—ThÆ°á»ng káº¿t há»£p vá»›i Func hoáº·c Action Ä‘á»ƒ táº¡o chuá»—i cÃ¡c hÃ nh Ä‘á»™ng_

CÃ³ thá»ƒ sá»­ dá»¥ng toÃ¡n tá»­ => sau khai bÃ¡o tÃªn phÆ°Æ¡ng thá»©c (loáº¡i phÆ°Æ¡ng thá»©c cÃ³ kiá»ƒu tráº£ vá» khÃ¡c void), rá»“i Ä‘áº¿n ngay má»™t biá»ƒu thá»©c (biá»ƒu thá»©c lambda) cÃ³ káº¿t quáº£ tráº£ vá» (khÃ´ng dÃ¹ng {}), biá»ƒu thá»©c
nÃ y nhÆ° lÃ  Ä‘á»‹nh nghÄ© thÃ¢n cá»§a phÆ°Æ¡ng thá»©c.

```C#
int Tong(int x, int y) => x + y;
// TÆ°Æ¡ng Ä‘Æ°Æ¡ng
int Tong(int x, int y)
{
    return x + y;
}
```

_â—Hiá»ƒu lÃ  dÃ¹ng Ä‘á»ƒ rÃºt gá»n phÆ°Æ¡ng thá»©c Ä‘á»‘i vá»›i cÃ¡c phÆ°Æ¡ng thá»©c thá»±c hiá»‡n 1 dÃ²ng lá»‡nh, 1 cÃ´ng viá»‡c ngáº¯n cÃ³ kiá»ƒu tráº£ vá» (khÃ¡c void)_

## Event

CÃ¡c sá»± kiá»‡n (Event) lÃ  cÆ¡ cháº¿ Ä‘á»ƒ má»™t Ä‘á»‘i tÆ°á»£ng (Ä‘á»‘i tÆ°á»£ng cá»§a lá»›p) nÃ y thÃ´ng bÃ¡o Ä‘áº¿n Ä‘á»‘i tÆ°á»£ng khÃ¡c cÃ³ Ä‘iá»u gÃ¬ Ä‘Ã³ mÃ  lá»›p khÃ¡c quan tÃ¢m vá»«a xáº£y ra.

Lá»›p mÃ  tá»« Ä‘Ã³ gá»­i Ä‘i sá»± kiá»‡n gá»i tÃªn nÃ³ lÃ  publisher vÃ  cÃ¡c lá»›p nháº­n Ä‘Æ°á»£c sá»± kiá»‡n gá»i lÃ  lÃ  cÃ¡c subsriber.

CÃ¡c Event xÃ¢y dá»±ng vá»›i ná»n táº£ng chÃ­nh lÃ  delegate

Giáº£ xá»­ sá»­ dá»¥ng delegate Ä‘á»ƒ nháº­n vÃ  phÃ¡t sá»± kiá»‡n tá»« cÃ¡c lá»›p publisher vÃ  subsriber. NhÆ°ng delegate cÃ³ thá»ƒ Ä‘Æ°á»£c gÃ¡n láº¡i báº±ng null lÃ m cho cÃ¡c sá»± kiá»‡n Ä‘Äƒng kÃ½ trÆ°á»›c Ä‘Ã³ bá»‹ há»§y. Äiá»u nÃ y lÃ  phÃ¡ há»ng nguyÃªn táº¯c hoáº¡t Ä‘á»™ng cá»§a mÃ´ hÃ¬nh láº­p trÃ¬nh sá»± kiá»‡n - phÃ¡ vá»¡ sá»± Ä‘Ã³ng gÃ³i

Äá»‘i vá»›i Event thÃ¬ khÃ´ng thá»ƒ gÃ¡n null cho kiá»ƒu dá»¯ liá»‡u nÃ y, giÃºp Ä‘áº£m báº£o Ä‘Æ°á»£c nguyÃªn táº¯c hoáº¡t Ä‘á»™ng cá»§a mÃ´ hÃ¬nh láº­p trÃ¬nh sá»± kiá»‡n

_â—Event lÃ  Delegate nhÆ°ng khi khai bÃ¡o thÃªm tá»« khÃ³a event, dáº«n tá»›i chá»‰ cÃ³ thá»ƒ thá»±c hiá»‡n toÃ¡n tá»­ += hoáº·c -= vá»›i Event_

Event trong thÆ° viá»‡n .Net Ä‘á»u xÃ¢y dá»±ng tá»« má»™t delegate cÃ³ tÃªn EventHandler, nÃ³ Ä‘Ã£ Ä‘á»‹nh nghÄ©a sáºµn cÃ³ trong thÆ° viá»‡n .NET vá»›i dáº¡ng:

```C#
public delegate void EventHandler(object sender?, EventArgs e);
public delegate void EventHandler<TEventArgs>(object sender?, TEventArgs e);
```

Ta cÃ³ thá»ƒ sá»­ dá»¥ng luÃ´n delegate EventHandler Ä‘á»ƒ xÃ¢y dá»±ng cÃ¡c Event cá»§a riÃªng mÃ¬nh sá»­ dá»¥ng cho cÃ¡c Publisher, chá»‰ cáº§n xÃ¢y dá»±ng cÃ¡c lá»›p phÃ¡i sinh tá»« EventArgs vá»›i má»¥c Ä‘Ã­ch thÃªm vÃ o cÃ¡c tham sá»‘ riÃªng khi gá»­i sá»­ kiá»‡n.

```C#
// XÃ¢y dá»±ng lá»›p MyEventArgs káº¿ thá»«a tá»« EventArgs
public class MyEventArgs : EventArgs
{
    public MyEventArgs(string data)
    {
        this.data = data;
    }

    // LÆ°u dá»¯ liá»‡u gá»­i Ä‘i tá»« publisher
    private string data;

    public string Data
    {
        get { return data; }
    }
}

// XÃ¢y dá»±ng lá»›p, phÃ¡t Ä‘i sá»± kiá»‡n (data)
public class ClassA
{
    // Táº¡o Event vá»›i EventHandler
    public event EventHandler event_news;

    public void Send()
    {
        event_news?.Invoke(this, new MyEventArgs("CÃ³ tin má»›i Abc ..."));
    }
}

public class ClassB
{
    public void Sub(ClassA p)
    {
        p.event_news += ReceiverFromPublisher;
    }

    private void ReceiverFromPublisher(object sender, MyEventArgs e)
    {
        Console.WriteLine("ClassB: " + e.Data);
    }
}

public class ClassC
{
    public void Sub(ClassA p)
    {
        p.event_news += ReceiverFromPublisher;
    }

    private void ReceiverFromPublisher(object sender, MyEventArgs e)
    {
        Console.WriteLine("ClassC: " + e.Data);
    }
}
```

_â—Hiá»ƒu Ä‘Æ¡n giáº£n Event lÃ  1 delegate khÃ´ng thá»ƒ null (khÃ´ng nullable). Event Ä‘Æ°á»£c dÃ¹ng Ä‘á»ƒ nháº­n vÃ  thá»±c hiá»‡n 1 chuá»—i thao tÃ¡c thÃ´ng qua cÃ¡c lá»›p publisher (lá»›p phÃ¡t) thá»±c hiá»‡n Event, lá»›p subsriber (lá»›p Ä‘Äƒng kÃ½) thÃªm thao tÃ¡c vÃ o Event._

## Extension Method (PhÆ°Æ¡ng thá»©c má»Ÿ rá»™ng)

CÃ¡c phÆ°Æ¡ng thá»©c má»Ÿ rá»™ng lÃ  cÃ¡c phÆ°Æ¡ng thá»©c thÃªm vÃ o lá»›p, cáº¥u trÃºc, giao diá»‡n cÃ³ sáºµn mÃ  khÃ´ng cáº§n thiáº¿t pháº£i káº¿ thá»«a lá»›p Ä‘á»ƒ táº¡o ra cÃ¡c lá»›p má»›i, khÃ´ng cáº§n biÃªn dá»‹ch láº¡i thÆ° viá»‡n.

CÃ¡c phÆ°Æ¡ng thá»©c má»Ÿ rá»™ng khai bÃ¡o lÃ  nhá»¯ng phÆ°Æ¡ng thá»©c tÄ©nh, nhÆ°ng láº¡i Ä‘Æ°á»£c gá»i thÃ´ng qua Ä‘á»‘i tÆ°á»£ng lá»›p mÃ  phÆ°Æ¡ng thá»©c má»Ÿ rá»™ng Ä‘Ã³ khai bÃ¡o.

```C#
public static [kiá»ƒu tráº£ vá»][tÃªn phÆ°Æ¡ng thá»©c] (this[kiá»ƒu dÅ© liá»‡u] tenbien, ...)
{
// ...
}
```

_â—kiá»ƒu dá»± kiá»‡u cá»§a tham sá»‘ Ä‘áº§u tiÃªn lÃ  kiá»ƒu dá»± kiá»‡u Ä‘Æ°á»£c má»Ÿ rá»™ng (cÃ³ thÃªm hÃ m)_

VÃ­ dá»¥

```C#
public static void Print(this string s, ConsoleColor color = ConsoleColor.Yellow)
{
    ConsoleColor lastColor = Console.ForegroundColor;
    Console.ForegroundColor = color;
    Console.WriteLine(s);
    Console.ForegroundColor = lastColor;
}
// cÃ¡c Ä‘á»‘i tÆ°á»£ng string sáº½ cÃ³ thÃªm phÆ°Æ¡ng thá»©c Print
```

## Exception (ngoáº¡i lá»‡)

Ngoáº¡i lá»‡ (exception) lÃ  váº¥n Ä‘á» - lá»—i phÃ¡t sinh trong quÃ¡ trÃ¬nh thá»±c thi chÆ°Æ¡ng trÃ¬nh. ThÆ°á»ng khi chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y mÃ  phÃ¡t sinh ngoáº¡i lá»‡ (lá»—i) thÃ¬ dáº«n Ä‘áº¿n chÆ°Æ¡ng trÃ¬nh káº¿t thÃºc ngay láº­p tá»©c.

CÃ³ vÃ´ sá»‘ nguyÃªn nhÃ¢n Ä‘á»ƒ chÆ°Æ¡ng trÃ¬nh Ä‘ang cháº¡y mÃ  phÃ¡t sinh ngoáº¡i lá»‡:

- Dá»¯ liá»‡u ngÆ°á»i dÃ¹ng nháº­p sai, mÃ  chÆ°Æ¡ng trÃ¬nh khÃ´ng kiá»ƒm soÃ¡t Ä‘Æ°á»£c
- Thá»±c hiá»‡n cÃ¡c phÃ©p toÃ¡n khÃ´ng Ä‘Æ°á»£c phÃ©p (nhÆ° chia má»™t sá»‘ cho 0)
- Thao tÃ¡c vá»›i tÃ i nguyÃªn khÃ´ng tá»“n táº¡i (nhÆ° má»Ÿ file khÃ´ng cÃ³ trÃªn Ä‘Ä©a, káº¿t ná»‘i Ä‘áº¿n CSDL khÃ´ng tá»“n táº¡i ...)
- Thiáº¿u bá»™ nhá»›
- ...

Khi cÃ³ má»™t lá»—i phÃ¡t sinh háº§u háº¿t cÃ¡c lá»—i Ä‘á»u cÃ³ thá»ƒ quáº£n lÃ½ bá»Ÿi thÆ° viá»‡n C# thÃ¬ nÃ³ sáº½ phÃ¡t sinh ra má»™t Ä‘á»‘i tÆ°á»£ng lá»›p Exeption (System.System) hoáº·c Ä‘á»‘i tÆ°á»£ng lá»›p nÃ o Ä‘Ã³ káº¿ thá»«a tá»« Exception

Khi má»™t Ä‘á»‘i tÆ°á»£ng lá»›p Exception sinh ra - mÃ  chÆ°Æ¡ng trÃ¬nh khÃ´ng chá»§ Ä‘á»™ng xá»­ lÃ½ Ä‘á»‘i tÆ°á»£ng nÃ y thÃ¬ chÆ°Æ¡ng trÃ¬nh sáº½ káº¿t thÃºc

Äá»‘i tÆ°á»£ng lá»›p Exception chá»©a trong nÃ³ cÃ¡c thÃ´ng tin vá» lá»—i (dÃ²ng thÃ´ng bÃ¡o, nguyÃªn nhÃ¢n lá»—i, nÆ¡i phÃ¡t sinh lá»—i ...)

Xá»­ lÃ½ ngoáº¡i lá»‡

- xá»­ lÃ½ ngoáº¡i lá»‡ thÃ¬ ta cáº§n báº¯t láº¥y nÃ³ vÃ  Ä‘iá»u hÆ°á»›ng chÆ°Æ¡ng trÃ¬nh má»™t cÃ¡ch thÃ­ch há»£p. Äá»ƒ báº¯t ngoáº¡i lá»‡ ta sá»­ dá»¥ng cÃ¢u lá»‡nh try catch:

```C#
try
{
    // CÃ¡c khá»‘i code Ä‘Æ°á»£c giÃ¡m sÃ¡t Ä‘á»ƒ báº¯t lá»—i náº¿u cÃ³
    // náº¿u cÃ³ lá»—i sáº½ phÃ¡t sinh ngoáº¡i lá»‡ Exception
    // Ngoáº¡i lá»‡ nÃ y báº¯t láº¡i Ä‘Æ°á»£c á»Ÿ khá»‘i catch
}
catch (Exception loi)
{
    // Khá»‘i nÃ y thá»±c thi khi cÃ³ lá»—i - Ä‘á»‘i tÆ°á»£ng Exception báº¯t Ä‘Æ°á»£c lÆ°u á»Ÿ biáº¿n loi
}
```

- Äoáº¡n code nÃ o muá»‘n giÃ¡m sÃ¡t Ä‘á»ƒ báº¯t ngoáº¡i lá»‡ - thÃ¬ Ä‘Æ°a vÃ o khá»‘i try

- Náº¿u ngoáº¡i lá»‡ xáº£y ra do code trong khá»‘i Ä‘Ã³ thÃ¬ sáº½ báº¯t Ä‘Æ°á»£c - chÆ°Æ¡ng trÃ¬nh sáº½ khÃ´ng káº¿t thÃºc mÃ  láº­p tá»©c chuyá»ƒn sang khá»‘i catch

- Táº¡i catch cÃ³ ngay Ä‘á»‘i tÆ°á»£ng lá»›p Exception - cáº§n xá»­ lÃ½ theo logic á»©ng dá»¥ng Ä‘iá»u hÆ°á»›ng chÆ°Æ¡ng trÃ¬nh má»™t cÃ¡ch thÃ­ch há»£p á»Ÿ Ä‘Ã¢y

```C#
static void Main(string[] args)
{
    try
    {
        // khá»‘i nÃ y Ä‘Æ°á»£c giÃ¡m sÃ¡t Ä‘á»ƒ báº¯t lá»—i - khi nÃ³ phÃ¡t sinh
        int[] mynumbers = new int[] { 1, 2, 3 };
        int i = mynumbers[10]; // dÃ²ng nÃ y phÃ¡t sinh lá»—i
        Console.WriteLine(i); // dÃ²ng nÃ y khÃ´ng Ä‘Æ°á»£c thá»±c thi vÃ¬ lá»—i trÃªn
    }
    catch (Exception loi)
    {
        // khá»‘i nÃ y thá»±c thi khi báº¯t Ä‘Æ°á»£c lá»—i
        Console.WriteLine("CÃ³ lá»—i rá»“i");
        Console.WriteLine(loi.Message);
    }
}

// CÃ³ lá»—i rá»“i
// Index was outside the bounds of the array.
```

- Trong .NET tá»« lá»›p cÆ¡ sá»Ÿ Exception nÃ³ xÃ¢y dá»±ng nÃªn ráº¥t nhiá»u loáº¡i ngoáº¡i lá»‡ khÃ¡c phá»¥c vá»¥ chi tiáº¿t cho tá»«ng loáº¡i lá»—i phÃ¡t sinh khÃ¡c nhau. CÃ³ thá»ƒ báº¯t nhiá»u ngoáº¡i lá»‡.

- Äá»ƒ báº¯t cá»¥ thá»ƒ má»™t loáº¡i ngoáº¡i lá»‡ nÃ o Ä‘Ã³ chá»‰ viá»‡c thÃªm má»™t khá»‘i catch tÆ°Æ¡ng á»©ng vá»›i ngoáº¡i lá»‡ Ä‘Ã³

- Trong lá»‡nh try ... catch, cÃ³ thá»ƒ thÃªm má»™t tÃ¹y chá»n lÃ  khá»‘i finally, code trong khá»‘i nÃ y Ä‘Æ°á»£c thá»±c thi ngay cáº£ khi cÃ³ phÃ¡t sinh ngoáº¡i lá»‡ hay khÃ´ng.

```C#
int x = 10;
int y = 0;
int z = 0;
try
{
    z = x / y;
}
catch (DivideByZeroException e1)
{
    Console.WriteLine(e1.Message);
}
finally
{
    // LuÃ´n Ä‘Æ°á»£c thi hÃ nh dÃ¹ cÃ³ phÃ¡t sinh ngoáº¡i lá»‡ hay khÃ´ng
    Console.WriteLine(z);
}
```

_â—Khá»‘i finally cÆ¡ báº£n Ä‘á»ƒ giáº£i phÃ³ng cÃ¡c tÃ i nguyÃªn chiáº¿m giá»¯._

Thuá»™c tÃ­nh (hay dÃ¹ng)

- Message : chuá»—i chá»©a ná»™i dung thÃ´ng bÃ¡o lá»—i
- StackTrace : chuá»—i chá»©a cÃ¡c bÆ°á»›c thá»±c thi chÆ°Æ¡ng trÃ¬nh cho Ä‘áº¿n khi bá»‹ lá»—i (cÃ³ chá»©a cÃ¡c phÆ°Æ¡ng thá»©c, hÃ m khi thá»±c thi gÃ¢y lá»—i, vá»‹ trÃ­ file lá»—i ...)
- Source : chá»©a tÃªn á»©ng dá»¥ng hoáº·c Ä‘á»‘i tÆ°á»£ng bá»‹ lá»—i

PhÃ¡t sinh ngoáº¡i lá»‡

- Náº¿u muá»‘n phÃ¡t sinh ngoáº¡i lá»‡ cho biáº¿t cÃ³ má»™t lá»—i nÃ o Ä‘Ã³ vá»«a xáº£y ra thÃ¬ cáº§n táº¡o ra má»™t Ä‘á»‘i tÆ°á»£ng lá»›p Exception hoáº·c Ä‘á»‘i tÆ°á»£ng thuá»™c lá»›p nÃ o Ä‘Ã³ káº¿ thá»«a tá»« Exception,
  sau Ä‘Ã³ phÃ¡t sinh báº±ng lá»‡nh throw

```C#
public static double Thuong(double x, double y)
{
    if (y == 0)
    {
        // Khá»Ÿi táº¡o ngoáº¡i lá»‡, tham sá»‘ lÃ  thÃ´ng bÃ¡o lá»—i
        Exception myexception = new Exception("Sá»‘ chia khÃ´ng Ä‘Æ°á»£c báº±ng 0");

        // phÃ¡t sinh ngoáº¡i lá»‡, code phÃ­a sau throw khÃ´ng Ä‘Æ°á»£c thá»±c thi
        throw myexception;
    }
    return x / y;
}
static void Main(string[] args)
{
    try
    {
        double z = Thuong(100, 0);
    }
    catch (Exception e)
    {
        Console.WriteLine(e.Message);
    }
}
```

Lá»›p Exeption riÃªng

- Náº¿u muá»‘n táº¡o ra cÃ¡c lá»›p Ä‘á»ƒ quáº³ng ra cÃ¡c lá»—i khi cáº§n thiáº¿t, thÃ¬ chá»‰ viá»‡c káº¿ thá»«a lá»›p Exception. Lá»£i Ã­ch viá»‡c táº¡o ra lá»›p riÃªng, nÃ³ giÃºp cho viá»‡c quáº£n lÃ½ lá»—i - gá»¡ rá»‘i tá»‘t hÆ¡n.

```C#
public class DataTooLongExeption : Exception
{
    const string erroMessage = "Dá»¯ liá»‡u quÃ¡ dÃ i";
    public DataTooLongExeption() : base(erroMessage)
    {

    }
}
```

## Collection

Má»™t collection (bá»™, táº­p há»£p) lÃ  má»™t nhÃ³m cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ sá»± liÃªn quan Ä‘áº¿n nhau. Sá»‘ Ä‘á»‘i tÆ°á»£ng trong collect cÃ³ thá»ƒ thay Ä‘á»•i tÄƒng giáº£m.

CÃ³ nhiá»u loáº¡i collection, chÃºng Ä‘Æ°á»£c táº­p há»£p vÃ o namespace System.Collections. ThÆ°á»ng thÃ¬ má»™t lá»›p collection cÃ³ cÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ thÃªm, bá»›t, láº¥y tá»•ng pháº§n tá»­.

CÃ¡c lá»›p collection kiá»ƒu Generic nhÆ°: List<T>, Dictionary<TKey, TValue>, Stack<T> ... nhá»¯ng lá»›p generic nÃ y á»Ÿ namespace System.Collections.Generic

CÃ¡c lá»›p collection mÃ  khÃ´ng sá»­ dá»¥ng generic nhÆ°: ArrayList, Stack, Queue ...

Interface vá» collect

| TÃªn                            | Ã nghÄ©a                                                                                                                                                                                |
| ------------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| IEnumerable<T>                 | Triá»ƒn khai nÃ³ náº¿u muá»‘n duyá»‡t pháº§n tá»­ báº±ng foreach, nÃ³ Ä‘á»‹nh nghÄ©a phÆ°Æ¡ng thá»©c GetEnumerator tráº£ vá» má»™t enumerator.                                                                      |
| ICollection<T>                 | Giao diá»‡n nÃ y Ä‘Æ°á»£c triá»ƒn khai bá»Ÿ cÃ¡c generic collection. Vá»›i nÃ³ láº¥y tá»•ng pháº§n tá»­ báº±ng thuá»™c tÃ­nh Count, copy cÃ¡c pháº§n tá»­ vÃ o máº£ng báº±ng CopyTo, thÃªm bá»›t pháº§n tá»­ vá»›i Add, Remove, Clear |
| IList<T>                       | Giao diá»‡n nÃ y káº¿ thá»«a ICollection<T> lÃ  má»™t danh sÃ¡ch cÃ¡c pháº§n tá»­ truy cáº­p Ä‘Æ°á»£c theo vá»‹ trÃ­ cá»§a nÃ³. NÃ³ cÃ³ indexer, phÆ°Æ¡ng thá»©c Ä‘á»ƒ chÃ¨n pháº§n tá»­ xÃ³a pháº§n tá»­ Insert RemoveAt.            |
| ISet<T>                        | Giao diá»‡n triá»ƒn khai bá»Ÿi cÃ¡c táº­p há»£p                                                                                                                                                   |
| IDictionary<TKey,TValue>       | Giao diá»‡n Ä‘á»ƒ triá»ƒn khai loáº¡i dá»¯ liá»‡u lÆ°u trá»¯ theo cáº·p key, value.                                                                                                                      |
| ILookup<TKey,TValue>           | Giao diá»‡n Ä‘á»ƒ triá»ƒn khai loáº¡i dá»¯ liá»‡u lÆ°u trá»¯ theo cáº·p key, value. NhÆ°ng cho phÃ©p má»™t key cÃ³ nhiá»u giÃ¡ trá»‹                                                                              |
| IComparer<TKey,TValue>         | Giao diá»‡n Ä‘á»ƒ triá»ƒn khai cho phÃ©p so sÃ¡nh Ä‘á»ƒ sáº¯p xáº¿p Collection                                                                                                                         |
| IEqualityComparer<TKey,TValue> | Giao diá»‡n Ä‘á»ƒ triá»ƒn khai cho phÃ©p so sÃ¡nh báº±ng                                                                                                                                          |

## List<T>

Lá»›p collection List lÃ  lá»›p triá»ƒn khai cÃ¡c giao diá»‡n IList, ICollection, IEnumerable nÃ³ quáº£n lÃ½ danh sÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ¹ng kiá»ƒu.

VÃ­ dá»¥, xÃ¢y dá»±ng danh sÃ¡ch cÃ¡c sáº£n pháº©m, sáº£n pháº©m cÃ³ kiá»ƒu Product tá»± Ä‘á»‹nh nghÄ©a nhÆ° sau - lá»›p sáº£n pháº©m há»— trá»£ so sÃ¡nh vá»›i sáº£n pháº©m khÃ¡c nÃªn triá»ƒn khai IComparable, cho phÃ©p hiá»‡n láº¥y má»™t chuá»—i thÃ´ng tin báº±ng ToString vá»›i Ä‘á»‹nh dáº¡ng nÃ o Ä‘Ã³ nÃªn triá»ƒn khai giao diá»‡n IFormattable

```C#
using System;
namespace CS017_Generic
{
    public class Product : IComparable<Product>, IFormattable
    {
        public int ID { set; get; }
        public string Name { set; get; } // tÃªn
        public double Price { set; get; } // giÃ¡
        public string Origin { set; get; } // xuáº¥t xá»©

        public Product(int id, string name, double price, string origin)
        {
            ID = id; Name = name; Price = price; Origin = origin;
        }

        //Triá»ƒn khai IComparable, cho biáº¿t vá»‹ trÃ­ sáº¯p xáº¿p so vá»›i Ä‘á»‘i tÆ°á»£ng khÃ¡c
        // tráº£ vá» 0 - cÃ¹ng vá»‹ trÃ­; tráº£ vá» > 0 Ä‘á»©ng sau other; < 0 Ä‘á»©ng trÆ°á»›c trong danh sÃ¡ch
        public int CompareTo(Product other)
        {
            // sáº¯p xáº¿p vá» giÃ¡
            double delta = this.Price - other.Price;
            if (delta > 0)      // giÃ¡ lá»›n hÆ¡n xáº¿p trÆ°á»›c
                return -1;
            else if (delta < 0) // xáº¿p sau, giÃ¡ nhá» hÆ¡n
                return 1;
            return 0;

        }

        // Triá»ƒn khai IFormattable, láº¥y chuá»—i thÃ´ng tin cá»§a Ä‘á»‘i tÆ°á»£ng theo Ä‘á»‹nh dáº¡ng
        // format há»— trá»£ "O" vÃ  "N"
        public string ToString(string format, IFormatProvider formatProvider)
        {
            if (format == null) format = "O";
            switch (format.ToUpper())
            {
                case "O": // Xuáº¥t xá»© trÆ°á»›c
                    return $"Xuáº¥t xá»©: {Origin} - TÃªn: {Name} - GiÃ¡: {Price} - ID: {ID}";
                case "N": // TÃªn xá»© trÆ°á»›c
                    return $"TÃªn: {Name} - Xuáº¥t xá»©: {Origin} - GiÃ¡: {Price} - ID: {ID}";
                default: // QuÄƒng lá»—i náº¿u format sai
                    throw new FormatException("KhÃ´ng há»— trá»£ format nÃ y");
            }
        }

        // Náº¡p chá»“ng ToString
        override public string ToString() => $"{Name} - {Price}";

        // QuÃ¡ táº£i thÃªm ToString - láº¥y chá»—i thÃ´ng tin sáº£n pháº©m theo Ä‘á»‹nh dáº¡ng
        public string ToString(string format) => this.ToString(format, null);
    }
}
```

Khá»Ÿi táº¡o

- Äá»ƒ khá»Ÿi táº¡o má»™t danh sÃ¡ch rá»—ng, dÃ¹ng toÃ¡n tá»­ new

```C#
var numbers = new List<int>(); // danh sÃ¡ch sá»‘ nguyÃªn
var products = new List<Product>(); // danh sÃ¡ch Product
```

- Khá»Ÿi táº¡o danh sÃ¡ch cÃ³ sáºµn má»™t sá»‘ pháº§n tá»­, thÃ¬ cÃ¡c pháº§n tá»­ liá»‡t kÃª sau {}

```C#
var numbers = new List<int>() { 1, 2, 3, 4 }; // khá»Ÿi táº¡o 4 pháº§n tá»­
var products = new List<Product>() // khá»Ÿi táº¡o 1 pháº§n tá»­
{
new Product(1, "Iphone 6", 100, "Trung Quá»‘c")
};
```

ThÃªm (thÃªm vÃ o cuá»‘i)

- ThÃªm 1 pháº§n tá»­, dÃ¹ng Add

```C#
var p = new Product(2, "IPhone 7", 200, "Trung Quá»‘c");
products.Add(p); // ThÃªm p vÃ o cuá»‘i List
products.Add(new Product(3, "IPhone 8", 400, "Trung Quá»‘c")); // thÃªm Ä‘á»‘i tÆ°á»£ng má»›i vÃ o cuá»‘i List
```

- ThÃªm nhiá»u pháº§n tá»­ má»™t lÃºc (máº£ng cÃ¡c pháº§n tá»­), dÃ¹ng AddRange

```C#
var arrayProducts = new Product[] // Máº£ng 2 pháº§n tá»­
{
new Product(4, "Glaxy 7", 500, "Viá»‡t Nam"),
new Product(5, "Glaxy 8", 700, "Viá»‡t Nam"),
};
products.AddRange(arrayProducts); // Ná»‘i cÃ¡c pháº§n tá»­ cá»§a máº£ng vÃ o danh sÃ¡ch
```

ChÃ¨n

- ChÃ¨n thÃªm 1 hoáº·c nhiá»u pháº§n tá»­ vÃ o vá»‹ trÃ­ báº¥t kÃ¬, dÃ¹ng Insert(index, object) hoáº·c InsertRange(index, arrayObject)

```C#
products.Insert(3, new Product(6, "Macbook Pro", 1000, "Má»¹")); // chÃ¨n pháº§n tá»­ vÃ o vá»‹ trÃ­ index 3, (thá»© 4)
```

Äá»c

- Äá»c 1 pháº§n tá»­, dÃ¹ng indexer

```C#
var pro = products[2]; // Ä‘á»c pháº§n tá»­ cÃ³ index = 2
Console.WriteLine(pro.ToString());
```

- Äá»c nhiá»u pháº§n tá»­ (duyá»‡t danh sÃ¡ch), dÃ¹ng for - foreach

```C#
// products.Count = láº¥y tá»•ng pháº§n tá»­ trong List
for (int i = 1; i < products.Count; i++)
{
    var pi = products[i - 1];
    Console.WriteLine(pi.ToString());
}

// Duyá»‡t qua cÃ¡c pháº§n tá»­ báº±ng foreach
foreach (var pi in products)
{
    Console.WriteLine(pi.ToString());
}
```

XÃ³a

| TÃªn                       | Ã nghÄ©a                                            |
| ------------------------- | -------------------------------------------------- |
| Remove(index)             | XÃ³a 1 pháº§n tá»­                                      |
| RemoveRange(index, count) | XÃ³a nhiá»u pháº§n tá»­                                  |
| RemoveAll() hoáº·c Clear()  | XÃ³a toÃ n bá»™ danh sÃ¡ch                              |
| Remove(object)            | XÃ³a 1 pháº§n tá»­ cÃ³ tham chiáº¿u cá»¥ thá»ƒ trong danh sÃ¡ch |

TÃ¬m kiáº¿m

| TÃªn                | Ã nghÄ©a                                                        |
| ------------------ | -------------------------------------------------------------- |
| IndexOf(obj)       | TÃ¬m index cá»§a Ä‘á»‘i tÆ°á»£ng trong List                             |
| LastIndexOf(obj)   | TÃ¬m index cá»§a pháº§n tá»­ cuá»‘i cÃ¹ng cÃ³ giÃ¡ trá»‹ báº±ng obj trong List |
| FindIndex          | TÃ¬m kiáº¿m tráº£ vá» Index                                          |
| FindLastIndex      | TÃ¬m kiáº¿m tráº£ vá» Index cuá»‘i                                     |
| Find(Predicate)    | TÃ¬m kiáº¿m tráº£ vá» pháº§n tá»­                                        |
| FindAll(Predicate) | TÃ¬m kiáº¿m tráº£ vá» danh sÃ¡ch pháº§n tá»­                              |
| FindLast           | TÃ¬m kiáº¿m tráº£ vá» pháº§n tá»­ cuá»‘i tÃ¬m tháº¥y                          |

- Tham sá»‘ Predicate truyá»n vÃ o Find, FindAll lÃ  delegate bool Predicate<in T>(T obj) tráº£ vá» true lÃ  pháº§n tá»­ phÃ¹ há»£p tráº£ vá»

```C#
// Delegate tráº£ vá» true khi tÃªn báº±ng "Glaxy 8"
(Product ob) =>
{
    return (ob.Name == "Glaxy 8");
}

Product foundpr1 = products.Find(
(Product ob) => { return (ob.Name == "Glaxy 8"); }
);
if (foundpr1 != null)
    Console.WriteLine("(found) " + foundpr1.ToString("O"));
// (found) Xuáº¥t xá»©: Viá»‡t Nam - TÃªn: Glaxy 8 - GiÃ¡: 700 - ID: 5

// tÃ¬m index cá»§a Ä‘á»‘i tÆ°á»£ng cÃ³ xuáº¥t xá»© lÃ  "Trung Quá»‘c"
var ifound = products.FindIndex(x => x.Origin == "Trung Quá»‘c");

// tÃ¬m cÃ¡c sáº£n pháº©m cÃ³ giÃ¡ trÃªn 100
List<Product> p_100 = products.FindAll(product => product.Price > 100)
```

- Muá»‘n tÃ¹y biáº¿n cao hÆ¡n Delegate, Ä‘á»ƒ tÃ¬m kiáº¿m theo tham sá»‘ tÃ¹y chá»n, cÃ³ thá»ƒ Ä‘á»ƒ Delegate trÃªn vÃ o lá»›p chá»©c nÄƒng

```C#
public class SearchNameProduct
{
    string namesearch;
    public SearchNameProduct(string name)
    {
        namesearch = name;
    }
    // HÃ m gÃ¡n cho delegage
    public bool search(Product p)
    {
        return p.Name == namesearch;
    }
}
```

```C#
// Sá»­ dá»¥ng
Product pr1 = products.Find((new SearchNameProduct("Glaxy 8")).search); // TÃ¬m sáº£n pháº©m cÃ³ tÃªn Glaxy 8
Product pr2 = products.Find((new SearchNameProduct("IPhone 6")).search); // TÃ¬m sáº£n pháº©m cÃ³ tÃªn IPhone 6
```

Sáº¯p xáº¿p

- Äá»ƒ sáº¯p xáº¿p cÃ¡c pháº§n tá»­ trong danh sÃ¡ch, náº¿u pháº§n tá»­ Ä‘Ã³ cÃ³ triá»ƒn khai giao diá»‡n IComparable thÃ¬ chá»‰ viá»‡c gá»i Sort() Ä‘á»ƒ cÃ³ danh sÃ¡ch theo thá»© tá»±.

```C#
products.Sort();
```

- CÃ³ thá»ƒ tÃ¹y biáº¿n cÃ¡ch thá»©c sáº¯p xáº¿p báº±ng cÃ¡ch cung cáº¥p hÃ m callback dáº¡ng deleage hai tham sá»‘ kiá»ƒu cÃ¹ng vá»›i kiá»ƒu pháº§n tá»­ cho Search

```C#
products.Sort(
(p1, p2) =>
{
    if (p1.ID > p2.ID)
        return 1;
    else if (p1.ID == p2.ID)
        return 0;
    return -1;
}
);
```

_â—Tráº£ vá» > 0 thÃ¬ pháº§n tá»­ hiá»‡n táº¡i xáº¿p sau pháº§n tá»­ tham sá»‘_

1 sá»‘ thuá»™c tÃ­nh khÃ¡c

| TÃªn           | Ã nghÄ©a                      |
| ------------- | ---------------------------- |
| Contains(obj) | kiá»ƒm tra cÃ³ chá»©a pháº§n tá»­ obj |
| Reverse()     | Ä‘áº£o thá»© tá»± danh sÃ¡ch         |
| ToArray()     | copy cÃ¡c pháº§n tá»­ ra máº£ng     |

## SortedList

Lá»›p SortedList<TKey, TValue> sáº¯p xáº¿p dá»¯ liá»‡u dá»±a trÃªn má»™t key, kiá»ƒu Ä‘á» lÃ m key lÃ  báº¥t ká»³.

SortedList Ä‘Æ°á»£c Ä‘á»‹nh nghÄ©a á»Ÿ namespace: System.Collections. Äá»ƒ sá»­ dá»¥ng cáº§n náº¡p

```C#
using System.Collections;
using System.Collections.Generic;
```

Má»™t Ä‘á»‘i tÆ°á»£ng dá»¯ liá»‡u lÆ°u vÃ o SortedList dÆ°á»›i dáº¡ng cáº·p key/value, truy cáº­p Ä‘áº¿n pháº§n tá»­ thÃ´ng qua key hoáº·c thÃ´ng qua vá»‹ trÃ­ (index) cá»§a dá»¯ liá»‡u trong danh sÃ¡ch

Thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c

| TÃªn                 | Ã nghÄ©a                                                 |
| ------------------- | ------------------------------------------------------- |
| Count               | Thuá»™c tÃ­nh cho biáº¿t sá»‘ pháº§n tá»­                          |
| [key]               | Indexer truy cáº­p Ä‘áº¿n pháº§n tá»­ cÃ³ key                     |
| Keys                | Thuá»™c tÃ­nh lÃ  danh sÃ¡ch cÃ¡c key trong danh sÃ¡ch sáº¯p xáº¿p |
| Values              | Thuá»™c tÃ­nh láº¥y danh sÃ¡ch cÃ¡c giÃ¡ trá»‹ trong danh sÃ¡ch    |
| Add(key, value)     | ThÃªm má»™t pháº§n tá»­ vÃ o danh sÃ¡ch                          |
| Remove(key)         | XÃ³a pháº§n tá»­ báº±ng key cá»§a nÃ³                             |
| Clear()             | Loáº¡i bá» táº¥t cáº£ cÃ¡c pháº§n tá»­ khá»i danh sÃ¡ch               |
| ContainKey(key)     | Kiá»ƒm tra cÃ³ pháº§n tá»­ nÃ o cÃ³ khÃ³a lÃ  key                  |
| ContainValue(value) | Kiá»ƒm tra cÃ³ pháº§n tá»­ nÃ o cÃ³ giÃ¡ trá»‹ lÃ  value             |
| IndexOfKey(key)     | Láº¥y chá»‰ sá»‘ cá»§a pháº§n tá»­ cÃ³ khÃ³a lÃ  key                   |
| IndexOfValue(value) | Láº¥y chá»‰ sá»‘ cá»§a pháº§n tá»­ cÃ³ giÃ¡ trá»‹ lÃ  value              |

```C#
// Khá»Ÿi táº¡o SortedList
var products = new SortedList<string, string>();
products.Add("Iphone 6", "P-IPHONE-6"); // ThÃªm vÃ o pháº§n tá»­ má»›i (key, value)
products.Add("Laptop Abc", "P-LAP");
products["Äiá»‡n thoáº¡i Z"] = "P-DIENTHOAI"; // ThÃªm vÃ o pháº§n tá»­ báº±ng Indexer
products["Tai nghe XXX"] = "P-TAI"; // ThÃªm vÃ o pháº§n tá»­ báº±ng Indexer

// Duyá»‡t qua cÃ¡c pháº§n tá»­, má»—i pháº§n tá»­ láº¥y key/value lÆ°u trong biáº¿n
// kiá»ƒu KeyValuePair
foreach (KeyValuePair<string, string> p in products)
{
    Console.WriteLine($" {p.Key} - {p.Value}");
}

// Äá»c value khi biáº¿t key
string productName = "Tai nghe XXX";
Console.WriteLine($"{productName} cÃ³ mÃ£ lÃ  {products[productName]}");

// Cáº­p nháº­t giÃ¡ trá»‹ vÃ o pháº§n tá»­ theo key
products[productName] = "P-TAI-UPDATED";

// Duyá»‡t qua cÃ¡c giÃ¡ trá»‹
foreach (var product_code in products.Values)
{
    Console.WriteLine($"--- {product_code}");
}

// Duyá»‡t qua cÃ¡c key
foreach (var product_name in products.Keys)
{
    Console.WriteLine($"... {product_name}");
}
```

## Queue

HÃ ng Ä‘á»£i lÃ  mÃ´ hÃ¬nh FIFO (first in, first out - vÃ o trÆ°á»›c, ra trÆ°á»›c hay Ä‘áº¿n trÆ°á»›c Ä‘Æ°á»£c phá»¥c vá»¥ trÆ°á»›c)

.NET cung cáº¥p lá»›p Queue<T> Ä‘á»ƒ giáº£ quyáº¿t giáº£i thuáº­t hÃ ng Ä‘á»£i

Thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c

| TÃªn     | Ã nghÄ©a                                                                           |
| ------- | --------------------------------------------------------------------------------- |
| Count   | Thuá»™c tÃ­nh láº¥y tá»•ng sá»‘ pháº§n tá»­ trong hÃ ng                                         |
| Enqueue | vÃ o xáº¿p hÃ ng - Ä‘Æ°a pháº§n tá»­ vÃ o cuá»‘i hÃ ng Ä‘á»£i                                      |
| Dequeue | Ä‘á»c - vÃ  loáº¡i ngay pháº§n tá»­ á»Ÿ Ä‘áº§u hÃ ng Ä‘á»£i - lá»—i náº¿u hÃ ng Ä‘á»£i khÃ´ng cÃ³ pháº§n tá»­ nÃ o |
| Peek    | Ä‘á»c pháº§n tá»­ Ä‘áº§u hÃ ng Ä‘á»£i                                                          |

```C#
Queue<string> hoso_canxuly = new Queue<string>();

hoso_canxuly.Enqueue("Há»“ sÆ¡ A"); // Há»“ sÆ¡ xáº¿p thá»© nháº¥t trong hÃ ng Ä‘á»£i
hoso_canxuly.Enqueue("Há»“ sÆ¡ B"); // Há»“ sÆ¡ xáº¿p thá»© hai
hoso_canxuly.Enqueue("Há»“ sÆ¡ C");

// Láº¥y há»“ sÆ¡ xáº¿p trÆ°á»›c xá»­ lÃ½ trÆ°á»›c, cho Ä‘áº¿n háº¿t
while (hoso_canxuly.Count > 0)
{
    var hs = hoso_canxuly.Dequeue();
    Console.WriteLine($"Xá»­ lÃ½ {hs}, cÃ²n láº¡i {hoso_canxuly.Count}");
}

// Xá»­ lÃ½ Há»“ sÆ¡ A, cÃ²n láº¡i 2
// Xá»­ lÃ½ Há»“ sÆ¡ B, cÃ²n láº¡i 1
// Xá»­ lÃ½ Há»“ sÆ¡ C, cÃ²n láº¡i 0
```

## Stack

NgÄƒn xáº¿p lÃ  mÃ´ hÃ¬nh LIFO (last in, first out - vÃ o sau thÃ¬ ra trÆ°á»›c)

.NET nÃ³ cung cáº¥p lá»›p Stack<T> Ä‘á»ƒ thá»±c hiá»‡n giáº£i thuáº­t ngÄƒn xáº¿p

Thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c

| TÃªn      | Ã nghÄ©a                                       |
| -------- | --------------------------------------------- |
| Count    | Thuá»™c tÃ­nh láº¥y tá»•ng sá»‘ pháº§n tá»­ trong hÃ ng     |
| Push     | Ä‘áº©y (thÃªm) má»™t pháº§n tá»­ vÃ o Ä‘á»‰nh stack         |
| Pop      | Ä‘á»c - xÃ³a pháº§n tá»­ Ä‘á»‰nh stack                  |
| Peek     | Ä‘á»c pháº§n tá»­ Ä‘á»‰nh stack                        |
| Contains | kiá»ƒm tra má»™t pháº§n tá»­ cÃ³ trong stack hay khÃ´ng |

```C#
Queue<string> hoso_canxuly = new Queue<string>();

hoso_canxuly.Enqueue("Há»“ sÆ¡ A"); // Há»“ sÆ¡ xáº¿p thá»© nháº¥t trong hÃ ng Ä‘á»£i
hoso_canxuly.Enqueue("Há»“ sÆ¡ B"); // Há»“ sÆ¡ xáº¿p thá»© hai
hoso_canxuly.Enqueue("Há»“ sÆ¡ C");

// Láº¥y há»“ sÆ¡ xáº¿p trÆ°á»›c xá»­ lÃ½ trÆ°á»›c, cho Ä‘áº¿n háº¿t
while (hoso_canxuly.Count > 0)
{
    var hs = hoso_canxuly.Dequeue();
    Console.WriteLine($"Xá»­ lÃ½ {hs}, cÃ²n láº¡i {hoso_canxuly.Count}");
}

// Bá»‘c dá»¡ Sáº£n pháº©m C / cÃ²n láº¡i 2
// Bá»‘c dá»¡ Sáº£n pháº©m B / cÃ²n láº¡i 1
// Bá»‘c dá»¡ Sáº£n pháº©m A / cÃ²n láº¡i 0
```

## LinkedList

.NET cung cáº¥p lá»›p LinkedList<T> lÃ  loáº¡i danh sÃ¡ch liÃªn káº¿t kÃ©p (tá»« Ä‘Ã¢y gá»i táº¯t lÃ  danh sÃ¡ch liÃªn káº¿t)

Danh sÃ¡ch liÃªn káº¿t lÃ  má»™t danh sÃ¡ch chá»©a cÃ¡c pháº§n tá»­, má»—i pháº§n tá»­ trong loáº¡i danh sÃ¡ch nÃ y Ä‘Æ°á»£c gá»i lÃ  má»™t nÃºt (Node). Má»—i nÃºt ngoÃ i dá»¯ liá»‡u cá»§a nÃºt Ä‘Ã³, nÃ³ sáº½ gá»“m hai biáº¿n - má»™t biáº¿n tham chiáº¿u Ä‘áº¿n Node phÃ­a trÆ°á»›c, má»™t nÃºt tham chiáº¿u Ä‘áº¿n nÃºt phÃ­a sau.

_â—Danh sÃ¡ch liÃªn káº¿t .NET sá»­ dá»¥ng lÃ  loáº¡i danh sÃ¡ch liÃªn káº¿t Ä‘Ã´i_

Thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c

| TÃªn                | Ã nghÄ©a                                                                              |
| ------------------ | ------------------------------------------------------------------------------------ |
| List               | Thuá»™c tÃ­nh - tham chiáº¿u (trá») Ä‘áº¿n LinkedList                                         |
| Value              | Thuá»™c tÃ­nh - lÃ  dá»¯ liá»‡u cá»§a Node                                                     |
| Next               | Thuá»™c tÃ­nh - tham chiáº¿u (trá») Ä‘áº¿n NÃšT tiáº¿p theo (phÃ­a sau) - null thÃ¬ nÃ³ lÃ  nÃºt cuá»‘i |
| Previous           | Thuá»™c tÃ­nh - tham chiáº¿u (trá») Ä‘áº¿n NÃšT phÃ­a trÆ°á»›c - null thÃ¬ nÃ³ lÃ  nÃºt Ä‘áº§u tiÃªn       |
| Count              | Sá»‘ nÃºt trong danh sÃ¡ch                                                               |
| First              | NÃºt Ä‘áº§u tiÃªn cá»§a danh sÃ¡ch                                                           |
| Last               | NÃºt Ä‘áº§u tiÃªn cá»§a danh sÃ¡ch                                                           |
| AddFirst(T)        | ChÃ¨n má»™t nÃºt cÃ³ dá»¯ liá»‡u T vÃ o Ä‘áº§u danh sÃ¡ch                                          |
| AddLast(T)         | ChÃ¨n má»™t nÃºt cÃ³ dá»¯ liá»‡u T vÃ o cuá»‘i danh sÃ¡ch                                         |
| AddAfter(Node, T)  | ChÃ¨n nÃºt vá»›i dá»¯ liá»‡u T, vÃ o sau nÃºt Node (kiá»ƒu LinkedListNode)                       |
| AddBefore(Node, T) | ChÃ¨n nÃºt vá»›i dá»¯ liá»‡u T, vÃ o trÆ°á»›c nÃºt Node (kiá»ƒu LinkedListNode)                     |
| Clear()            | XÃ³a toÃ n bá»™ danh sÃ¡ch                                                                |
| Contains(T)        | Kiá»ƒm tra xem cÃ³ nÃºt vá»›i giÃ¡ trá»‹ dá»¯ liá»‡u báº±ng T                                       |
| Remove(T)          | XÃ³a nÃºt cÃ³ dá»¯ liá»‡u báº±ng T                                                            |
| RemoveFirst()      | XÃ³a nÃºt Ä‘áº§u tiÃªn                                                                     |
| RemoveLast()       | XÃ³a nÃºt cuá»‘i cÃ¹ng                                                                    |
| Find(T)            | TÃ¬m má»™t nÃºt                                                                          |

```C#
LinkedList<string> cacbaihoc = new LinkedList<string>();

cacbaihoc.AddFirst("BÃ i há»c 3"); // thÃªm vÃ o Ä‘áº§u danh sach
cacbaihoc.AddLast("BÃ i há»c 4"); // thÃªm vÃ o cuá»‘i
cacbaihoc.AddFirst("BÃ i há»c 2");
cacbaihoc.AddFirst("BÃ i há»c 1");

// Láº¥y pháº§n tá»­ Ä‘áº§u tiÃªn, sau Ä‘Ã³ duyá»‡t Ä‘áº¿n cuá»‘i
LinkedListNode<string> node = cacbaihoc.First;
while (node != null)
{
    Console.WriteLine(node.Value);
    node = node.Next; // node gÃ¡n báº±ng nÃºt sau nÃ³
}

// Láº¥y pháº§n tá»­ cuá»‘i cÃ¹ng, sau Ä‘Ã³ duyá»‡t vá» pháº§n tá»­ Ä‘áº§u tiÃªn
node = cacbaihoc.Last;
while (node != null)
{
    Console.WriteLine(node.Value);
    node = node.Previous; // node gÃ¡n báº±ng nÃºt phÃ­a trÆ°á»›c nÃ³
}
```

## Dictionary - SortedDictionary

Lá»›p Dictionary<Tkey,TValue> khÃ¡ giá»‘ng SortedList, Dictionary Ä‘Æ°á»£c thiáº¿t káº¿ vá»›i má»¥c Ä‘Ã­ch tÄƒng hiá»‡u quáº£ vá»›i táº­p dá»¯ liá»‡u lá»›n, phá»©c táº¡p.

Má»™t Ä‘á»‘i tÆ°á»£ng dá»¯ liá»‡u lÆ°u vÃ o Dictionary dÆ°á»›i dáº¡ng cáº·p key/value, truy cáº­p Ä‘áº¿n pháº§n tá»­ thÃ´ng qua key hoáº·c thÃ´ng qua vá»‹ trÃ­ (index) cá»§a dá»¯ liá»‡u trong danh sÃ¡ch

Thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c

| TÃªn                 | Ã nghÄ©a                                     |
| ------------------- | ------------------------------------------- |
| Count               | Thuá»™c tÃ­nh cho biáº¿t sá»‘ pháº§n tá»­              |
| [key]               | Indexer truy cáº­p Ä‘áº¿n pháº§n tá»­ cÃ³ key         |
| Keys                | Thuá»™c tÃ­nh lÃ  danh sÃ¡ch cÃ¡c key             |
| Values              | Thuá»™c tÃ­nh láº¥y danh sÃ¡ch cÃ¡c giÃ¡ trá»‹        |
| Add(key, value)     | ThÃªm má»™t pháº§n tá»­ vÃ o Dictionary             |
| Remove(key)         | XÃ³a pháº§n tá»­ báº±ng key cá»§a nÃ³                 |
| Clear()             | Loáº¡i bá» táº¥t cáº£ cÃ¡c pháº§n tá»­                  |
| ContainKey(key)     | Kiá»ƒm tra cÃ³ pháº§n tá»­ nÃ o cÃ³ khÃ³a lÃ  key      |
| ContainValue(value) | Kiá»ƒm tra cÃ³ pháº§n tá»­ nÃ o cÃ³ giÃ¡ trá»‹ lÃ  value |

```C#
// Khá»Ÿi táº¡o vá»›i 2 pháº§n tá»­
Dictionary<string, int> sodem = new Dictionary<string, int>()
{
    ["one"] = 1,
    ["tow"] = 2,
};
// ThÃªm hoáº·c cáº­p nháº­t
sodem["three"] = 3;

var keys = sodem.Keys;
foreach (var k in keys)
{
    var value = sodem[k];
    Console.WriteLine($"{k} = {value}");
}
```

SortedDictionary

- Lá»›p SortedDictionary<Tkey,TValue> sá»­ dá»¥ng, khai bÃ¡o vÃ  khá»Ÿi táº¡o ... giá»‘ng nhÆ° lá»›p Dictionary<Tkey,TValue>.

- Náº¿u dÃ¹ng SortedDictionary thÃ¬ cÃ¡c cÃ¡c pháº§n tá»­ Ä‘Æ°á»£c lÆ°u vÃ  sáº¯p xáº¿p theo key, thÃ­ch há»£p khi tÄƒng tá»‘c chÃ¨n, xÃ³a, tÃ¬m kiáº¿m theo key.

## HashSet

HashSet lÃ  táº­p há»£p danh sÃ¡ch khÃ´ng cho phÃ©p trÃ¹ng giÃ¡ trá»‹

HashSet<T> khÃ¡c vá»›i cÃ¡c collection khÃ¡c lÃ  nÃ³ cung cáº¥p cÆ¡ cháº¿ Ä‘Æ¡n giáº£n nháº¥t Ä‘á»ƒ lÆ°u cÃ¡c giÃ¡ trá»‹, nÃ³ khÃ´ng chá»‰ má»¥c thá»© tá»± vÃ  cÃ¡c pháº§n tá»­ khÃ´ng sáº¯p xáº¿p theo thá»© tá»± nÃ o

HashSet<T> cung cáº¥p hiá»‡u nÄƒng cao cho cÃ¡c tÃ¡c vá»¥ tÃ¬m kiáº¿m, thÃªm vÃ o, xÃ³a bá» ...

Thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c

| TÃªn              | Ã nghÄ©a                                  |
| ---------------- | ---------------------------------------- |
| Count            | Thuá»™c tÃ­nh cho biáº¿t sá»‘ pháº§n tá»­           |
| Add(T)           | ThÃªm pháº§n tá»­ vÃ o HashSet                 |
| Remove(T)        | XÃ³a pháº§n tá»­ khá»i HashSet                 |
| Clear()          | XÃ³a táº¥t cáº£ cÃ¡c pháº§n tá»­                   |
| Contains(T)      | Kiá»ƒm tra xem cÃ³ pháº§n tá»­ trong HashSet    |
| IsSubsetOf(c)    | Kiá»ƒm tra xem cÃ³ lÃ  táº­p con cá»§a HashSet c |
| IsSupersetOf(c)  | Kiá»ƒm tra xem cÃ³ chá»©a táº­p HashSet c       |
| UnionWith(c)     | Há»£p vá»›i táº­p HashSet c                    |
| IntersectWith(c) | Giao vá»›i táº­p HashSet c                   |
| ExceptWith(c)    | Loáº¡i bá» háº¿t cÃ¡c pháº§n tá»­ chung vá»›i c      |

```C#
HashSet > int < hashset1 = new HashSet> int < () { 5,2,3,4};

Console.WriteLine($"Pháº§n tá»­ trong hashset1 {hashset1.Count}");
foreach (var v in hashset1)
{
    Console.Write(v + " ");
}

HashSet > int < hashset2 = new HashSet> int < ();
hashset2.Add(3);
hashset2.Add(4);
if (hashset1.IsSupersetOf(hashset2))
    Console.WriteLine($"hashset1 lÃ  táº­p chá»©a hashset2");
```

## ObservableCollection

Lá»›p Generic ObservableCollection<T> lÃ  má»™t táº­p há»£p tÆ°Æ¡ng tá»± nhÆ° List<T> ..., tá»©c lÃ  nÃ³ mÃ´ táº£ má»™t táº­p há»£p dá»¯ liá»‡u cÃ³ thá»ƒ thay Ä‘á»•i sá»‘ lÆ°á»£ng báº±ng cÃ¡c phÆ°Æ¡ng thá»©c quen thuá»™c nhÆ° Add(), Remove(), Clear() ...

ObservableCollection<T> cung cáº¥p thÃªm sá»± kiá»‡n thÃ´ng bÃ¡o nhi sá»‘ lÆ°á»£ng pháº§n tá»­ thay Ä‘á»•i nhÆ° thÃªm, bá»›t ...(nghÄ©a lÃ  giÃ¡m sÃ¡t Ä‘Æ°á»£c biáº¿n Ä‘á»™ng pháº§n tá»­).

CÃ¡c sá»± kiá»‡n event nÃ y cÃ³ tÃªn lÃ  CollectionChanged, trong tham sá»‘ mÃ  sá»± kiá»‡n gá»­i Ä‘áº¿n, e.Action cÃ³ cho biáº¿t hÃ nh Ä‘á»™ng thay Ä‘á»•i trÃªn táº­p há»£p lÃ  gÃ¬

```C#
using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Collections.Specialized;
namespace CS019_ObserableCollection
{
    class Program
    {
        static void Main(string[] args)
        {
            //Táº¡o táº­p há»£p chá»©a cÃ¡c chuá»—is
            ObservableCollection obs = new ObservableCollection();

            // Báº¯t sá»± kiá»‡n thi thay Ä‘á»•i obs
            obs.CollectionChanged += change;

            //Thay cÃ¡c pháº§n tá»­ táº­p há»£p
            obs.Add("ZTest1");
            obs.Add("DTest2");
            obs.Add("ATest3");
            obs[2] = "AAAAA";

            obs.RemoveAt(1);
            obs.Clear();

        }

        // PhÆ°Æ¡ng thá»©c nháº­n sá»± kiá»‡n CollectionChanged
        private static void change(object sender, NotifyCollectionChangedEventArgs e)
        {
            switch (e.Action)
            {
                case NotifyCollectionChangedAction.Add:
                    foreach (String s in e.NewItems)
                        Console.WriteLine($"ThÃªm :  {s}");
                    break;

                case NotifyCollectionChangedAction.Reset:
                    Console.WriteLine("Clear");
                    break;

                case NotifyCollectionChangedAction.Remove:
                    foreach (String s in e.OldItems)
                        Console.WriteLine($"Remove :  {s}");
                    break;
                case NotifyCollectionChangedAction.Replace:
                    Console.WriteLine("Repaced - " + e.NewItems[0]);
                    break;
            }
        }
    }
}
```

á»¨ng dá»¥ng cá»§a ObservableCollection trong WPF ráº¥t phá»• biáº¿n khi binding vá»›i má»™t controller nhÆ° TreeView, ListView, DataGrid ... Khi Ä‘Ã³ viá»‡c thay Ä‘á»•i sá»‘ pháº§n tá»­ trong táº­p há»£p, thÃ¬ hiá»‡n thá»‹ trong cÃ¡c controller cÅ©ng tá»± thÃªm / bá»›t ... theo

Khi káº¿t há»£p dÃ¹ng INotifyPropertyChanged Ä‘á»ƒ xÃ¢y dá»±ng pháº§n tá»­ trong táº­p há»£p, thÃ¬ thay Ä‘á»•i thuá»™c tÃ­nh cá»§a pháº§n tá»­ cÅ©ng tá»± Ä‘á»™ng cáº­p nháº­t vÃ o cÃ¡c controller

_â—Khi dÃ¹ng ObservableCollection lÃ m ItemSource cho cÃ¡c Controller trong WPF nhÆ° TreeView, DataGrid ... thÃ¬ nÃ³ Ä‘Ã£ tá»± Ä‘á»™ng báº¯t cÃ¡c sá»± kiá»‡n CollectionChanged, PropertyChanged_

**_WPF sáº½ Ä‘Æ°á»£c nÃ³i tá»›i sau_**

## IDisposable

Trong thÆ° viá»‡n .NET Ä‘Æ°a ra má»™t giao diá»‡n interface cÃ³ tÃªn lÃ  IDisposable (System.IDisposable). Giao diá»‡n nÃ y chá»‰ cÃ³ Ä‘á»‹nh nghÄ©a má»™t phÆ°Æ¡ng thá»©c:

```C#
public void Dispose ();
```

Trong .NET háº§u háº¿t cÃ¡c loáº¡i tÃ i nguyÃªn lÃ  Ä‘Æ°á»£c quáº£n lÃ½ bá»Ÿi CLR cá»§a há»‡ thá»‘ng .NET, nÃªn cÃ¡c tÃ i nguyÃªn, Ä‘á»‘i tÆ°á»£ng khÃ´ng cÃ²n tham chiáº¿u Ä‘áº¿n nÃ³ sáº½ tá»± Ä‘á»™ng Ä‘Æ°á»£c CLR thu há»“i (GC)

Váº«n cÃ³ nhá»¯ng loáº¡i tÃ i nguyÃªn mÃ  CLR .NET khÃ´ng quáº£n lÃ½ Ä‘Æ°á»£c nhÆ°:

- Má»Ÿ file - stream
- CÃ¡c káº¿t ná»‘i máº¡ng, káº¿t ná»‘i Ä‘áº¿n CSDL ...
- Nhá»¯ng vÃ¹ng bá»™ nhá»› khÃ´ng quáº£n lÃ½ Ä‘Æ°á»£c, cÃ¡c font chá»¯ ...

Vá»›i nhá»¯ng loáº¡i tÃ i nguyÃªn nÃ y, .NET khÃ´ng biáº¿t tá»± giáº£i phÃ³ng nÃ³ tháº¿ nÃ o, nÃªn pháº£i cÃ³ má»™t cÆ¡ cháº¿ chá»§ Ä‘á»™ng lÃ m viá»‡c nÃ y khi khÃ´ng cÃ²n dÃ¹ng Ä‘áº¿n ná»¯a.

Má»¥c Ä‘ich code viáº¿t trong phÆ°Æ¡ng thá»©c Dispose() lÃ  cÃ¡c thao tÃ¡c Ä‘á»ƒ giáº£i phÃ³ng cÃ¡c tÃ i nguyÃªn chiáº¿m giá»¯ - khi Ä‘á»‘i tÆ°á»£ng bá»‹ há»§y (cá»¥ thá»ƒ lÃ  cÃ¡c dá»¯ liá»‡u khÃ´ng Ä‘Æ°á»£c CLT quáº£n lÃ½)

Khi má»™t lá»›p nÃ o Ä‘Ã³, triá»ƒn khai giao diá»‡n IDisposable thÃ¬ cÃ³ thá»ƒ dÃ¹ng vá»›i using

```C#
using (obj_1, obj_2 ... obj_n) {
//cÃ¡c cÃ¢u lá»‡nh trong Using
}
```

- cÃ¡c obj_1, obj_2 ... lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng cá»§a nhá»¯ng lá»›p triá»ƒn khai giao diá»‡n IDisposabe

```C#
class A : IDisposable
{
    bool resource = true;
    public void Dispose()
    {
        Console.WriteLine("PhÆ°Æ¡ng thá»©c nÃ y gá»i tá»± Ä‘á»™ng khi háº¿t using");
        resource = false; // giáº£i phÃ³ng tÃ i nguyÃªn
    }
}

// Sá»­ dá»¥ng Using vá»›i lá»›p trÃªn
using (var a = new A())
{
    Console.WriteLine("Do something ...");
}

// Káº¿t quáº£
// Do something ...
// PhÆ°Æ¡ng thá»©c nÃ y gá»i tá»± Ä‘á»™ng khi háº¿t using
```

_â—phÆ°Æ¡ng thá»©c Dispose() sáº½ tá»± Ä‘á»™ng cháº¡y khi háº¿t using_

Khi sá»­ dá»¥ng Ä‘á»‘i tÆ°á»£ng triá»ƒn khai IDisposable mÃ  khÃ´ng dÃ¹ng using, thÃ¬ pháº£i chá»§ Ä‘á»™ng gá»i thá»§ cÃ´ng Dispose khi tÃ i nguyÃªn khÃ´ng dÃ¹ng Ä‘áº¿n

Khi má»™t lá»›p vá»«a cÃ³ hÃ m há»§y vá»«a cÃ³ Dispose() - tá»©c triá»ƒn khai IDisposable lÃ : thao tÃ¡c giáº£i phÃ³ng tÃ i nguyÃªn cÃ³ thá»ƒ thá»±c hiá»‡n hai láº§n - má»™t láº§n khi ra khá»i using - má»™t láº§n Ä‘á»‘i tÆ°á»£ng máº¥t tham chiáº¿u. Hoáº·c khi Ä‘á»‘i tÆ°á»£ng chá»§ Ä‘á»™ng gá»i Dispose nhiá»u láº§n. Äiá»u nÃ y cÃ³ thá»ƒ dáº«n Ä‘áº¿n lá»—i.

CÃ¡ch giáº£i quyáº¿t lÃ  cáº§n cÃ³ biáº¿n lÆ°u láº¡i tráº¡ng thÃ¡i cho biáº¿t Dispose Ä‘Ã£ Ä‘Æ°á»£c thi hÃ nh hay chÆ°a.

```C#
public class WriteData : IDisposable
{
    // trÆ°á»ng lÆ°u tráº¡ng thÃ¡i Dispose
    private bool m_Disposed = false;

    private StreamWriter stream;

    public WriteData(string filename)
    {
        stream = new StreamWriter(filename, true);
    }

    // PhÆ°Æ¡ng thá»©c triá»ƒn khai tá»« giao diá»‡n
    public void Dispose()
    {
        Dispose(true);
        GC.SuppressFinalize(this);
    }

    // Náº¿u disposing = true -> ÄÆ°á»£c thi hÃ nh do gá»i trá»±c tiáº¿p (do Dispose gá»i) tÃ i nguyÃªn managed, unmanaged Ä‘Æ°á»£c giáº£i phÃ³ng
    // náº¿u disposing = fale -> ÄÆ°á»£c thi hÃ nh bá»Ÿi phÆ°Æ¡ng thá»©c há»§y, chá»‰ cáº§n giáº£i phÃ³ng cÃ¡c tÃ i nguyÃªn unmanaged.
    protected virtual void Dispose(bool disposing)
    {
        if (!m_Disposed)
        {
            if (disposing)
            {
                // cÃ¡c Ä‘á»‘i tÆ°á»£ng cÃ³ Dispose gá»i á»Ÿ Ä‘Ã¢y
                stream.Dispose();
            }

            // giáº£i phÃ³ng cÃ¡c tÃ i nguyÃªn khÃ´ng quáº£n lÃ½ Ä‘Æ°á»£c cá»­a lá»›p (unmanaged)
            m_Disposed = true;
        }
    }

    ~WriteData()
    {
        Dispose(false);
    }
}
```

## File

DriveInfo (Ä‘á»c thÃ´ng tin á»• Ä‘Ä©a)

- ThÆ° viá»‡n .NET cung cáº¥p lá»›p DriveInfo táº¡i namespace System.IO giÃºp Ä‘á»c thÃ´ng tin cÃ¡c á»• Ä‘Ä©a cÃ³ trong há»‡ thá»‘ng

- PhÆ°Æ¡ng thá»©c DriveInfo.GetDrives() tráº£ vá» máº£ng gá»“m cÃ¡c Ä‘á»‘i tÆ°á»£ng DriveInfo, má»—i Ä‘á»‘i tÆ°á»£ng chá»©a thÃ´ng tin vá» má»™t á»• Ä‘Ä©a

- Thuá»™c tÃ­nh

  | TÃªn                | Ã nghÄ©a                                                                                                 |
  | ------------------ | ------------------------------------------------------------------------------------------------------- |
  | IsReady            | true á»• Ä‘Ä©a á»Ÿ tráº¡ng thÃ¡i sáºµn sÃ ng (hoáº¡t Ä‘á»™ng) - vÃ­ dá»¥ á»• Ä‘Ä©a CD náº¿u khÃ´ng cÃ³ Ä‘Ä©a thÃ¬ khÃ´ng sáºµn sÃ ng false |
  | DriveType          | kiá»ƒu á»• Ä‘Ä©a (System.IO.DriveType) : CDRom, Fixed, Network, NoRootDirectory, Ram, Removable, Unknown      |
  | VolumeLabel        | NhÃ£n Ä‘Ä©a                                                                                                |
  | DriveFormat        | Chuá»—i cho biáº¿t Ä‘á»‹nh dáº¡ng Ä‘Ä©a: NTFS, FAT32, FAT, devfs ...                                               |
  | AvailableFreeSpace | Sá»‘ byte cÃ³ hiá»‡u lá»±c cÃ²n trá»‘ng (theo háº¡n ngáº¡ch ngÆ°á»i dÃ¹ng)                                               |
  | TotalFreeSpace     | Sá»‘ byte cÃ²n trá»‘ng                                                                                       |
  | TotalSize          | Tá»•ng sá»‘ byte trÃªn Ä‘Ä©a                                                                                   |

Path (há»— trá»£ lÃ m viá»‡c vá»›i Ä‘Æ°á»ng dáº«n)

- Há»— trá»£ quáº£n lÃ½, táº¡o cÃ¡c Ä‘Æ°á»ng dáº«n Ä‘áº¿n file, thÆ° má»¥c - nháº¥t lÃ  há»— trá»£ cross-platform (Ä‘a ná»n táº£ng) thÃ¬ lá»›p tÄ©nh System.IO.Path chá»©a cÃ¡c phÆ°Æ¡ng thá»©c (tÄ©nh) vá»›i má»¥c Ä‘Ã­ch Ä‘Ã³

- Thuá»™c tÃ­nh, phÆ°Æ¡ng thá»©c

  | TÃªn                         | Ã nghÄ©a                                                                                                                       |
  | --------------------------- | ----------------------------------------------------------------------------------------------------------------------------- |
  | Path.DirectorySeparatorChar | Thuá»™c tÃ­nh chá»©a kÃ½ tá»± phÃ¢n cÃ¡ch Ä‘Æ°á»ng dáº«n thÆ° má»¥c (\ trÃªn Windows, / trÃªn \*nix)                                              |
  | Path.PathSeparator          | Thuá»™c tÃ­nh chá»©a kÃ½ tá»± phÃ¢n chia thÆ° má»¥c trong biáº¿n mÃ´i trÆ°á»ng                                                                 |
  | Combine                     | Káº¿t há»£p cÃ¡c chuá»—i thÃ nh dÆ°á»ng dáº«n : var path = Path.Combine("home", "ReadMe.txt"); // "home/ReadMe.txt"                       |
  | ChangeExtension             | Thay Ä‘á»•i pháº§n má»Ÿ rá»™ng cá»§a Ä‘Æ°á»ng dáº«n : var path = Path.ChangeExtension("/home/abc/ReadMe.txt", "md"); // "/home/abc/ReadMe.md" |
  | GetDirectoryName            | Láº¥y Ä‘Æ°á»ng dáº«n Ä‘áº¿n file (thÆ° má»¥c) : var path = Path.GetDirectoryName("/home/abc/zyz/ReadMe.txt"); // "/home/abc/zyz"           |
  | GetExtension                | Láº¥y pháº§n má»Ÿ rá»™ng : var path = Path.GetExtension("/home/ReadMe.txt"); // ".txt"                                                |
  | GetFileName                 | Láº¥y tÃªn file : var path = Path.GetFileName("/home/abc/ReadMe.txt"); // "ReadMe.txt"                                           |
  | GetFileNameWithoutExtension | Láº¥y tÃªn file : var path = Path.GetFileNameWithoutExtension("/home/ReadMe.txt"); // "ReadMe"                                   |
  | GetFullPath                 | Láº¥y Ä‘Æ°á»ng dáº«n Ä‘áº§y Ä‘á»§ - tá»« Ä‘Æ°á»ng dáº«n tÆ°Æ¡ng Ä‘á»‘i : var path = Path.GetFullPath("ReadMe.txt");                                    |
  | GetPathRoot                 | Láº¥y gá»‘c cá»§a Ä‘Æ°á»ng dáº«n                                                                                                         |
  | GetRandomFileName           | Táº¡o tÃªn file ngáº«u nhiÃªn : var path = Path.GetRandomFileName();                                                                |
  | GetTempFileName             | Táº¡o file duy nháº¥t, rá»—ng : var path = Path.GetTempFileName();                                                                  |

Láº¥y Ä‘Æ°á»ng dáº«n Ä‘áº¿n má»™t sá»‘ thÆ° má»¥c Ä‘áº·c biá»‡t cá»§a há»‡ thá»‘ng dÃ¹ng Environment.GetFolderPath

```C#
var path_mydoc = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
```

File

- Lá»›p System.IO.File cung cáº¥p cho báº¡n cÃ¡ch thá»©c Ä‘Æ¡n giáº£n Ä‘á»ƒ lÃ m viá»‡c vá»›i cÃ¡c tá»‡p

- File.WriteAllText

  - Táº¡o ra file má»›i (náº¿u Ä‘Ã£ cÃ³ file thÃ¬ bá»‹ ghi Ä‘Ã¨), ghi vÃ o nÃ³ má»™t ná»™i dung text, rá»“i Ä‘Ã³ng file luÃ´n

```C#
static void testWriteAllText()
{
    var filename = "test.txt";
    string contentfile = "Xin chÃ o! xuanthulab.net";

    // Láº¥y thÆ° má»¥c Document cá»§a User trÃªn há»‡ thá»‘ng
    var directory_mydoc = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    var fullpath = Path.Combine(directory_mydoc, filename);

    File.WriteAllText(filename, contentfile);
}
```

- File.AppendAllText

  - Ná»‘i thÃªm ná»™i dung vÃ o ná»™i dung cÃ³ sáºµn trong file thay vÃ¬ ghi Ä‘Ã¨

```C#
static void testAppendAllText()
{
    var filename = "test.txt";
    string contentfile = "\nXin chÃ o! xuanthulab.net - " + DateTime.Now.ToString();

    var directory_mydoc = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments);
    var fullpath = Path.Combine(directory_mydoc, filename);

    if (File.Exists(fullpath))
    {
        // File Ä‘Ã£ tá»“n táº¡i - ná»‘i thÃªm ná»™i dung
        File.AppendAllText(fullpath, contentfile);
    }
    else
    {
        // táº¡o má»›i vÃ¬ chÆ°a tá»“n táº¡i file
        File.WriteAllText(fullpath, contentfile);
    }
}
```

- File.ReadAllText : Äá»c ná»™i dung trong file
- File.Create(filename) : táº¡o file
- File.Delete(filename) : xÃ³a file
- File.Exists(filename) : kiá»ƒm tra file cÃ³ tá»“n táº¡i
- File.Copy(path_src, path_des) : copy file
- File.Move(path_src, path_des) : di chuyá»ƒn file

Directory

- Lá»›p System.IO.Directory cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c chuyÃªn tÆ°Æ¡ng tÃ¡c vá»›i cÃ¡c thÆ° má»¥c

- PhÆ°Æ¡ng thá»©c

| TÃªn                   | Ã nghÄ©a                                                                       |
| --------------------- | ----------------------------------------------------------------------------- |
| Exists(path)          | Kiá»ƒm tra xem thÆ° má»¥c cÃ³ tá»“n táº¡i (true) hay khÃ´ng (false)                      |
| CreateDirectory(path) | Táº¡o thÆ° má»¥c, tráº£ vá» Ä‘á»‘i tÆ°á»£ng System.IO.DirectoryInfo chá»©a thÃ´ng tin thÆ° má»¥c. |
| Delete(path)          | XÃ³a thÆ° má»¥c.                                                                  |
| GetFiles(path)        | Láº¥y cÃ¡c file trong thÆ° má»¥c.                                                   |
| GetDirectories(path)  | Láº¥y cÃ¡c thÆ° má»¥c trong thÆ° má»¥c.                                                |
| Move(src, des)        | Di chuyá»ƒn thÆ° má»¥c.                                                            |

- VÃ­ dá»¥ Ä‘á»‡ quy liá»‡t kÃª táº¥t cáº£ cÃ¡c file, thÆ° má»¥c con trong má»™t thÆ° má»¥c

```C#
static void ListFileDirectory(string path)
{
    String[] directories = System.IO.Directory.GetDirectories(path);
    String[] files = System.IO.Directory.GetFiles(path);
    foreach (var file in files)
    {
        Console.WriteLine(file);
    }
    foreach (var directory in directories)
    {
        Console.WriteLine(directory);
        ListFileDirectory(directory); // Äá»‡ quy
    }
}
```

## Stream

Má»™t luá»“ng (stream) lÃ  má»™t Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ truyá»n dá»¯ liá»‡u

Khi dá»¯ liá»‡u truyá»n tá»« cÃ¡c nguá»“n bÃªn ngoÃ i vÃ o á»©ng dá»¥ng ta gá»i Ä‘Ã³ lÃ  Ä‘á»c stream

Khi dá»¯ liá»‡u truyá»n tá»« chÆ°Æ¡ng trÃ¬nh ra nguá»“n bÃªn ngoÃ i ta gá»i nÃ³ lÃ  ghi stream

Nguá»“n bÃªn ngoÃ i thÆ°á»ng lÃ  cÃ¡c file, tuy nhiÃªn tá»•ng quÃ¡t thÃ¬ nÃ³ cÃ³ thá»ƒ tá»« nhiá»u loáº¡i nhÆ° Ä‘á»c/ghi dá»¯ liá»‡u thÃ´ng qua má»™t giao thá»©c máº¡ng Ä‘á»ƒ trao Ä‘á»•i dá»¯ liá»‡u vá»›i má»™t mÃ¡y remote khÃ¡c

Má»™t sá»‘ stream chá»‰ cho Ä‘á»c, má»™t sá»‘ chá»‰ cho ghi, má»™t sá»‘ láº¡i cho phÃ©p truy cáº­p nháº«u nhiÃªn chá»© khÃ´ng chá»‰ truy cáº­p tuáº§n tá»± (cho phÃ©p thay Ä‘á»•i vá»‹ trÃ­ con trá» Ä‘á»c dá»¯ liá»‡u trong luá»“ng)

Láº¥y thÃ´ng tin vá» stream - khi cÃ³ Ä‘á»‘i tÆ°á»£ng lá»›p System.IO.Stream cÃ³ má»™t sá»‘ thuá»™c tÃ­nh Ä‘á»ƒ tra cá»©u thÃ´ng tin vá» stream

Thuá»™c tÃ­nh

| TÃªn          | Ã nghÄ©a                                                                                        |
| ------------ | ---------------------------------------------------------------------------------------------- |
| CanRead      | Cho biáº¿t stream há»— trá»£ viá»‡c Ä‘á»c hay khÃ´ng                                                      |
| CanWrite     | Cho biáº¿t stream há»— trá»£ viá»‡c ghi hay khÃ´ng                                                      |
| CanSeek      | Cho biáº¿t stream há»— trá»£ dá»‹ch chuyá»ƒn con trá» hay khÃ´ng                                           |
| CanTimeout   | Cho biáº¿t stream cÃ³ Ä‘áº·t Ä‘Æ°á»£c time out                                                           |
| Length       | Cho biáº¿t kÃ­ch thÆ°á»›c (byte) cá»§a stream                                                          |
| Position     | Äá»c hoáº·c thiáº¿t láº­p vá»‹ trÃ­ Ä‘á»c (thiáº¿t láº­p thÃ¬ stream pháº£i há»— trá»£ Seek)                          |
| ReadTimeout  | Äá»c hoáº·c thiáº¿t láº­p giÃ¡ trá»‹ (mili giÃ¢y) danh cho tÃ¡c vá»¥ Ä‘á»c stream trÆ°á»›c khi time out phÃ¡t sinh |
| WriteTimeout | Äá»c hoáº·c thiáº¿t láº­p giÃ¡ trá»‹ (mili giÃ¢y) danh cho tÃ¡c vá»¥ ghi stream trÆ°á»›c khi time out phÃ¡t sinh |

PhÆ°Æ¡ng thá»©c

| TÃªn       | Ã nghÄ©a                                                                                                             |
| --------- | ------------------------------------------------------------------------------------------------------------------- |
| ReadByte  | Äá»c tá»«ng byte, tráº£ vá» int (cast 1 byte) hoáº·c -1 náº¿u cuá»‘i file.                                                      |
| Read      | Äá»c má»™t sá»‘ byte, tá»« vá»‹ trÃ­ nÃ o Ä‘Ã³, káº¿t quáº£ Ä‘á»c lÆ°u vÃ o máº£ng byte. Tráº£ vá» sá»‘ lÆ°á»£ng byte Ä‘á»c Ä‘Æ°á»£c, 0 náº¿u cuá»‘i stream. |
| WriteByte | LÆ°u 1 byte vÃ o stream                                                                                               |
| Write     | LÆ°u máº£ng bytes vÃ o stream                                                                                           |
| Seek      | Thiáº¿t láº­p vá»‹ trÃ­ trong stream                                                                                       |
| Flush     | Giáº£i phÃ³ng cÃ¡c bá»™ Ä‘Ãªm                                                                                               |

## FileStream

Lá»›p FileStream táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng Ä‘á»ƒ Ä‘á»c vÃ  ghi dá»¯ liá»‡u ra file.

Äá»ƒ táº¡o ra má»™t stream file, Ä‘á»ƒ trao Ä‘á»•i dá»¯ liá»‡u cáº§n 4 thÃ´ng tin:

- path Ä‘Æ°á»ng dáº«n Ä‘áº¿n file

- mode kiá»ƒu liá»‡t kÃª FileMode, nÃ³ cho biáº¿t báº¡n muá»‘n má»Ÿ file nhÆ° tháº¿ nÃ o, nhÆ°:

  - FileMode.CreateNew : táº¡o file má»›i
  - FileMode.Create : táº¡o má»›i, náº¿u file Ä‘ang cÃ³ bá»‹ ghi Ä‘Ã¨
  - FileMode.Open : má»Ÿ file Ä‘ang tá»“n táº¡i
  - FileMode.OpenOrCreate : má»Ÿ file Ä‘ang tá»“n táº¡i, táº¡o má»›i náº¿u khÃ´ng cÃ³
  - FileMode.Truncate : má»Ÿ file Ä‘ang tá»“n táº¡i vÃ  lÃ m rá»—ng file
  - FileMode.Append : má»Ÿ file Ä‘ang tá»“n táº¡i vÃ  tá»›i cuá»‘i file, hoáº·c táº¡o má»›i

- access kiá»ƒu liá»‡t kÃª FileAccess, cho biáº¿t muá»‘n truy cáº­p file nhÆ° tháº¿ nÃ o

  - FileAccess.Read : chá»‰ Ä‘á»c
  - FileAccess.Write : chá»‰ ghi
  - FileAccess.ReadWrite : Ä‘á»c vÃ  ghi

- share kiá»ƒu liá»‡t kÃª FileShare, cho phÃ©p thiáº¿t láº­p chia sáº» truy cáº­p file
  - FileShare.None : khÃ´ng chia sáº» - tiáº¿n trÃ¬nh khÃ¡c truy cáº­p file sáº½ lá»—i cho Ä‘áº¿n khi tiáº¿n trÃ¬nh má»Ÿ file Ä‘Ã³ng nÃ³ láº¡i.
  - FileShare.Read : cho tiáº¿n trÃ¬nh khÃ¡c má»Ÿ Ä‘á»c file.
  - FileShare.Write : cho tiáº¿n trÃ¬nh khÃ¡c má»Ÿ ghi file.
  - FileShare.ReadWrite : cho tiáº¿n trÃ¬nh khÃ¡c má»Ÿ Ä‘á»c ghi file.
  - FileShare.Delete : cho tiáº¿n trÃ¬nh khÃ¡c xÃ³a file.

Lá»›p File há»— trá»£ táº¡o FileStream. File.OpenRead(filename) táº¡o stream Ä‘á»ƒ Ä‘á»c, File.OpenWrite(filename) táº¡o stream Ä‘á»ƒ ghi.

Láº¥y thÃ´ng tin vá» stream

- khi cÃ³ Ä‘á»‘i tÆ°á»£ng lá»›p System.IO.Stream cÃ³ má»™t sá»‘ thuá»™c tÃ­nh Ä‘á»ƒ tra cá»©u thÃ´ng tin vá» stream

| TÃªn          | Ã nghÄ©a                                                                                                                                 |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------- |
| Name         | Tráº£ vá» Ä‘Æ°á»ng dáº«n cá»§a stream                                                                                                             |
| Length       | Khi Ä‘Æ°á»£c ghi Ä‘Ã¨ trong lá»›p dáº«n xuáº¥t, láº¥y chiá»u dÃ i cá»§a dÃ²ng tÃ­nh báº±ng byte                                                               |
| Position     | Khi Ä‘Æ°á»£c ghi Ä‘Ã¨ trong lá»›p dáº«n xuáº¥t, láº¥y hoáº·c Ä‘áº·t vá»‹ trÃ­ hiá»‡n táº¡i trong dÃ²ng                                                             |
| CanRead      | Cho biáº¿t liá»‡u dÃ²ng cÃ³ há»— trá»£ Ä‘á»c hay khÃ´ng                                                                                              |
| CanWrite     | Cho biáº¿t liá»‡u dÃ²ng cÃ³ há»— trá»£ ghi hay khÃ´ng                                                                                              |
| CanSeek      | Cho biáº¿t liá»‡u dÃ²ng cÃ³ há»— trá»£ tÃ¬m kiáº¿m (seeking) hay khÃ´ng, tá»©c lÃ  liá»‡u cÃ³ thá»ƒ Ä‘áº·t vá»‹ trÃ­ hiá»‡n táº¡i trong dÃ²ng hay khÃ´ng                  |
| CanTimeout   | Cho biáº¿t liá»‡u dÃ²ng cÃ³ há»— trá»£ timeout khi Ä‘á»c vÃ  ghi hay khÃ´ng                                                                           |
| ReadTimeout  | Khi Ä‘Æ°á»£c ghi Ä‘Ã¨ trong lá»›p dáº«n xuáº¥t, láº¥y hoáº·c Ä‘áº·t khoáº£ng thá»i gian (tÃ­nh báº±ng mili giÃ¢y) mÃ  dÃ²ng sáº½ cá»‘ gáº¯ng Ä‘á»c trÆ°á»›c khi timeout xáº£y ra |
| WriteTimeout | Khi Ä‘Æ°á»£c ghi Ä‘Ã¨ trong lá»›p dáº«n xuáº¥t, láº¥y hoáº·c Ä‘áº·t khoáº£ng thá»i gian (tÃ­nh báº±ng mili giÃ¢y) mÃ  dÃ²ng sáº½ cá»‘ gáº¯ng ghi trÆ°á»›c khi timeout xáº£y ra |

Encodeing file text (mÃ£ hÃ³a file text)

- Khi Ä‘á»c cÃ¡c file text (khÃ´ng pháº£i file nhá»‹ phÃ¢n), Ä‘áº§u tiÃªn cáº§n xÃ¡c Ä‘á»‹nh encoding cá»§a nÃ³ (UTF8, Unicode, UTF32 ...)

- ThÃ´ng tin vá» encoding Ä‘Æ°á»£c lÆ°u á»Ÿ vÃ i byte Ä‘áº§u tiÃªn cá»§a file nÃ³ gá»i lÃ  BOM - Preamble

**_BOM (byte order mark) sáº½ Ä‘Æ°á»£c tÃ¬m hiá»ƒu trong ExpandedKnowledge.txt_**

- TÃ¹y thuá»™c vÃ o giÃ¡ trá»‹ cá»§a khoáº£ng 5 byte Ä‘áº§u tiÃªn nÃ y mÃ  xÃ¡c Ä‘á»‹nh Ä‘Æ°á»£c encoding.

```C#
public static Encoding GetEncoding(Stream stream)
{
    byte[] BOMBytes = new byte[4]; // máº£ng chá»©a 4 byte Ä‘á»ƒ lÃ m bá»™ nhá»› lÆ°u byte Ä‘á»c Ä‘Æ°á»£c
    int offset = 0; // vá»‹ trÃ­ (index) trong buffer - nÆ¡i ghi byte Ä‘áº§u tiÃªn Ä‘á»c Ä‘Æ°á»£c
    int count = 4; // Ä‘á»c 4 byte
    int numberbyte = stream.Read(BOMBytes, offset, count); // báº¯t Ä‘áº§u Ä‘á»c 4 Ä‘áº§u tiÃªn lÆ°u vÃ o buffer

    if (BOMBytes[0] == 0xfe && BOMBytes[1] == 0xff)
    {
        stream.Seek(2, SeekOrigin.Begin); // Di chuyá»ƒn vá» vá»‹ trÃ­ báº¯t Ä‘áº§u cá»§a dá»¯ liá»‡u (Ä‘Ã£ trá»« BOM)
        return Encoding.BigEndianUnicode;
    }
    if (BOMBytes[0] == 0xff && BOMBytes[1] == 0xfe)
    {
        stream.Seek(2, SeekOrigin.Begin); // Di chuyá»ƒn vá» vá»‹ trÃ­ báº¯t Ä‘áº§u cá»§a dá»¯ liá»‡u (Ä‘Ã£ trá»« BOM)
        return Encoding.Unicode;
    }

    if (BOMBytes[0] == 0xef && BOMBytes[1] == 0xbb && BOMBytes[2] == 0xbf)
    {
        stream.Seek(3, SeekOrigin.Begin);
        return Encoding.UTF8;
    }
    if (BOMBytes[0] == 0x2b && BOMBytes[1] == 0x2f && BOMBytes[2] == 0x76)
    {
        stream.Seek(3, SeekOrigin.Begin);
        return Encoding.UTF7;
    }
    if (BOMBytes[0] == 0xff && BOMBytes[1] == 0xfe && BOMBytes[2] == 0 && BOMBytes[3] == 0)
    {
        stream.Seek(4, SeekOrigin.Begin);
        return Encoding.UTF32;
    }
    if (BOMBytes[0] == 0 && BOMBytes[1] == 0 && BOMBytes[2] == 0xfe && BOMBytes[3] == 0xff)
    {
        stream.Seek(4, SeekOrigin.Begin);
        return Encoding.GetEncoding(12001);
    }

    stream.Seek(0, SeekOrigin.Begin);
    return Encoding.Default;
}
```

- ASCII dÃ¹ng 7 bit biá»ƒu diá»…n cÃ¡c kÃ½ tá»± - Ä‘á»§ biá»ƒu diá»…n báº£ng chá»¯ cÃ¡i tiáº¿ng Anh (in hoa, thÆ°á»ng, sá»‘ kÃ½ tá»± Ä‘áº·c biá»‡t) - 1 byte biá»ƒu diá»…n 1 kÃ½ tá»±

- UTF-16 dÃ¹ng 2 byte biá»ƒu diá»…n 1 kÃ½ tá»±

- UTF-32 dÃ¹ng 4 byte biá»ƒu diá»…n 1 kÃ½ tá»±

- UTF-8 (dÃ¹ng nhiá»u ngÃ y nay) - dÃ¹ng biáº¿n Ä‘á»ƒ xÃ¡c Ä‘á»‹nh bao nhiÃªu byte cho má»—i kÃ½ tá»± cá»¥ thá»ƒ - má»—i kÃ½ tá»± cÃ³ thá»ƒ tá»« 1 - 6 byte

Ghi file text

- Ghi file text (táº¡o má»›i, ghi Ä‘Ã¨) - chá»n file cÃ³ Encoding UTF8

- Äáº§u tiÃªn pháº£i ghi cÃ¡c bytes BOM, láº¥y máº£ng bytes DOM báº±ng cÃ¡ch gá»i encoding.GetPreamble()

- Sau Ä‘Ã³ chuyá»ƒn chuá»—i thÃ nh máº£ng bytes (Ä‘Ã£ encoding) - rá»“i lÆ°u ra stream báº±ng Write

```C#
using (var stream = new FileStream(path: filepath, mode: FileMode.Create, access: FileAccess.Write, share: FileShare.None))
{
    //Write BOM - UTF8
    Encoding encoding = Encoding.UTF8;
    byte[] bom = encoding.GetPreamble();
    stream.Write(bom, 0, bom.Length);

    string s1 = "Xin chÃ o cÃ¡c báº¡n! \n";
    string s2 = "VÃ­ dá»¥ - ghi file text báº±ng stream";

    // Encode chuá»—i - lÆ°u vÃ o máº£ng bytes
    byte[] buffer = encoding.GetBytes(s1);
    stream.Write(buffer, 0, buffer.Length);  // lÆ°u vÃ o stream

    buffer = encoding.GetBytes(s2);
    stream.Write(buffer, 0, buffer.Length);  // lÆ°u vÃ o stream
}
```

Äá»c file text

- Äáº§u tiÃªn xÃ¡c Ä‘á»‹nh Encoding cá»§a file text

- Sau Ä‘Ã³ Ä‘á»c tá»«ng khá»‘i byte vÃ o buffer (máº£ng byte), rá»“i thá»±c hiá»‡n Encoding Ä‘á»ƒ xÃ¡c Ä‘á»‹nh chuá»—i

```C#
int SIZEBUFFER = 256;
using (var stream = new FileStream(path: filepath, mode: FileMode.Open, access: FileAccess.ReadWrite, share: FileShare.Read))
{
    Encoding encoding = GetEncoding(stream);
    Console.WriteLine(encoding.ToString());
    byte[] buffer = new byte[SIZEBUFFER];
    bool endread = false;
    do
    {
        int numberRead = stream.Read(buffer, 0, SIZEBUFFER);
        if (numberRead == 0) endread = true;
        if (numberRead < SIZEBUFFER)
        {
            Array.Clear(buffer, numberRead, SIZEBUFFER - numberRead);
        }
        string s = encoding.GetString(buffer, 0, numberRead);
        Console.WriteLine(s);
    } while (!endread);
}
```

Copy file text

- Táº¡o 2 stream, má»™t Ä‘á»ƒ Ä‘á»c - má»™t Ä‘á»ƒ lÆ°u

```C#
int SIZEBUFFER = 5; // tÄƒng lÃªn Ä‘á»c sáº½ nhanh
using (var streamwrite = File.OpenWrite(filepath_des))
using (var streamread = File.OpenRead(filepath_src))
{
    byte[] buffer = new byte[SIZEBUFFER];
    bool endread = false;
    do
    {
        int numberRead = streamread.Read(buffer, 0, SIZEBUFFER);
        if (numberRead == 0) endread = true;
        else
        {
            streamwrite.Write(buffer, 0, numberRead);
        }
    } while (!endread);
}
```

## LINQ (ngÃ´n ngá»¯ truy váº¥n tÃ­ch há»£p)

LINQ (Language Integrated Query) - ngÃ´n ngá»¯ truy váº¥n tÃ­ch há»£p - tÃ­ch há»£p cÃº phÃ¡p truy váº¥n (gáº§n giá»‘ng cÃ¡c cÃ¢u lá»‡nh SQL) vÃ o bÃªn trong ngÃ´n ngá»¯ láº­p trÃ¬nh C#, cho C# kháº£ nÄƒng truy cáº­p cÃ¡c nguá»“n dá»¯ liá»‡u khÃ¡c nhau (SQL Db, XML, List ...) vá»›i cÃ¹ng cÃº phÃ¡p.

LINQ hoáº¡t Ä‘á»™ng trÃªn nhá»¯ng kiá»ƒu táº­p há»£p cÃ³ kháº£ nÄƒng duyá»‡t qua

Nguá»“n dá»¯ liá»‡u phá»¥c vá»¥ cho LINQ, pháº£i lÃ  cÃ¡c Ä‘á»‘i tÆ°á»£ng lá»›p triá»ƒn khai giao diá»‡n (interface) IEnumerable vÃ  IEnumerable<T> tá»©c lÃ  cÃ¡c máº£ng, danh sÃ¡ch thuá»™c Collection

CÃ¢u truy váº¥n LINQ thÆ°á»ng báº¯t Ä‘áº§u báº±ng má»‡nh Ä‘á» from vÃ  káº¿t thÃºc báº±ng má»‡nh Ä‘á» select hoáº·c group, giá»¯a chÃºng lÃ  nhá»¯ng má»‡nh Ä‘á» where, orderby, join, let

from in

- Má»‡nh Ä‘á» from Ä‘á»ƒ xÃ¡c Ä‘á»‹nh nguá»“n dá»¯ liá»‡u mÃ  truy váº¥n sáº½ thá»±c hiá»‡n

- Nguá»“n dá»¯ liá»‡u lÃ  táº­p há»£p nhá»¯ng pháº§n tá»­ lÆ°u trong Ä‘á»‘i tÆ°á»£ng cÃ³ kiá»ƒu lá»›p triá»ƒn khai giao diá»‡n IEnumerable nhÆ° máº£ng Array, List ...

```C#
from [biáº¿n chá»©a] in [nguá»“n dá»¯ liá»‡u]
```

select

- Má»‡nh Ä‘á» select chá»‰ ra cÃ¡c dá»¯ liá»‡u Ä‘Æ°á»£c láº¥y ra (xuáº¥t ra) cá»§a cÃ¢u lá»‡nh LINQ

```C#
var ketqua = from product in products
                 // tráº£ vá» collection gá»“m cÃ¡c pháº§n tá»­ Product
             select product;

// tráº£ vá» má»™t collection gá»“m cÃ¡c pháº§n tá»­ chuá»—i
select product.Name;

// tráº£ vá» nhá»¯ng Ä‘á»‘i tÆ°á»£ng phá»©c táº¡p mÃ  dá»¯ liá»‡u Ä‘Æ°á»£c trÃ­ch xuáº¥t ra from ... in ... hay nhá»¯ng dá»¯ liá»‡u do tÃ­nh toÃ¡n ...
select new
{
    ten = product.Name.ToUpper(),
    mausac = string.Join(',', product.Colors)
};
```

where

- Má»‡nh Ä‘á» where Ä‘á»ƒ lá»c dá»¯ liá»‡u, sau tá»« khÃ³a where lÃ  biá»ƒu thá»©c logic xÃ¡c Ä‘á»‹nh cÃ¡c pháº§n tá»­ lá»c ra

```C#
where product.Price == 500

where(product.Price >= 600 && product.Price < 700) || product.Name.StartsWith("BÃ n")
```

- Trong má»™t truy váº¥n cÃ³ thá»ƒ viáº¿t nhiá»u má»‡nh Ä‘á» where

```C#
var ketqua = from product in products
             where product.Price >= 500
             where product.Name.StartsWith("GiÆ°á»ng")
             select product;
```

from káº¿t há»£p

- Äá»ƒ lá»c dá»¯ liá»‡u phá»©c táº¡p hÆ¡n, cÃ³ thá»ƒ dÃ¹ng From káº¿t há»£p Ä‘á»ƒ lá»c phá»©c táº¡p vÃ  chi tiáº¿t hÆ¡n

```C#
var ketqua = from product in products
             from color in product.Colors // product.Colors lÃ  1 thuá»™c tÃ­nh danh sÃ¡ch cÃ¡c mÃ u sáº¯c cá»§a 1 pháº§n tá»­
             where product.Price < 500
             where color == "VÃ ng"
             select product;
```

orderby

- Má»‡nh Ä‘á» orderby viáº¿t sau má»‡nh Ä‘á» where náº¿u cÃ³, dÃ¹ng Ä‘á»ƒ sáº¯p xáº¿p káº¿t quáº£

```C#
orderby thuoctinh // sáº¯p xáº¿p tÄƒng dáº§n
orderby thuoctinh descending // sáº¯p xáº¿p giáº£m dáº§n
```

- CÅ©ng cÃ³ thá»ƒ sáº¯p xáº¿p theo nhiá»u dá»¯ liá»‡u, viáº¿t cÃ¡ch nhau bá»Ÿi ,

```C#
orderby thuoctinh1 descending, thuoctinh2, thuoctinh3 descending ...
```

group by

- Má»‡nh Ä‘á» group Ä‘Æ°á»£c dngf thay cho má»‡nh Ä‘á» select

- Tráº£ vá» theo tá»«ng nhÃ³m (nhÃ³m láº¡i theo trÆ°á»ng dá»¯ liá»‡u nÃ o Ä‘Ã³), má»—i pháº§n tá»­ cá»§a cáº¥u truy váº¥n tráº£ vá» lÃ  kiá»ƒu IGrouping<TKey,TElement>, chá»©a cÃ¡c pháº§n tá»­ thuá»™c má»™t nhÃ³m

```C#
var ketqua = from product in products
             where product.Price >= 400 && product.Price <= 500
             group product by product.Price;

// 400
// BÃ n trÃ  - 400
// Tranh treo - 400
// 500
// ÄÃ¨n trÃ¹m - 500
// GiÆ°á»ng ngá»§ - 500
```

- Sá»­ dá»¥ng into Ä‘á»ƒ lÆ°u táº¡m group trong truy váº¥n vÃ o má»™t biáº¿n, sau Ä‘Ã³ thi hÃ nh cÃ¡c má»‡nh Ä‘á» khÃ¡c trÃªn biáº¿n táº¡m vÃ  dÃ¹ng má»‡nh Ä‘á» select Ä‘á»ƒ tráº£ vá» káº¿t quáº£

```C#
var ketqua = from product in products
             where product.Price >= 400 && product.Price <= 500
             group product by product.Price into gr
             orderby gr.Key descending
             select gr;
```

let

- let dÃ¹ng Ä‘á»ƒ thÃªm biáº¿n vÃ o LINQ, lÆ°u káº¿t quáº£ cá»§a má»™t biá»ƒu thá»©c tÃ­nh toÃ¡n nÃ o Ä‘Ã³

```C#
let tenvien = biá»ƒu_thá»©c
```

```C#
var ketqua = from product in products // cÃ¡c sáº£n pháº©m trong products
             group product by product.Price into gr // nhÃ³m thÃ nh gr theo giÃ¡
             let count = gr.Count() // sá»‘ pháº§n tá»­ trong nhÃ³m
             select new
             { // tráº£ vá» giÃ¡ vÃ  sá»‘ sáº£n pháº§m cÃ³ giÃ¡ nÃ y
                 price = gr.Key,
                 number_product = count
             };
```

join

- join lÃ  thá»±c hiá»‡n káº¿t há»£p hai nguá»“n dá»¯ liá»‡u láº¡i vá»›i nhau Ä‘á»ƒ truy váº¥n thÃ´ng tin

- Äá»ƒ káº¿t ná»‘i, dÃ¹ng má»‡nh Ä‘á» join Ä‘á»ƒ chá»‰ ra nguá»“n (nguá»“n bÃªn pháº£i join) sáº½ káº¿t ná»‘i vá»›i nguá»“n cá»§a from (nguá»“n bÃªn trÃ¡i join), tiáº¿p theo chá»‰ ra sá»± dÃ ng buá»™c cÃ¡c pháº§n tá»­ báº±ng tá»« khÃ³a on

```C#
var ketqua = from product in products
             join brand in brands on product.Brand equals brand.ID
             select new
             {
                 name = product.Name,
                 brand = brand.Name,
                 price = product.Price
             };
```

_â—join trong C# lÃ  kiá»ƒu inner join (tá»©c giÃ¡ trá»‹ liÃªn káº¿t cÃ³ á»Ÿ cáº£ 2 nguá»“n)_

**_Äá»c thÃªm vá» join trong CTDL-SQL.txt_**

- Náº¿u muá»‘n sá»­ dá»¥ng join nhÆ° kiá»ƒu left join cÃ³ nghÄ©a nguá»“n bÃªn trÃ¡i láº¥y khÃ´ng phá»¥ thuá»™c vÃ o bÃªn pháº£i thÃ¬ láº¥y thÃªm DefaultIfEmpty() cá»§a nguá»“n bÃªn trÃ¡i

```C#
var ketqua = from product in products
             join brand in brands on product.Brand equals brand.ID into t
             from brand in t.DefaultIfEmpty()
             select new
             {
                 name = product.Name,
                 brand = (brand == null) ? "NO-BRAND" : brand.Name,
                 price = product.Price
             };
```

## Asynchronous

Láº­p trÃ¬nh báº¥t Ä‘á»“ng bá»™ (asynchronous) lÃ  má»™t cÃ¡ch thá»©c mÃ  khi gá»i nÃ³ cháº¡y á»Ÿ cháº¿ Ä‘á»™ ná»n (liÃªn quan Ä‘áº¿n má»™t tiáº¿n trÃ¬nh, task), trong khi Ä‘Ã³ tiáº¿n trÃ¬nh gá»i nÃ³ khÃ´ng bá»‹ khÃ³a - block

Trong .NET cÃ³ triá»ƒn khai má»™t sá»‘ mÃ´ hÃ¬nh láº­p trÃ¬nh báº¥t Ä‘á»“ng bá»™ nhÆ° Asynchronous pattern, máº«u báº¥t Ä‘á»“ng bá»™ theo sá»± kiá»‡n vÃ  theo tÃ¡c vá»¥ (TAP - task-based asynchronous pattern)

.NET cÃ³ thÆ° viá»‡n tÃªn Task Parallel Library (TPL) - TPL giÃºp láº­p trÃ¬nh cháº¡y song song (Ä‘a luá»“ng) dá»… dÃ ng hÆ¡n. Trong C# Ä‘á»“ng thá»i cÃ³ thÃªm vÃ o hai tá»« khÃ³a lÃ  async vÃ  await, Ä‘Ã¢y lÃ  hai tá»« khÃ³a chÃ­nh Ä‘á»ƒ sá»­ dá»¥ng trong láº­p trÃ¬nh báº¥t Ä‘á»“ng bá»™.

synchronous

- BÃ¬nh thÆ°á»ng, khi láº­p trÃ¬nh gá»i má»™t phÆ°Æ¡ng thá»©c nÃ o Ä‘Ã³ thÃ¬ phÆ°Æ¡ng thá»©c Ä‘Ã³ cháº¡y vÃ  káº¿t thÃºc thÃ¬ cÃ¡c dÃ²ng code tiáº¿p theo sau lá»i gá»i phÆ°Æ¡ng thá»©c Ä‘Ã³ má»›i Ä‘Æ°á»£c thá»±c thi, Ä‘Ã³ lÃ  cháº¡y Ä‘á»“ng bá»™, cÃ³ nghÄ©a lÃ  thread gá»i phÆ°Æ¡ng thá»©c bá»‹ khÃ³a láº¡i cho Ä‘áº¿n khi phÆ°Æ¡ng thá»©c káº¿t thÃºc

- Viá»‡c khÃ³a thread thá»±c hiá»‡n hÃ m lÃ m cho cÃ¡c dÃ²ng code tiáº¿p theo pháº£i chá», náº¿u hÃ m Ä‘Ã³ thi hÃ nh máº¥t nhiá»u thá»i gian (Ä‘áº·c biá»‡t lÃ  cÃ¡c thao tÃ¡c Ä‘á»c stream - Ä‘á»c file, káº¿t ná»‘i web, káº¿t ná»‘i CSDL ...) - trong khi tÃ i nguyÃªn váº«n Ä‘á»§ Ä‘á»ƒ lÃ m cÃ¡c viá»‡c khÃ¡c - thÃ¬ chÆ°Æ¡ng trÃ¬nh váº«n cá»© pháº£i chá» phÆ°Æ¡ng thá»©c trÃªn káº¿t thÃºc thÃ¬ má»›i thi hÃ nh Ä‘Æ°á»£c tÃ¡c vá»¥ khÃ¡c, Ä‘áº·t biá»‡t lÃ  khi gá»i phÆ°Æ¡ng thá»©c trong cÃ¡c tiáº¿n trÃ¬nh UI, giao diá»‡n ngÆ°á»i dÃ¹ng khÃ´ng tÆ°Æ¡ng tÃ¡c Ä‘Æ°á»£c.

- Äá»ƒ giáº£i quyáº¿t váº¥n Ä‘á» nÃ y, chÆ°Æ¡ng trÃ¬nh váº«n thi hÃ nh Ä‘Æ°á»£c cÃ¡c tÃ¡c vá»¥ khÃ¡c thÃ¬ cáº§n Ä‘áº¿n ká»¹ thuáº­t láº­p trÃ¬nh báº¥t Ä‘á»“ng bá»™ (trÆ°á»›c Ä‘Ã¢y gá»i lÃ  láº­p trÃ¬nh Ä‘a tiáº¿n trÃ¬nh, Ä‘a luá»“ng)

Task

- Lá»›p Task nÃ³ biá»ƒu thá»‹ tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™, tá»« Ä‘Ã³ ta cháº¡y Ä‘Æ°á»£c code báº¥t Ä‘á»“ng bá»™

- Náº¿u tÃ¡c vá»¥ báº¥t Ä‘á»“ng bá»™ Ä‘Ã³ thi hÃ nh xong cÃ³ kiá»ƒu tráº£ vá» thÃ¬ dÃ¹ng Task<T> vá»›i T lÃ  kiá»ƒu tráº£ vá»

```C#
using System.Threading;
using System.Threading.Tasks;
```

- Äá»ƒ táº¡o ra má»™t Task cáº§n tham sá»‘ lÃ  má»™t hÃ m delegate ( Func hoáº·c Action)

```C#
// Náº¿u myfunc tráº£ vá» kiá»ƒu T (tá»©c lÃ  má»™t Func)
Func<T> myfunc = () =>
{
    // code ...
    return ...;
};
Task<T> task = new Task<T>(myfunc);

// object lÃ  Ä‘á»‘i tÆ°á»£ng tham sá»‘ truyá»n cho myfunc
Func<object, T> myfunc = (object thamso) =>
{
    // code ...
    return ...;
};
Task<T> task = new Task<T>(myfunc, thamso);

// Náº¿u myfunc khÃ´ng tráº£ vá» giÃ¡ trá»‹ (tá»©c lÃ  Action)
Action myfunc = () =>
{
    // code ...
};
Task task = new Task(myfunc);
```

- Start() : phÆ°Æ¡ng thá»©c Ä‘á»ƒ cháº¡y Task cá»§a Ä‘á»‘i tÆ°á»£ng

- Result : thuá»™c tÃ­nh káº¿t quáº£ tráº£ vá»

- Wait() : chá» cho task hoÃ n thÃ nh

async, await

- Khi muá»‘n láº¥y káº¿t quáº£ cá»§a Task, thÃ¬ tráº£ vá» thuá»™c tÃ­nh Result. NhÆ°ng Ä‘iá»u nÃ y lÃ m cho thread cháº¡y Task bá»‹ khÃ³a láº¡i vÃ¬ Result sáº½ tráº£ vá» khi Task hoÃ n thÃ nh. Äiá»u nÃ y lÃ m máº¥t Ä‘i lá»£i Ã­ch Ä‘a luá»“ng vÃ  báº¥t Ä‘á»“ng bá»™

- Äá»ƒ cÃ³ thá»ƒ tráº£ vá» ngay láº­p tá»©c mÃ  khÃ´ng khÃ³a thread cá»§a Task Ä‘Ã³ láº¡i thÃ¬ dÃ¹ng Ä‘áº¿n cáº·p tá»« khÃ³a async vÃ  await

- ThÃªm vÃ o khai bÃ¡o tÃªn hÃ m tá»« khÃ³a async, nÃ³ cho trÃ¬nh biÃªn dá»‹ch biáº¿t Ä‘Ã¢y lÃ  hÃ m báº¥t Ä‘á»“ng bá»™ - khi gá»i nÃ³ - nÃ³ tráº£ vá» ngay láº­p tá»©c

- Trong thÃ¢n cá»§a hÃ m, pháº£i cÃ³ Ä‘oáº¡n code chá» task hoÃ n thÃ nh

```C#
public static async Task<T> async(thamso)
{
    // code ...
    await task;
    // code ...
}
```

- code phÃ­a sau await chá»‰ Ä‘Æ°á»£c cháº¡y khi Task cháº¡y xong

_â—await pháº£i dÃ¹ng vá»›i Task vÃ  chá»‰ Ä‘Æ°á»£c viáº¿t trong hÃ m cÃ³ khai bÃ¡o async_

_â—CÃ³ thá»ƒ hÃ¬nh dung khi hÃ m Ä‘Æ°á»£c gá»i Ä‘á»ƒ thá»±c thi thÃ¬ nÃ³ sáº½ táº¡o ra thread (luá»“ng) Ä‘á»ƒ thá»±c thi cÃ¡c Task (hÃ m, cÃ´ng viá»‡c trong hÃ m), hÃ m main cÅ©ng cÃ³ thread Ä‘á»ƒ cháº¡y vÃ  Ä‘Ã³ lÃ  thread chÃ­nh cá»§a chÆ°Æ¡ng trÃ¬nh. Trong chÆ°Æ¡ng trÃ¬nh Ä‘á»“ng bá»™ thÃ¬ cÃ¡c hÃ m cÃ¹ng cháº¡y trÃªn 1 thread chÃ­nh cá»§a hÃ m main (nÃ³i Ä‘Ãºng hÆ¡n lÃ  thread chÃ­nh bá»‹ chuyá»ƒn hÆ°á»›ng sang cháº¡y thread cá»§a hÃ m Ä‘Æ°á»£c gá»i), cÃ²n trong chÆ°Æ¡ng trÃ¬nh báº¥t Ä‘á»“ng bá»™ thÃ¬ hÃ m nÃ o cháº¡y thread hÃ m Ä‘Ã³._

- Khi khai bÃ¡o hÃ m vá»›i async náº¿n trÃ¡nh dÃ¹ng kiá»ƒu tráº£ vá» void (dÃ¹ Ä‘Æ°á»£c phÃ©p, khÃ´ng await Ä‘Æ°á»£c) mÃ  hÃ£y dÃ¹ng Task náº¿u khÃ´ng cÃ³ kiá»ƒu tráº£ vá» hoáº·c Task<T> khi cÃ³ kiá»ƒu tráº£ vá» T

- Do 1 phÆ°Æ¡ng thá»©c cÅ©ng lÃ  1 task, nÃªn cÃ³ thá»ƒ await á»Ÿ 1 phÆ°Æ¡ng thá»©c async khÃ¡c thÃ¬ phÆ°Æ¡ng thá»©c Ä‘Ã³ cÅ©ng pháº£i lÃ  async

CancellationToken

> bá»• sung sau

## Multi thread sá»­ dá»¥ng Parallel cháº¡y song song

Parallel

- Lá»›p Parallel thuá»™c namespace System.Threading.Tasks, nÃ³ trá»«u tÆ°á»£ng hÃ³a cÃ¡c thread, lá»›p nÃ y cÃ³ phÆ°Æ¡ng thá»©c tÄ©nh Parallel.For, Parallel.ForEach Ä‘á»ƒ thá»±c hiá»‡n vÃ²ng láº·p for vÃ  foreach Ä‘á»ƒ cháº¡y song song cÃ¡c tÃ¡c vá»¥

- Parallel.Invoke Ä‘á»ƒ thá»±c hiá»‡n má»™t Action cÃ³ kháº£ nÄƒng cháº¡y song song

Parallel.For

- Parallel.For cÃ³ nhiá»u quÃ¡ táº£i

```C#
ParallelLoopResult result = Parallel.For(i1, i2, task);
```

- VÃ²ng láº·p cháº¡y (biáº¿n cháº¡y) tá»« sá»‘ nguyÃªn i1 Ä‘áº¿n i2, má»—i láº§n láº·p nÃ³ sáº½ thá»±c hiá»‡n Action task, task lÃ  má»™t delegate, kiá»ƒu Action<int> cÃ³ nghÄ©a nÃ³ lÃ m phÆ°Æ¡ng thá»©c tráº£ vá» void, cÃ³ má»™t tham sá»‘ kiá»ƒu int, tham sá»‘ nÃ y lÃ  biáº¿n cháº¡y

```C#
Action<int> action = (int x) =>
{
    // Doing somthing here ...
};
```

- result Ä‘á»‘i tÆ°á»£ng lá»›p ParallelLoopResult tráº£ vá» tá»« Paralell.For, thuá»™c tÃ­nh ParallelLoopResult.IsCompleted cho biáº¿t vÃ²ng láº·p Ä‘Ã£ Ä‘Æ°á»£c duyá»‡t qua háº¿t, táº¥t cáº£ cÃ¡c task Ä‘Ã£ khá»Ÿi cháº¡y.

- Lá»‡nh Parallel.For khá»Ÿi cháº¡y song song nhiá»u tÃ¡c vá»¥ (thá»i Ä‘iá»ƒm báº¯t Ä‘áº§u cá»§a má»—i tÃ¡c vá»¥ khÃ´ng giá»‘ng nhau, cÃ³ nhá»¯ng tÃ¡c vá»¥ Ä‘Ã£ káº¿t thÃºc thÃ¬ tÃ¡c vá»¥ sau má»›i cháº¡y, nÃ³ cÃ³ thá»ƒ phá»¥ thuá»™c vÃ o tÃ i nguyÃªn há»‡ thá»‘ng RAM, CPU ...)

- Má»™t task nÃ³ cÃ³ cháº¡y trÃªn má»™t thread nÃ o Ä‘Ã³ (chá»© khÃ´ng pháº£i má»—i task má»™t thread), má»™t thread cÃ³ thá»ƒ sá»­ dá»¥ng bá»Ÿi nhiá»u task

- Báº£n thÃ¢n vÃ²ng láº·p Parallel.For, khi cÃ¡c Action cháº¡y, máº·c dÃ¹ chÃºng cháº¡y trÃªn nhá»¯ng Task vÃ  Thread, nhÆ°ng khi táº¥t cáº£ cÃ¡c Action hoÃ n hÃ nh thÃ¬ vÃ²ng láº·p má»›i hoÃ n thÃ nh. Dáº«n Ä‘áº¿n Parallel.For khÃ³a(block) thread gá»i nÃ³. Äá»ƒ khÃ´ng bá»‹ khÃ³a, cÃ³ thá»ƒ chuyá»ƒn cÃ¡c Action lÃ  async

Parallel.ForEach

- CÅ©ng giá»‘ng vá»›i Parallel.For nhÆ°ng duyá»‡t qua cÃ¡c Collection tÆ°Æ¡ng tá»± nhÆ° vÃ²ng láº·p foreach

```C#
ParallelLoopResult result = Parallel.ForEach(source, RunTask);
```

- Trong Ä‘Ã³ source lÃ  má»™t Collection nhÆ° máº£ng, List. RunTask lÃ  Action, cÃ³ 1 tham sá»‘ cÃ³ kiá»ƒu giá»‘ng kiá»ƒu pháº§n tá»­ trong source, giÃ¡ trá»‹ tham sá»‘ nÃ y lÃ  giÃ¡ trá»‹ pháº§n tá»­ trong source trong má»—i vÃ²ng láº·p

Parallel.Invoke

- Vá»›i For vÃ  ForEach, thÃ¬ cÃ¡c tÃ¡c vá»¥ Ä‘á»‹nh nghÄ©a trá»ng má»™t Action, nhÆ°ng náº¿u muá»‘n cháº¡y song song nhiá»u loáº¡i Action (phÆ°Æ¡ng thá»©c) má»™t lÃºc thÃ¬ dÃ¹ng Paralell.Invoke

```C#
Parallel.Invoke(action1, action2, action3);
```

_â—TÃ³m láº¡i Parallel lÃ  Ä‘á»ƒ cháº¡y Ä‘a luá»“ng nhiá»u action + For lÃ  duyá»‡t cÃ¡c kiá»ƒu nguyÃªn thá»§y truyá»n vÃ o action + ForEach lÃ  duyá»‡t cÃ¡c kiá»ƒu collection truyá»n vÃ o action + Invoke lÃ  dÃ¹ng cho danh sÃ¡ch cÃ¡c action khÃ¡c nhau_

## Type

Lá»›p Type dÃ¹ng Ä‘á»ƒ biá»ƒu thá»‹ sá»± khai bÃ¡o cá»§a: Ä‘á»‹nh nghÄ©a cá»§a lá»›p, máº£ng, enum, interface ...

```C#
ob = new ...
Type type = ob.GetType();
// hoáº·c
Type type = typeof(kiá»ƒu dá»¯ liá»‡u);
```

Lá»›p Type vá»›i cÃ¡c phÆ°Æ¡ng thá»©c, thuá»™c tÃ­nh cá»§a nÃ³, nÃ³ trá»Ÿ thÃ nh lá»›p cÆ¡ báº£n cá»§a ká»¹ thuáº­t Reflection trong .Net

Thuá»™c tÃ­nh

| TÃªn           | Ã nghÄ©a                                                                                           |
| ------------- | ------------------------------------------------------------------------------------------------- |
| Assembly      | Láº¥y Ä‘á»‘i tÆ°á»£ng Assembly chá»©a khai bÃ¡o cho kiá»ƒu hiá»‡n táº¡i.                                           |
| BaseType      | Láº¥y Ä‘á»‘i tÆ°á»£ng Type Ä‘áº¡i diá»‡n cho lá»›p cÆ¡ sá»Ÿ trá»±c tiáº¿p cá»§a kiá»ƒu hiá»‡n táº¡i.                            |
| FullName      | Láº¥y tÃªn Ä‘áº§y Ä‘á»§ cá»§a kiá»ƒu, bao gá»“m cáº£ khÃ´ng gian tÃªn.                                               |
| Namespace     | Láº¥y khÃ´ng gian tÃªn cá»§a kiá»ƒu hiá»‡n táº¡i.                                                             |
| IsClass       | Tráº£ vá» giÃ¡ trá»‹ boolean cho biáº¿t liá»‡u kiá»ƒu hiá»‡n táº¡i cÃ³ pháº£i lÃ  lá»›p hay khÃ´ng.                      |
| IsInterface   | Tráº£ vá» giÃ¡ trá»‹ boolean cho biáº¿t liá»‡u kiá»ƒu hiá»‡n táº¡i cÃ³ pháº£i lÃ  interface hay khÃ´ng.                |
| IsValueType   | Tráº£ vá» giÃ¡ trá»‹ boolean cho biáº¿t liá»‡u kiá»ƒu hiá»‡n táº¡i cÃ³ pháº£i lÃ  kiá»ƒu giÃ¡ trá»‹ hay khÃ´ng.             |
| IsEnum        | Tráº£ vá» giÃ¡ trá»‹ boolean cho biáº¿t liá»‡u kiá»ƒu hiá»‡n táº¡i cÃ³ pháº£i lÃ  kiá»ƒu liá»‡t kÃª (enum) hay khÃ´ng.      |
| IsAbstract    | Tráº£ vá» giÃ¡ trá»‹ boolean cho biáº¿t liá»‡u kiá»ƒu hiá»‡n táº¡i cÃ³ pháº£i lÃ  lá»›p trá»«u tÆ°á»£ng hay khÃ´ng.           |
| IsSealed      | Tráº£ vá» giÃ¡ trá»‹ boolean cho biáº¿t liá»‡u kiá»ƒu hiá»‡n táº¡i cÃ³ pháº£i lÃ  lá»›p sealed hay khÃ´ng.               |
| IsGenericType | Tráº£ vá» giÃ¡ trá»‹ boolean cho biáº¿t liá»‡u kiá»ƒu hiá»‡n táº¡i cÃ³ pháº£i lÃ  kiá»ƒu tá»•ng quÃ¡t (generic) hay khÃ´ng. |
| Name          | Láº¥y tÃªn cá»§a kiá»ƒu.                                                                                 |

PhÆ°Æ¡ng thá»©c

| TÃªn                          | Ã nghÄ©a                                                                                                     |
| ---------------------------- | ----------------------------------------------------------------------------------------------------------- |
| GetMethods()                 | Tráº£ vá» má»™t máº£ng cÃ¡c Ä‘á»‘i tÆ°á»£ng MethodInfo Ä‘áº¡i diá»‡n cho táº¥t cáº£ cÃ¡c phÆ°Æ¡ng thá»©c cÃ´ng khai cá»§a kiá»ƒu hiá»‡n táº¡i.   |
| GetMethod(string name)       | Tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng MethodInfo Ä‘áº¡i diá»‡n cho phÆ°Æ¡ng thá»©c cÃ´ng khai cÃ³ tÃªn xÃ¡c Ä‘á»‹nh.                         |
| GetProperties()              | Tráº£ vá» má»™t máº£ng cÃ¡c Ä‘á»‘i tÆ°á»£ng PropertyInfo Ä‘áº¡i diá»‡n cho táº¥t cáº£ cÃ¡c thuá»™c tÃ­nh cÃ´ng khai cá»§a kiá»ƒu hiá»‡n táº¡i.  |
| GetProperty(string name)     | Tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng PropertyInfo Ä‘áº¡i diá»‡n cho thuá»™c tÃ­nh cÃ´ng khai cÃ³ tÃªn xÃ¡c Ä‘á»‹nh.                        |
| GetFields()                  | Tráº£ vá» má»™t máº£ng cÃ¡c Ä‘á»‘i tÆ°á»£ng FieldInfo Ä‘áº¡i diá»‡n cho táº¥t cáº£ cÃ¡c trÆ°á»ng (field) cÃ´ng khai cá»§a kiá»ƒu hiá»‡n táº¡i. |
| GetField(string name)        | Tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng FieldInfo Ä‘áº¡i diá»‡n cho trÆ°á»ng cÃ´ng khai cÃ³ tÃªn xÃ¡c Ä‘á»‹nh.                               |
| GetInterfaces()              | Tráº£ vá» má»™t máº£ng cÃ¡c Ä‘á»‘i tÆ°á»£ng Type Ä‘áº¡i diá»‡n cho táº¥t cáº£ cÃ¡c giao diá»‡n Ä‘Æ°á»£c triá»ƒn khai bá»Ÿi kiá»ƒu hiá»‡n táº¡i.     |
| GetConstructor(Type[] types) | Tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng ConstructorInfo Ä‘áº¡i diá»‡n cho constructor cÃ³ tham sá»‘ xÃ¡c Ä‘á»‹nh.                          |
| IsAssignableFrom(Type c)     | XÃ¡c Ä‘á»‹nh xem má»™t phiÃªn báº£n cá»§a kiá»ƒu hiá»‡n táº¡i cÃ³ thá»ƒ Ä‘Æ°á»£c gÃ¡n cho má»™t biáº¿n cá»§a kiá»ƒu Ä‘Ã£ xÃ¡c Ä‘á»‹nh.             |

Äá»‘i tÆ°á»£ng PropertyInfo Ä‘Æ°á»£c tráº£ vá» tá»« hÃ m GetProperty cÃ³ thá»ƒ Ä‘á»c giÃ¡ trá»‹ vÃ  thiáº¿t láº­p giÃ¡ trá»‹ cÃ¡c thuá»™c tÃ­nh mÃ  Ä‘á»‘i tÆ°á»£ng chá»©a

```C#
//Láº¥y tÃªn vÃ  giÃ¡ trá»‹ cÃ¡c thuá»™c tÃ­nh cÃ³ trong a
foreach (PropertyInfo property in a.GetType().GetProperties())
{
    string property_name = property.Name; // Láº¥y tÃªn thuá»™c tÃ­nh
    object property_value = property.GetValue(a); // Äá»c giÃ¡ trá»‹ thuá»™c tÃ­nh Ä‘á»‘i tÆ°á»£ng a
    Console.WriteLine($"Thuá»™c tÃ­nh {property_name} giÃ¡ trá»‹ lÃ  {property_value}");
}
```

## Attribute Annotation

Má»™t thuá»™c tÃ­nh chÃº thÃ­ch (Annotation / Attribute) tÃ¡c Ä‘á»™ng vÃ o má»™t thÃ nh pháº§n nÃ o Ä‘Ã³ cá»§a chÆ°Æ¡ng trÃ¬nh (lá»›p, phÆ°Æ¡ng thá»©c, thuá»™c tÃ­nh) - lÃ  má»™t pháº§n cá»§a siÃªu dá»¯ liá»‡u (metadata - loáº¡i dá»¯ liá»‡u cung cáº¥p thÃªm thÃ´ng tin vá» Ä‘á»‘i tÆ°á»£ng nÃ o Ä‘Ã³)

Annotation giÃºp thÃªm thÃ´ng tin vÃ o lá»›p, phÆ°Æ¡ng thá»©c, thuá»™c tÃ­nh nhá»¯ng Ä‘oáº¡n code má»Ÿ rá»™ng

_â—TÃ­nh nÄƒng nÃ y trong Java gá»i lÃ  Annotation, trong C# gá»i lÃ  Attribute._

CÃ¡c thuá»™c tÃ­nh chÃº thÃ­ch cÃ³ thá»ƒ Ä‘Æ°á»£c truy xuáº¥t tra cá»©u á»Ÿ thá»i Ä‘iá»ƒm thá»±c thi báº±ng ká»¹ thuáº­t gá»i lÃ  reflection

Äá»ƒ sá»­ dá»¥ng chá»‰ cáº§n viáº¿t tÃªn Attribute trong dáº¥u [] trÆ°á»›c Ä‘á»‘i tÆ°á»£ng Ã¡p dá»¥ng nhÆ° lá»›p, phÆ°Æ¡ng thá»©c, thuá»™c tÃ­nh lá»›p (cÃ³ tham sá»‘ nhÆ° hÃ m, náº¿u Attribute Ä‘Ã³ yÃªu cáº§u).
`[AttributeName(param1, param2 ...)]`

```C#
public class MyClass
{
    [Obsolete("PhÆ°Æ¡ng thá»©c nÃ y lá»—i thá»i, hÃ£y dÃ¹ng phÆ°Æ¡ng thá»©c Abc")] // Obsolete Ä‘Ã¡nh dáº¥ 1 thÃ nh pháº§n nÃ o Ä‘Ã³ Ä‘Ã£ láº¡c háº­u
    public static void Method1()
    {
        Console.WriteLine("PhÆ°Æ¡ng thá»©c cháº¡y");
    }
}
// náº¿u sá»­ dá»¥ng phÆ°Æ¡ng thá»©c Method1 thÃ¬ trÃ¬nh biÃªn dá»‹ch sáº½ Ä‘Æ°a ra cáº£nh bÃ¡o do Ä‘Ã£ Obsolete
```

Äá»ƒ táº¡o Attribute chá»‰ cáº§n táº¡o 1 lá»›p káº¿ thá»«a tá»« System.Attribute

```C#
[AttributeUsage(AttributeTargets.Class | AttributeTargets.Property | AttributeTargets.Method)] // xÃ¡c Ä‘á»‹nh Attribute sáº½ Ä‘Æ°á»£c Ã¡p dá»¥ng cho thÃ nh pháº§n nÃ o
public class MotaAttribute : Attribute // cÃ³ thá»ƒ Ä‘áº·t tÃªn Mota thay cho MotaAttribute
{
    // PhÆ°Æ¡ng thá»©c khá»Ÿi táº¡o
    public MotaAttribute(string v) => Description = v;

    public string Description { set; get; }

}
```

```C#
// Ã¡p dá»¥ng
[MotaAttribute("Lá»›p biá»ƒu diá»…n ngÆ°á»i dÃ¹ng")] // thÃªm Attribute cho lá»›p
public class User
{
    [MotaAttribute("Thuá»™c tÃ­nh lÆ°u tuá»•i")] // thÃªm Attribute cho thuá»™c tÃ­nh lá»›p
    public int age { set; get; }

    [MotaAttribute("PhÆ°Æ¡ng thá»©c nÃ y hiá»‡n thá»‹ age")]          // thÃªm Attribute cho phÆ°Æ¡ng thá»©c
    public void ShowAge() { }

}
```

Äá»ƒ Ä‘á»c Attribute sá»­ dá»¥ng Type trÃªn Ä‘á»‘i tÆ°á»£ng vá»›i phÆ°Æ¡ng thá»©c GetCustomAttributes

```C#
var a = new User();

// Äá»c cÃ¡c Attribute cá»§a lá»›p
foreach (Attribute attr in a.GetType().GetCustomAttributes(false))
{
    MotaAttribute mota = attr as MotaAttribute;
    if (mota != null)
    {
        Console.WriteLine($"{a.GetType().Name,10} : {mota.Description}");
    }
}

// Äá»c Attribute cá»§a tá»«ng thuá»™c tÃ­nh lá»›p
foreach (var thuoctinh in a.GetType().GetProperties())
{
    foreach (Attribute attr in thuoctinh.GetCustomAttributes(false))
    {
        MotaAttribute mota = attr as MotaAttribute;
        if (mota != null)
        {
            Console.WriteLine($"{thuoctinh.Name,10} : {mota.Description}");
        }
    }
}

// Äá»c Attribute cá»§a phÆ°Æ¡ng thá»©c
foreach (var m in a.GetType().GetMethods())
{
    foreach (Attribute attr in m.GetCustomAttributes(false))
    {
        MotaAttribute mota = attr as MotaAttribute;
        if (mota != null)
        {
            Console.WriteLine($"{m.Name,10} : {mota.Description}");
        }
    }
}
```

_â—Tham sá»‘ bool truyá»n vÃ o GetCustomAttributes Ä‘á»ƒ xÃ¡c Ä‘á»‹nh cÃ³ láº¥y cÃ¡c thuá»™c tÃ­nh káº¿ thá»«a tá»« lá»›p cÆ¡ sá»Ÿ khÃ´ng_

Data Annotation / Attribute

- CÃ¡c Data Annotation/Attribute trong C# Ä‘á»‹nh nghÄ©a trong namespace System.ComponentModel.DataAnnotations
  - CÃ¡c Attribute Ä‘á»ƒ kiá»ƒm tra dá»¯ liá»‡u (Validation Attribute)
  - CÃ¡c Attribute hiá»‡n thá»‹ (Display Attribute), Ä‘iá»u khiá»ƒn dá»¯ liá»‡u trong lá»›p hiá»‡n thá»‹ tháº¿ nÃ o trong UI
  - Modelling Attribute

| TÃªn          | Ã nghÄ©a                                                                                                       |
| ------------ | ------------------------------------------------------------------------------------------------------------- |
| Required     | Dá»¯ liá»‡u pháº£i Ä‘Æ°á»£c thiáº¿t láº­p (!=null)                                                                          |
|              | [Required (ErrorMessage="{0} cáº§n thiáº¿t láº­p")]                                                                 |
| StringLength | Thiáº¿t láº­p Ä‘á»™ dÃ i trÆ°á»ng dá»¯ liá»‡u                                                                               |
|              | [StringLength (20,MinimumLength=3, ErrorMessage="Pháº£i dÃ i 3 Ä‘áº¿n 20 kÃ½ tá»±")]                                   |
| DataType     | Chá»‰ ra dá»¯ liá»‡u pháº£i liÃªn káº¿t phÃ¹ há»£p vá»›i má»™t kiá»ƒu nÃ o Ä‘Ã³                                                      |
|              | [DataType(DataType.Text)]                                                                                     |
|              | [DataType(DataType.PhoneNumber)]                                                                              |
|              | [DataType(DataType.EmailAddress)]                                                                             |
|              | /.. Date, DateTime, Html, ImageUrl, MultilineText, Password, Time, Url                                        |
| Range        | Chá»‰ ra dá»¯ liá»‡u pháº£i trong khoáº£ng nÃ o Ä‘Ã³                                                                       |
|              | [Range(18,99, ErrorMessage="Tuá»•i tá»« 18 Ä‘áº¿n 99")]                                                              |
|              | [Range(typeof(DateTime), "1/2/2004", "3/4/2004", ErrorMessage = "Value for {0} must be between {1} and {2}")] |
| Phone        | [Phone] dá»¯ liá»‡u pháº£i lÃ  dáº¡ng sá»‘ Ä‘iá»‡n thoáº¡i                                                                    |
| EmailAddress | [EmailAddress] dá»¯ liá»‡u pháº£i lÃ  dáº¡ng email                                                                     |

- Äá»ƒ kiá»ƒm tra cÃ¡c dá»¯ liá»‡u phÃ¹ há»£p thiáº¿t láº­p bá»Ÿi Attribute, thÃ¬ dÃ¹ng lá»›p ValidationContext

```C#
ValidationContext context = new ValidationContext(user, null, null);

// results - lÆ°u danh sÃ¡ch ValidationResult, káº¿t quáº£ kiá»ƒm tra
List<ValidationResult> results = new List<ValidationResult>();

// thá»±c hiá»‡n kiá»ƒm tra dá»¯ liá»‡u
bool valid = Validator.TryValidateObject(user, context, results, true);
```

## Dependency injection (DI)

### Dependency (phá»¥ thuá»™c)

Lá»›p classA cÃ³ sá»­ dá»¥ng má»™t chá»©c nÄƒng tá»« Ä‘á»‘i tÆ°á»£ng lá»›p classB (classA hoáº¡t Ä‘á»™ng dá»±a vÃ o classB). LÃºc Ä‘Ã³ classB gá»i lÃ  phá»¥ thuá»™c (dependency) cá»§a classA

### Inversion of Control (IoC) / Dependency inversion

Inversion of Control (IoC - Äáº£o ngÆ°á»£c Ä‘iá»u khiá»ƒn) lÃ  má»™t nguyÃªn lÃ½ thiáº¿t káº¿ trong cÃ´ng nghá»‡ pháº§n má»m trong Ä‘Ã³ cÃ¡c thÃ nh pháº§n nÃ³ dá»±a vÃ o Ä‘á»ƒ lÃ m viá»‡c bá»‹ Ä‘áº£o ngÆ°á»£c quyá»n Ä‘iá»u khiá»ƒn khi so sÃ¡nh vá»›i láº­p trÃ¬nh hÆ°á»›ng thá»§ thá»¥c truyá»n thá»‘ng

### Hoáº¡t Ä‘á»™ng cá»§a IoC

Truyá»n thá»‘ng : CÃ³ lá»›p class A cÃ³ sá»­ dá»¥ng má»™t chá»©c nÄƒng (gá»i hÃ m Ã o Ä‘Ã³) cá»§a class B, lá»›p class B láº¡i tham chiáº¿u vÃ  gá»i cÃ¡c chá»©c nÄƒng cÃ³ trong class C. Ta tháº¥y class A dá»±a vÃ o class B Ä‘á»ƒ hoáº¡t Ä‘á»™ng, class B dá»±a vÃ o class C. NÃªn class A cÃ³ tham chiáº¿u trá»±c tiáº¿p (cá»©ng) Ä‘áº¿n class B vÃ  trong class B cÃ³ tham chiáº¿u Ä‘áº¿n class C

IoC : á» thá»i Ä‘iá»ƒm thá»±c thi thÃ¬ class A váº«n gá»i Ä‘Æ°á»£c hÃ m cÃ³ class B, class B váº«n gá»i hÃ m cÃ³ class C nghÄ©a lÃ  káº¿t quáº£ khÃ´ng Ä‘á»•i. Tuy nhiÃªn, khi thiáº¿t káº¿ á»Ÿ thá»i Ä‘iá»ƒm viáº¿t code (trong code) class A khÃ´ng tham chiáº¿u trá»±c tiáº¿p Ä‘áº¿n class B mÃ  nÃ³ láº¡i sá»­ dá»¥ng interface (hoáº·c lá»›p abstruct) mÃ  classB triá»ƒn khai. Äiá»u nÃ y dáº«n tá»›i sá»± phá»¥ thuá»™c lá»ng láº»o giá»¯a classA vÃ  classB

_â—Hiá»ƒu Ä‘Æ¡n giáº£n cÃ¡ch truyá»n thá»‘ng thÃ¬ lá»›p phá»¥ thuá»™c (A) tham chiáº¿u trá»±c tiáº¿p Ä‘Ãªn lá»›p bá»‹ thuá»™c (B,C) cÃ²n IoC thÃ¬ lá»›p phá»¥ thuá»™c (A) sáº½ tham chiáº¿u Ä‘áº¿n 1 Interface hoáº·c lá»›p abstruct nÃªn A sáº½ phá»¥ thuá»™c vÃ o lá»›p triá»ƒn khai interface hoáº·c lá»›p abstruct chá»© khÃ´ng tham chiáº¿u trá»±c tiáº¿p Ä‘áº¿n 1 Ä‘á»‘i tÆ°á»£ng cá»± thá»ƒ. Viá»‡c nÃ y lÃ m cho code dá»… quáº£n lÃ½, sá»­a Ä‘á»•i_

### Dependency injection (DI)

DI lÃ  má»™t ká»¹ thuáº­t trong láº­p trÃ¬nh, lÃ  má»™t hÃ¬nh thá»©c cá»¥ thá»ƒ cá»§a Inverse of Control (Dependency Inverse)

### DI thiáº¿t káº¿ sao cho cÃ¡c dependency (phá»¥ thuá»™c) cá»§a má»™t Ä‘á»‘i tÆ°á»£ng CÃ“ THá»‚ Ä‘Æ°á»£c Ä‘Æ°a vÃ o, tiÃªm vÃ o Ä‘á»‘i tÆ°á»£ng Ä‘Ã³ (Injection) khi nÃ³ cáº§n tá»›i (khi Ä‘á»‘i tÆ°á»£ng khá»Ÿi táº¡o)

XÃ¢y dá»±ng cÃ¡c lá»›p (dá»‹ch vá»¥) cÃ³ sá»± phá»¥ thuá»™c nhau má»™t cÃ¡ch lá»ng láº»o, vÃ  dependency cÃ³ thá»ƒ tiÃªm vÃ o Ä‘á»‘i tÆ°á»£ng (injection) - thÆ°á»ng qua phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o constructor, property, setter

XÃ¢y dá»±ng Ä‘Æ°á»£c má»™t thÆ° viá»‡n cÃ³ thá»ƒ tá»± Ä‘á»™ng táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng, cÃ¡c dependency tiÃªm vÃ o Ä‘á»‘i tÆ°á»£ng Ä‘Ã³, thÆ°á»ng lÃ  Ã¡p dá»¥ng ká»¹ thuáº­t Reflection cá»§a C#

_â—Viá»‡c tá»± phÃ¡t triá»ƒn thÆ°á»ng khÃ¡ phá»©c táº¡p nÃªn cÃ³ thá»ƒ sá»­ dá»¥ng nhá»¯ng thÆ° viÃªn cÃ³ sáºµn nhÆ°: Microsoft.Extensions.DependencyInjection, Windsor, Unity Ninject, ..._

### CÃ¡c kiá»ƒu Dependency Injection

Inject thÃ´ng qua phÆ°Æ¡ng thá»©c khá»Ÿi táº¡o: cung cáº¥p cÃ¡c Dependency cho Ä‘á»‘i tÆ°á»£ng thÃ´ng qua hÃ m khá»Ÿi táº¡o - táº­p trung vÃ o cÃ¡ch nÃ y vÃ¬ thÆ° viá»‡n .NET há»— trá»£ sáºµn

Inject thÃ´ng qua setter: tá»©c cÃ¡c Dependency nhÆ° lÃ  thuá»™c tÃ­nh cá»§a lá»›p, sau Ä‘Ã³ inject báº±ng gÃ¡n thuá»™c tÃ­nh cho Depedency object.denpendency = obj;

Inject thÃ´ng qua cÃ¡c Interface - xÃ¢y dá»±ng Interface cÃ³ chá»©a cÃ¡c phÆ°Æ¡ng thá»©c Setter Ä‘á»ƒ thiáº¿t láº­p dependency, interface nÃ y sá»­ dá»¥ng bá»Ÿi cÃ¡c lá»›p triá»ƒn khai, lá»›p triá»ƒn khai pháº£i Ä‘á»‹nh nghÄ©a cÃ¡c setter quy Ä‘á»‹nh trong interface

### DI Container

Má»¥c Ä‘Ã­ch sá»­ dá»¥ng DI, Ä‘á»ƒ táº¡o ra cÃ¡c Ä‘á»‘i tÆ°á»£ng dá»‹ch vá»¥ kÃ©o theo lÃ  cÃ¡c Dependency cá»§a Ä‘á»‘i tÆ°á»£ng Ä‘Ã³

DependencyInjection lÃ  DI Container máº·c Ä‘á»‹nh cá»§a ASP.NET Core

Pháº£i Ä‘áº£m báº£o tÃ­ch há»£p Package Microsoft.Extensions.DependencyInjection vÃ o dá»± Ã¡n

```Batch Script
dotnet add package Microsoft.Extensions.DependencyInjection
```

**_Ä‘á»c thÃªm vá» file .csproj_**

Sá»­ dá»¥ng namespace

```C#
using Microsoft.Extensions.DependencyInjection;
```

Lá»›p ServiceCollection

- ServiceCollection lÃ  lá»›p triá»ƒn khai giao diá»‡n IServiceCollection nÃ³ cÃ³ chá»©c nÄƒng quáº£n lÃ½ cÃ¡c dá»‹ch vá»¥ (Ä‘Äƒng kÃ½ dá»‹ch vá»¥ - táº¡o dá»‹ch vá»¥ - tá»± Ä‘á»™ng inject - vÃ  cÃ¡c dependency cá»§a Ä‘á»‹ch vá»¥ ...).

- ServiceCollection lÃ  trung tÃ¢m cá»§a ká»¹ thuáº­t DI, nÃ³ lÃ  thÃ nh pháº§n ráº¥t quan trá»ng trong á»©ng dá»¥ng ASP.NET

- Khá»Ÿi táº¡o Ä‘á»‘i tÆ°á»£ng ServiceCollection, sau Ä‘Ã³ Ä‘Äƒng kÃ½ (lá»›p) cÃ¡c dá»‹ch vá»¥ vÃ o ServiceCollection. Tá»« ServiceCollection phÃ¡t sinh ra Ä‘á»‘i tÆ°á»£ng ServiceProvider, tá»« Ä‘á»‘i tÆ°á»£ng nÃ y truy váº¥n láº¥y ra cÃ¡c dá»‹ch vá»¥ cá»¥ thá»ƒ khi cáº§n.

- PhÆ°Æ¡ng thá»©c

  - AddSingleton<ServiceType, ImplementationType>() : ÄÄƒng kÃ½ dá»‹ch vá»¥ kiá»ƒu Singleton
    _â—Náº¿u ServiceType giá»‘ng ImplementationType thÃ¬ ghi AddSingleton<ServiceType>()_

  - AddTransient<ServiceType, ImplementationType>() : ÄÄƒng kÃ½ dá»‹ch vá»¥ thuá»™c loáº¡i Transient, luÃ´n táº¡o má»›i má»—i khi cÃ³ yÃªu cáº§u láº¥y dá»‹ch vá»¥.
    _â—Hoáº·c AddTransient<ServiceType>()_

  - AddScoped<ServiceType, ImplementationType>() : ÄÄƒng kÃ½ vÃ o há»‡ thá»‘ng dá»‹ch vá»¥ kiá»ƒu Scoped

  - BuildServiceProvider() : Táº¡o ra Ä‘á»‘i tÆ°á»£ng lá»›p ServiceProvider, Ä‘á»‘i tÆ°á»£ng nÃ y dÃ¹ng Ä‘á»ƒ triá»‡u gá»i, táº¡o cÃ¡c dá»‹ch vá»¥ thiáº¿t láº­p á»Ÿ trÃªn.

_â—ServiceType : Kiá»ƒu (tÃªn lá»›p) dá»‹ch vá»¥_

_â—ImplementationType : Kiá»ƒu (tÃªn lá»›p) sáº½ táº¡o ra Ä‘á»‘i tÆ°á»£ng dá»‹ch vá»¥ theo tÃªn ServiceType, cáº§n Ä‘áº£m báº£o ImplementationType lÃ  má»™t lá»›p triá»ƒn khai / káº¿ thá»«a tá»« ServiceType, hoáº·c chÃ­nh lÃ  ServiceType_

_â—CÃ¡c phÆ°Æ¡ng thá»©c AddSingleton, AddTransient, AddScoped cÃ²n cÃ³ báº£n quÃ¡ táº£i mÃ  tham sá»‘ lÃ  má»™t callback delegate táº¡o Ä‘á»‘i tÆ°á»£ng. NÃ³ lÃ  cÃ¡ch triá»ƒn khai pattern factory_

ServiceLifetime

- Má»—i dá»‹ch vá»¥ (lá»›p) khi Ä‘Äƒng kÃ½ vÃ o ServiceCollection thÃ¬ cÃ³ má»™t Ä‘á»‘i tÆ°á»£ng ServiceDescriptor chá»©a thÃ´ng tin vá» dá»‹ch vá»¥ Ä‘Ã³, cÄƒn cá»© vÃ o ServiceDescriptor Ä‘á»ƒ ServiceCollection khá»Ÿi táº¡o dá»‹ch vá»¥ khi cáº§n

- Trong ServiceDescriptor cÃ³ thuá»™c tÃ­nh Lifetime Ä‘á»ƒ xÃ¡c Ä‘á»‹nh dá»‹ch vá»¥ táº¡o ra tá»“n táº¡i trog bao lÃ¢u. Lifetime cÃ³ kiá»ƒu ServiceLifetime (kiá»ƒu enum) cÃ³ cÃ¡c giÃ¡ trá»‹ cá»¥ thá»ƒ:

| TÃªn       | Ã nghÄ©a |
| --------- | ------- | ------------------------------------------------------------------------------------------------------------------------------------------------ |
| Scoped    | 1       | Má»™t báº£n thá»±c thi (instance) cá»§a dá»‹ch vá»¥ (Class) Ä‘Æ°á»£c táº¡o ra cho má»—i pháº¡m vi, tá»©c tá»“n táº¡i cÃ¹ng vá»›i sá»± tá»“n táº¡i cá»§a má»™t Ä‘á»‘i tÆ°á»£ng kiá»ƒu ServiceScope |
|           |         | (Ä‘á»‘i tÆ°á»£ng nÃ y táº¡o báº±ng cÃ¡ch gá»i ServiceProvider.CreateScope, Ä‘á»‘i tÆ°á»£ng nÃ y há»§y thÃ¬ dá»‹ch vá»¥ cÅ©ng bá»‹ há»§y).                                        |
| Singleton | 0       | Duy nháº¥t má»™t phiÃªn báº£n thá»±c thi (instance of class) (dá»‹ch vá»¥) Ä‘Æ°á»£c táº¡o ra cho háº¿t vÃ²ng Ä‘á»i cá»§a ServiceProvider                                   |
| Transient | 2       | Má»™t phiÃªn báº£n cá»§a dá»‹ch vá»¥ Ä‘Æ°á»£c táº¡o má»—i khi Ä‘Æ°á»£c yÃªu cáº§u                                                                                          |

Lá»›p ServiceProvider

- Lá»›p ServiceProvider cung cáº¥p cÆ¡ cháº¿ Ä‘á»ƒ láº¥y ra (táº¡o vÃ  inject náº¿u cáº§n) cÃ¡c dá»‹ch vá»¥ Ä‘Äƒng kÃ½ trong ServiceCollection.

- Äá»‘i tÆ°á»£ng ServiceProvider Ä‘Æ°á»£c táº¡o ra báº±ng cÃ¡ch gá»i phÆ°Æ¡ng thá»©c BuildServiceProvider() cá»§a ServiceCollection

```C#
var serviceprovider = services.BuildServiceProvider();
```

- PhÆ°Æ¡ng thá»©c

| TÃªn                             | Ã nghÄ©a                                                                                |
| ------------------------------- | -------------------------------------------------------------------------------------- |
| GetService<ServiceType>()       | Láº¥y dá»‹ch vá»¥ cÃ³ kiá»ƒu ServiceType - tráº£ vá» null náº¿u dá»‹ch vá»¥ khÃ´ng tá»“n táº¡i                |
| GetRequiredService(ServiceType) | Láº¥y dá»‹ch vá»¥ cÃ³ kiá»ƒu ServiceType - phÃ¡t sinh Exception náº¿u dá»‹ch vá»¥ khÃ´ng tá»“n táº¡i        |
| CreateScope()                   | Táº¡o má»™t pháº¡m vi má»›i, thÆ°á»ng dÃ¹ng khi sá»­ dá»¥ng nhá»¯ng dá»‹ch vá»¥ cÃ³ sá»± áº£nh hÆ°á»Ÿng theo Scoped |

- VÃ­ dá»¥

```C#
// ClassA
// IClassB -> ClassB, ClassB1
// IClassC -> ClassC, ClassC1

ServiceCollection services = new ServiceCollection();

services.AddSingleton<ClassA, ClassA>();
services.AddSingleton<IClassC, ClassC>();
services.AddSingleton<IClassB, ClassB>();

var provider = services.BuildServiceProvider();

ClassA service_a = provider.GetService<ClassA>();

service_a.ActionA();
```

### Sá»­ dá»¥ng delegate / factory

delegate

- CÃ¡c phÆ°Æ¡ng thá»©c Ä‘á»ƒ Ä‘Äƒng dá»‹ch vá»¥ vÃ o ServiceCollection nhÆ° AddSingleton, AddSingleton, AddTransient cÃ²n cÃ³ phiÃªn báº£n (náº¡p chá»“ng) nÃ³ nháº­n tham sá»‘ lÃ  delegate tráº£ vá» Ä‘á»‘i tÆ°á»£ng dá»‹ch vá»¥ cÃ³ kiá»ƒu ImplementationType

```C#
services.AddSingleton<ServiceType>((IServiceProvider provider) =>
{
// cÃ¡c chá»‰ thá»‹
// ...
return (Ä‘á»‘i tÆ°á»£ng kiá»ƒu ImplementationType);
});
```

- Delegate nháº­n tham sá»‘ lÃ  IServiceProvider (chÃ­nh lÃ  Ä‘á»‘i tÆ°á»£ng Ä‘Æ°á»£c sinh ra bá»Ÿi ServiceCollection.BuildServiceProvider()), Delegate pháº£i tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng triá»ƒn khai tá»« ServiceType

- VÃ­ dá»¥

```C#
class ClassB2 : IClassB
{
    IClassC c_dependency;
    string message;
    public ClassB2(IClassC classc, string mgs)
    {
        c_dependency = classc;
        message = mgs;
        Console.WriteLine("ClassB2 is created");
    }
    public void ActionB()
    {
        Console.WriteLine(message);
        c_dependency.ActionC();
    }
}

// Lá»›p trÃªn khi khá»Ÿi táº¡o cáº§n cÃ³ hai tham sá»‘. NhÆ°ng tham sá»‘ khá»Ÿi táº¡o IClassC Ä‘Æ°á»£c inject, trong khi Ä‘Ã³ tham sá»‘ chuá»—i string khÃ´ng Ä‘Äƒng kÃ½ sáº½ dáº«n tá»›i lá»—i
services.AddSingleton<IClassB, ClassB2>(); // lá»—i

// cÃ³ thá»ƒ Ä‘Äƒng kÃ½ vá»›i Delegate vÃ  truyá»n chuá»—i khá»Ÿi táº¡o cá»¥ thá»ƒ
services.AddSingleton<IClassB>((IServiceProvider serviceprovider) =>
{
    var service_c = serviceprovider.GetService<IClassC>();
    var sv = new ClassB2(service_c, "Thá»±c hiá»‡n trong ClassB2");
    return sv;
});

// náº¿u láº¥y ra dá»‹ch vá»¥ IClassB (hoáº·c khi nÃ³ Inject vÃ o dá»‹ch vá»¥ khÃ¡c) , náº¿u dá»‹ch vá»¥ Ä‘Ã³ chÆ°a cÃ³ nÃ³ sáº½ thi hÃ nh Delegate Ä‘á»ƒ táº¡o dá»‹ch vá»¥
```

factory

- Delegate cÃ³ thá»ƒ khai bÃ¡o thÃ nh má»™t phÆ°Æ¡ng thá»©c, má»™t phÆ°Æ¡ng thá»©c cung cáº¥p cÆ¡ cháº¿ Ä‘á»ƒ táº¡o ra Ä‘á»‘i tÆ°á»£ng mong muá»‘n gá»i lÃ  Factory.

```C#
// Factory nháº­n tham sá»‘ lÃ  IServiceProvider vÃ  tráº£ vá» Ä‘á»‘i tÆ°á»£ng Ä‘á»‹ch vá»¥ cáº§n táº¡o
public static ClassB2 CreateB2Factory(IServiceProvider serviceprovider)
{
    var service_c = serviceprovider.GetService<IClassC>();
    var sv = new ClassB2(service_c, "Thá»±c hiá»‡n trong ClassB2");
    return sv;
}

// cÃ³ thá»ƒ sá»­ dá»¥ng Factory trÃªn Ä‘á»ƒ Ä‘Äƒng kÃ½ IClassB.
services.AddSingleton<IClassB>(CreateB2Factory);
```

### Sá»­ dá»¥ng Options

Äá»ƒ tÃ¡ch báº¡ch giá»¯a cÃ¡c dá»‹ch vá»¥ vÃ  cÃ¡c thiáº¿t láº­p truyá»n vÃ o Ä‘á»ƒ khá»Ÿi táº¡o dá»‹ch vá»¥ thÃ¬ trong ServiceCollection há»— trá»£ sá»­ dá»¥ng giao diá»‡n IOptions

Cáº§n thÃªm package Microsoft.Extensions.Options

```Batch Script
dotnet add package Microsoft.Extensions.Options
```

CÃ¡c thiáº¿t láº­p cho má»™t dá»‹ch vá»¥ thÆ°á»ng thiáº¿t káº¿ lÃ  má»™t lá»›p chá»©a cÃ¡c thuá»™c tÃ­nh

```C#
public class MyServiceOptions
{
    public string data1 { get; set; }
    public int data2 { get; set; }
}
```

Äá»ƒ cÃ³ thá»ƒ Inject MyServiceOptions vÃ o MyService theo nguyÃªn táº¯c cá»§a ServiceCollection thÃ¬ lá»›p MyService thiáº¿t káº¿ sá»­ dá»¥ng IOption lÃ m tham sá»‘ khá»Ÿi táº¡o

```C#
public class MyService
{
    public string data1 { get; set; }
    public int data2 { get; set; }

    // Tham sá»‘ khá»Ÿi táº¡o lÃ  IOptions, cÃ¡c tham sá»‘ khá»Ÿi táº¡o khÃ¡c náº¿u cÃ³ khai bÃ¡o nhÆ° bÃ¬nh thÆ°á»ng
    public MyService(IOptions<MyServiceOptions> options)
    {
        // Äá»c Ä‘Æ°á»£c MyServiceOptions tá»« IOptions
        MyServiceOptions opts = options.Value;
        data1 = opts.data1;
        data2 = opts.data2;
    }

    public void PrintData() => Console.WriteLine($"{data1} / {data2}");
}
```

Khi tham sá»‘ khá»Ÿi táº¡o cÃ³ kiá»ƒu IOptions, thÃ¬ nÃ³ Ä‘Æ°á»£c Inject vÃ o tá»« má»™t táº­p há»£p cÃ¡c IOptions riÃªng biá»‡t vá»›i cÃ¡c dá»‹ch vá»¥

```C#
services.Configure<T>(
(T options)
{
    // T lÃ  tÃªn lá»›p chá»©a cÃ¡c thiáº¿t láº­p
    // HÃ£y thiáº¿t láº­p cÃ¡c giÃ¡ trá»‹ cho options
}
);

// vÃ­ dá»¥
services.Configure<MyServiceOptions>(
options =>
{
    options.data1 = "Xin chao cac ban";
    options.data2 = 2021;
}
);

// sá»­ dá»¥ng
services.AddSingleton<MyService>();
var provider = services.BuildServiceProvider();

var myservice = provider.GetService<MyService>();
myservice.PrintData();

// Káº¿t quáº£:
// Xin chao cac ban / 2021
```

_â—náº¿u muá»‘n láº¥y Ä‘á»‘i tÆ°á»£ng lá»›p MyServiceOptions trong DI Container_

```C#
var config = serviceprovider.GetService<IOptions<MyServiceOptions>>()
MyServiceOptions myServiceOptions = config.Value;
```

_â—náº¿u muá»‘n táº¡o trá»±c tiáº¿p Ä‘á»‘i tÆ°á»£ng IOptions<MyServiceOptions>, dÃ nh cho trÆ°á»ng há»£p muá»‘n táº¡o MyService trá»±c tiáº¿p khÃ´ng thÃ´ng qua DI Container. ThÃ¬ dÃ¹ng phÆ°Æ¡ng thá»©c Factory Options.Create(obj)_

```C#
var opts = Options.Create(new MyServiceOptions()
{
    data1 = "DATA-DATA-DATA-DATA-DATA",
    data2 = 12345
});
MyService myService = new MyService(opts);
myService.ShowData();
```

### Sá»­ dá»¥ng cáº¥u hÃ¬nh tá»« file

á» trÃªn, cÃ¡c giÃ¡ trá»‹ dá»¯ liá»‡u trong MyServiceOptions (nhÆ° data1, data2) cÃ³ thá»ƒ lÆ°u á»Ÿ file sau Ä‘Ã³ náº¡p vÃ o khi chÆ°Æ¡ng trÃ¬nh thá»±c thi

CÃ¡c file cáº¥u hÃ¬nh nÃ y há»— trá»£ nhiá»u Ä‘á»‹nh dáº¡ng nhÆ° XML, INI, JSON ... (cáº§n cÃ i Ä‘áº·t gÃ³i tÆ°Æ¡ng á»©ng)

```Batch Script
// gÃ³i cáº§n thiáº¿t Ä‘á»ƒ náº¡p
dotnet add package Microsoft.Extensions.Configuration
dotnet add package Microsoft.Extensions.Options.ConfigurationExtensions

// cÃ¡c gÃ³i tÆ°á»›ng á»©ng vá»›i loáº¡i file
dotnet add package Microsoft.Extensions.Configuration.Json
dotnet add package Microsoft.Extensions.Configuration.Ini
dotnet add package Microsoft.Extensions.Configuration.Xml
```

```C#
// vÃ­ dá»¥ Sá»­ dá»¥ng namespace vá»›i kiá»ƒu file Json
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.Configuration.Json;

```

**_Ä‘á»c thÃªm cÃ¡c file Ä‘á»‹nh dáº¡ng nhÆ° XML, INI, JSON trong ExPandendKnowledge.txt_**

ConfigurationBuilder

- Lá»›p ConfigurationBuilder, giÃºp náº¡p cÃ¡c cáº¥u hÃ¬nh lÆ°u trong file config, tá»« Ä‘Ã³ build ra Ä‘á»‘i tÆ°á»£ng ConfigurationRoot, Ä‘á»‘i tÆ°á»£ng nÃ y truy cáº­p Ä‘áº¿n cÃ¡c cáº¥u hÃ¬nh báº±ng chá»‰ toÃ¡n tá»­ chá»‰ sá»‘ [key]

- vÃ­ dá»¥ láº¥y cáº¥u hÃ¬nh lÆ°u táº¡i file appsettings.json, thÃ¬ náº¡p cáº¥u hÃ¬nh Ä‘Ã³ Ä‘á»ƒ cÃ³ Ä‘Æ°á»£c ConfigurationRoot

```C#
var configBuilder = new ConfigurationBuilder()
.SetBasePath(Directory.GetCurrentDirectory()) // file config á»Ÿ thÆ° má»¥c hiá»‡n táº¡i
.AddJsonFile("appsettings.json"); // náº¡p config Ä‘á»‹nh dáº¡ng JSON
var configurationroot = configBuilder.Build(); // Táº¡o configurationroot
```

- láº¥y má»™t Section nÃ o Ä‘Ã³ báº±ng phÆ°Æ¡ng thá»©c GetSection(key), nÃ³ tráº£ vá» Ä‘á»‘i tÆ°á»£ng biá»ƒu diá»…n nÃºt cáº¥u hÃ¬nh (JSON), giÃ¡ trá»‹ cá»§a nÃºt truy cáº­p báº±ng thuá»™c tÃ­nh Value

```json
// file appsettings.json
{
  "MyServiceOptions": {
    "data1": "ABCDE",
    "data2": 123456
  },

  "Option2": {
    "key1": "Test",
    "Key2": 789
  }
}
```

```C#
// Truy cáº­p config
var cf1 = configurationroot.GetSection("Option2").GetSection("key1").Value; // Test
var cf2 = configurationroot.GetSection("Option2").GetSection("key2").Value; // 789
var cf3 = configurationroot.GetSection("Option2").GetSection("key3").Value; // null, khÃ´ng tá»“n táº¡i
```

náº¡p config vÃ o IOption

- Trong file JSON cÃ³ má»™t Section cÃ³ tÃªn MyServiceOptions, ta cÃ³ thá»ƒ gÃ¡n cÃ¡c giÃ¡ trá»‹ trong Section Ä‘Ã³ vÃ o MyServiceOptions trong ServiceCollection

```C#
// Náº¡p má»Ÿ phÆ°Æ¡ng thá»©c má»Ÿ rá»™ng
services.AddOptions();
services.Configure<MyServiceOptions>(configurationroot.GetSection("MyServiceOptions"));

// LÆ°u Ã½: pháº£i cÃ i package ConfigurationExtensions
// dotnet add package Microsoft.Extensions.Options.ConfigurationExtensions
```

- vÃ­ dá»¥ hoÃ n chá»‰nh

```C#
var configBuilder = new ConfigurationBuilder()
.SetBasePath(Directory.GetCurrentDirectory()) // file config á»Ÿ thÆ° má»¥c hiá»‡n táº¡i
.AddJsonFile("appsettings.json"); // náº¡p config Ä‘á»‹nh dáº¡ng JSON
var configurationroot = configBuilder.Build(); // Táº¡o configurationroot

ServiceCollection services = new ServiceCollection();

services.AddOptions();
services.Configure<MyServiceOptions>(configurationroot.GetSection("MyServiceOptions"));

services.AddSingleton<MyService>();

var provider = services.BuildServiceProvider();

var myservice = provider.GetService<MyService>();
myservice.PrintData();

// Káº¿t quáº£:
// ABCDE / 123456
```

_â—Ká»¹ thuáº­t DI vá»›i thÆ° viá»‡n DependencyInjection á»Ÿ trÃªn lÃ  kiáº¿n thá»©c ráº¥t quan trá»ng cáº§n náº¯m vá»¯ng, nÃ³ lÃ  cÆ¡ sá»Ÿ Ä‘á»ƒ há»c cÃ¡c cÃ¡c mÃ´ hÃ¬nh láº­p trÃ¬nh hiá»‡n Ä‘áº¡i, nháº¥t lÃ  sau nÃ y Ã¡p dá»¥ng vá»›i Asp.Net Core_

## Nuget (thÆ° viá»‡n lá»›p)

> bá»• sung sau

## Uri, Dns, Ping

### Lá»›p Uri

System.Uri lÃ  lá»›p biá»ƒu diá»…n vá» Ä‘á»‹a chá»‰ URI (URL) (xem thÃªm TÃ¬m hiá»ƒu URI, URL), nÃ³ giÃºp cho nhanh chÃ³ng láº¥y thÃ´ng tin cÃ¡c thÃ nh pháº§n cá»§a URL nhÆ° host, path, query ...

Äá»‘i tÆ°á»£ng Uri cÃ²n sá»­ dá»¥ng trong tham sá»‘ Ä‘á»ƒ thá»±c hiá»‡n cÃ¡c truy váº¥n HTTP Request á»Ÿ cÃ¡c pháº§n sau.

```C#
string url = "https://www.youtube.com/watch?v=2w97mmTYR68";
var uri = new Uri(url);
var uritype = typeof(Uri);
uritype.GetProperties().ToList().ForEach(property =>
{
    Console.WriteLine($"{property.Name,15} {property.GetValue(uri)}");
});
Console.WriteLine($"Segments: {string.Join(",", uri.Segments)}");
```

### Lá»›p Dns vÃ  lá»›p IPHostEntry

Lá»›p Dns (System.Net.Dns) cung cáº¥p cÃ¡c phÆ°Æ¡ng thá»©c tÃ­nh Ä‘á»ƒ láº¥y thÃ´ng tin vá» host (Ä‘á»‹a chá»‰ website, server cung cáº¥p cÃ¡c dá»‹ch vá»¥ máº¡ng) tá»« há»‡ thá»‘ng phÃ¢n giáº£i tÃªn miá»n (Dns)

CÃ¡c thÃ´ng tin truy váº¥n Ä‘Æ°á»£c nÃ³ tráº£ vá» má»™t Ä‘á»‘i tÆ°á»£ng giao diá»‡n IPHostEntry

```C#
string url = "https://www.bootstrapcdn.com/";
var uri = new Uri(url);
var hostEntry = Dns.GetHostEntry(uri.Host);
Console.WriteLine($"Host {uri.Host} cÃ³ cÃ¡c IP");
hostEntry.AddressList.ToList().ForEach(ip => Console.WriteLine(ip));
```

PhÆ°Æ¡ng thá»©c lá»›p Dns

| TÃªn                     | Ã nghÄ©a                                                       |
| ----------------------- | ------------------------------------------------------------- | --- |
| GetHostName()           | Láº¥y hostname cá»§a mÃ¡y local                                    |
| GetHostEntry(String)    | PhÃ¢n giáº£i host hoáº·c IP thÃ nh Ä‘á»‘i tÆ°á»£ng IPHostEntry.           |
| GetHostEntry(IPAddress) | Äá»‘i tÆ°á»£ng kiá»ƒu IPHostEntry nÃ³ chá»©a thÃ´ng tin Ä‘á»‹a chá»‰ vá» host. |     |

Thuá»™c tÃ­nh IPHostEntry

| TÃªn         | Ã nghÄ©a                                             |
| ----------- | --------------------------------------------------- |
| HostName    | Chuá»—i chá»©a hostname cá»§a Server                      |
| AddressList | Máº£ng cÃ¡c pháº§n tá»­ kiá»ƒu IPAddress chá»©a cÃ¡c Ä‘á»‹a chá»‰ IP |

### Lá»›p Ping

Lá»›p Ping (System.Net.NetworkInformation.Ping), lá»›p nÃ y cho phÃ©p á»©ng dá»¥ng xÃ¡c Ä‘á»‹nh má»™t mÃ¡y tá»« xa (nhÆ° server, mÃ¡y trong máº¡ng ...) cÃ³ pháº£n há»“i khÃ´ng.

```C#
var ping = new Ping();
var pingReply = ping.Send("google.com.vn");
Console.WriteLine(pingReply.Status);
if (pingReply.Status == IPStatus.Success)
{
    Console.WriteLine(pingReply.RoundtripTime);
    Console.WriteLine(pingReply.Address);
}
```

## HttpClient

## Tá»•ng káº¿t (Ã½ hiá»ƒu cÃ¡ nhÃ¢n)

### CÃ¡c tÃ­nh cháº¥t OOP

Inheritance (káº¿ thá»«a) : CÃ¡c Ä‘á»an code trÃ¹ng láº·p vá» tÃ­nh nÄƒng, chá»©c nÄƒng Ä‘Æ°á»£c tÃ¡i sá»­ láº¡i thÃ´ng qua viá»‡c káº¿ thá»«a giá»¯a cÃ¡c lá»›p. TÃ­nh káº¿ thá»«a giÃºp giáº£m sá»‘ lÆ°á»£ng code trÃ¹ng láº·p, dá»… thá»±c hiá»‡n viá»‡c quáº£n lÃ½, báº£o trÃ¬, phÃ¡t triá»ƒn vÃ  sá»­a Ä‘á»•i. (Káº¿ thá»«a giá»¯a cÃ¡c lá»›p)

Abstraction (trá»«u tÆ°á»£ng) : Táº¡o ra nhá»¯ng khung code máº«u thá»ƒ hiá»‡n cÃ¡c chá»©c nÄƒng cá»§a 1 lá»›p, 1 giao diá»‡n, 1 hÃ m (cáº§n hiá»‡n thá»±c cá»¥ thá»ƒ). TÃ­nh trá»«u tÆ°á»£ng giÃºp dev dá»… hÃ¬nh dung, há»‡ thá»‘ng cÃ¡c Ä‘oáº¡n code; Ä‘iá»u chá»‰nh, háº¡n cháº¿ thiáº¿u sÃ³t trong quÃ¡ trÃ¬nh hiá»‡n thá»±c Ã½ tÆ°á»Ÿng ban Ä‘áº§u. (Lá»›p/phÆ°Æ¡ng thá»©c trá»«u tÆ°á»£ng - abstract, giao diá»‡n - interface)

Polymorphism (Ä‘a hÃ¬nh) : Thá»±c hiá»‡n, tá»•ng quÃ¡t hÃ³a cÃ¡c tÃ­nh nÄƒng, chá»©c nÄƒng Ä‘á»ƒ phÃ¹ há»£p vá»›i nhiá»u trÆ°á»ng há»£p Ä‘áº§u vÃ o khÃ¡c. TÃ­nh Ä‘a hÃ¬nh lÃ m giáº£m sá»‘ lÆ°á»£ng code cÃ³ cÃ¹ng chá»©c nÄƒng, giÃºp code dá»… quáº£n lÃ½, báº£o trÃ¬, phÃ¡t triá»ƒn vÃ  sá»­a Ä‘á»•i. (QuÃ¡ táº£i - overload, ghi Ä‘Ã¨/náº¡p chá»“ng - override, generic)

Encapsulation (Ä‘Ã³ng gÃ³i) : GÃ´m cÃ¡c Ä‘oáº¡n code cÃ³ cÃ¹ng Ä‘iá»ƒm chung vÃ o 1 khu vá»±c vÃ  phÃ¢n chia cÃ¡c giá»›i háº¡n truy cáº­p (cÃ¡c namespace, cÃ¡c class). TÃ­nh Ä‘Ã³ng gÃ³i há»‡ thá»‘ng láº¡i code trong dá»± Ã¡n; giÃºp dá»… quáº£n lÃ½, báº£o trÃ¬, phÃ¡t triá»ƒn, sá»­a Ä‘á»•i; tÄƒng tÃ­nh báº£o máº­t thÃ´ng qua pháº¡m vi truy cáº­p. (XÃ¢y dá»±ng cÃ¡c namespace, class, phÃ¢n chia file code)
